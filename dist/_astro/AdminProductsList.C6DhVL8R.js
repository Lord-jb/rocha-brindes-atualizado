import{b as t,h as e,d as a,c as r,g as i,i as s,F as o,e as d,r as l,S as n,t as c,s as p,j as x,f as g}from"./web.BsTFG2N9.js";import{f as u}from"./utils.CDcRrbXb.js";import{e as h}from"./eye.BvNMXNag.js";import{I as m}from"./Icon.4pfrFdzL.js";import{t as f}from"./trash-2.CB0krndz.js";var y=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],v=a=>t(m,e(a,{name:"SquarePen",iconNode:y})),b=c('<div class=overflow-x-auto><table class=w-full><thead class="bg-gray-50 border-b border-gray-200"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Produto</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Preço</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Destaque</th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th></tr></thead><tbody class="bg-white divide-y divide-gray-200">'),w=c('<div class="bg-white rounded-xl shadow-card overflow-hidden">'),S=c('<div class="p-12 text-center"><p class="text-gray-600 mb-4">Nenhum produto cadastrado</p><a href=/admin/produtos/novo class="btn-primary inline-flex">Criar Primeiro Produto'),k=c('<tr class=hover:bg-gray-50><td class="px-6 py-4"><div class="flex items-center gap-3"><img class="w-12 h-12 object-cover rounded-lg bg-gray-100"><div class=min-w-0><div class="text-sm font-medium text-gray-900 truncate"></div><div class="text-sm text-gray-500 truncate"></div></div></div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm font-medium text-gray-900"></div></td><td class="px-6 py-4 whitespace-nowrap"><button></button></td><td class="px-6 py-4 whitespace-nowrap"><span></span></td><td class="px-6 py-4 whitespace-nowrap text-right"><div class="flex items-center justify-end gap-2"><a target=_blank class="p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors"title="Ver no site"></a><a class="p-2 text-primary-500 hover:text-primary-600 rounded-lg hover:bg-primary-50 transition-colors"title=Editar></a><button class="p-2 text-red-500 hover:text-red-600 rounded-lg hover:bg-red-50 transition-colors disabled:opacity-50"title=Excluir>');function C(e){const[a,c]=r(e.products),[m,y]=r(null);return C=i(w),s(C,t(n,{get when(){return a().length>0},get fallback(){return i(S)},get children(){var e=i(b),r=e.firstChild.firstChild.nextSibling;return s(r,t(o,{get each(){return a()},children:e=>{return o=(r=i(k)).firstChild,w=(b=(n=o.firstChild.firstChild).nextSibling.firstChild).nextSibling,C=(S=o.nextSibling).firstChild,j=S.nextSibling,E=j.firstChild,$=j.nextSibling,z=$.firstChild,P=$.nextSibling.firstChild.firstChild,T=P.nextSibling,q=T.nextSibling,s(b,()=>e.name),s(w,()=>e.slug),s(C,()=>u(e.price)),E.$$click=()=>(async(t,e)=>{try{if(!(await fetch(`/api/products/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({active:!e})})).ok)throw new Error("Failed to toggle active");c(a().map(a=>a.id===t?{...a,active:!e}:a))}catch(r){alert("Erro ao atualizar status. Tente novamente.")}})(e.id,e.active),s(E,()=>e.active?"Ativo":"Inativo"),s(z,()=>e.featured?"Sim":"Não"),s(P,t(h,{size:18})),s(T,t(v,{size:18})),q.$$click=()=>(async(t,e)=>{if(confirm(`Tem certeza que deseja excluir o produto "${e}"?`)){y(t);try{if(!(await fetch(`/api/products/${t}`,{method:"DELETE"})).ok)throw new Error("Failed to delete product");c(a().filter(e=>e.id!==t)),alert("Produto excluído com sucesso!")}catch(r){alert("Erro ao excluir produto. Tente novamente.")}finally{y(null)}}})(e.id,e.name),s(q,t(f,{size:18})),d(t=>{var a=e.main_image_url||"https://placehold.co/100x100/f3f4f6/9ca3af?text=Sem+Imagem",r=e.name,i="px-2 py-1 text-xs font-medium rounded-full "+(e.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),s="px-2 py-1 text-xs font-medium rounded-full "+(e.featured?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-500"),o=`/produto/${e.slug}`,d=`/admin/produtos/${e.id}/editar`,l=m()===e.id;return a!==t.e&&p(n,"src",t.e=a),r!==t.t&&p(n,"alt",t.t=r),i!==t.a&&x(E,t.a=i),s!==t.o&&x(z,t.o=s),o!==t.i&&p(P,"href",t.i=o),d!==t.n&&p(T,"href",t.n=d),l!==t.s&&g(q,"disabled",t.s=l),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),l(),r;var r,o,n,b,w,S,C,j,E,$,z,P,T,q}})),e}})),C;var C}a(["click"]);export{C as default};
