const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/CategorySidebar.B0o7v6t1.js","_astro/Providers.DSdMb4Z2.js","_astro/index.y5FlbPQu.js","_astro/chevron-right.BQH1nt45.js","_astro/x.Dn29-G3J.js","_astro/search.C63jIeQO.js","_astro/ProductGrid.BDD4MqXn.js","_astro/ProductModal.BqaNjiR7.js","_astro/Header.DQOQWn74.js","_astro/package.DPbreus8.js","_astro/plus.C3sXr7mY.js","_astro/CartSidebar.dEnuouAG.js","_astro/trash-2.CaiQsfJl.js","_astro/Footer.5CgAtgvI.js","_astro/phone.D-NBCNhh.js"])))=>i.map(i=>d[i]);
import{_ as h,j as e,P as S,g as A,d as L,b as k}from"./Providers.DSdMb4Z2.js";import{r as a}from"./index.y5FlbPQu.js";import{u as z,a as I,s as R,H as M,M as T}from"./Header.DQOQWn74.js";import{C as D,a as O}from"./chevron-right.BQH1nt45.js";const U=a.lazy(()=>h(()=>import("./CategorySidebar.B0o7v6t1.js"),__vite__mapDeps([0,1,2,3,4,5]))),V=a.lazy(()=>h(()=>import("./ProductGrid.BDD4MqXn.js"),__vite__mapDeps([6,1,2,3]))),W=a.lazy(()=>h(()=>import("./ProductModal.BqaNjiR7.js"),__vite__mapDeps([7,1,2,3,8,4,9,10]))),F=a.lazy(()=>h(()=>import("./CartSidebar.dEnuouAG.js"),__vite__mapDeps([11,1,2,8,3,4,10,12]))),G=a.lazy(()=>h(()=>import("./Footer.5CgAtgvI.js"),__vite__mapDeps([13,1,2,3,14])));function H(){const{data:o,isLoading:y}=z(1e3),{category:n,search:l,add:w,setCategory:p,setSearch:x}=I(),[g,b]=a.useState(null),[N,_]=a.useState("5589994333316"),[r,f]=a.useState(0),m=6;a.useEffect(()=>{if(o){R(o);const s=[];o.layout.logo&&s.push(o.layout.logo)}},[o]),a.useEffect(()=>{const t=new URLSearchParams(window.location.search).get("categoria");t&&p(t)},[p]),a.useEffect(()=>{f(0),window.scrollTo({top:0,behavior:"smooth"})},[n,l]);const i=a.useMemo(()=>o?o.products.filter(s=>{const t=n==="Todos"||s.categorias?.includes(n),d=!l||s.nome.toLowerCase().includes(l.toLowerCase())||s.id.toLowerCase().includes(l.toLowerCase());return t&&d}):[],[o,n,l]),C=a.useMemo(()=>{const s=r*m;return i.slice(s,s+m)},[i,r]),u=Math.ceil(i.length/m),j=s=>{f(s),window.scrollTo({top:0,behavior:"smooth"})};a.useEffect(()=>{(async()=>{try{const t=await A(L(k,"config","general"));if(t.exists()){const d=t.data();d.whatsappNumber&&_(d.whatsappNumber)}}catch(t){console.error("Erro ao carregar Contato:",t)}})()},[]);const P=()=>{const s=N.replace(/\D/g,""),t=encodeURIComponent("Olá! Gostaria de mais informações sobre os produtos."),d=`https://wa.me/${s}?text=${t}`;/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?window.location.href=d:window.open(d,"_blank")},v=e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((s,t)=>e.jsx("div",{className:"bg-white rounded-xl h-96 animate-pulse"},t))}),E=()=>u<=1?null:e.jsx("div",{className:"mt-12 mb-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>j(r-1),disabled:r===0,className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-gray-300 rounded-lg disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-50 hover:border-primary transition-all font-medium text-sm",children:[e.jsx(D,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Anterior"})]}),e.jsxs("span",{className:"text-sm text-gray-600 font-medium",children:["Página ",e.jsx("span",{className:"font-bold text-primary",children:r+1})," de"," ",e.jsx("span",{className:"font-bold",children:u})]}),e.jsxs("button",{onClick:()=>j(r+1),disabled:r>=u-1,className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-gray-300 rounded-lg disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-50 hover:border-primary transition-all font-medium text-sm",children:[e.jsx("span",{className:"hidden sm:inline",children:"Próxima"}),e.jsx(O,{size:18})]})]})}),c=o?.categories.find(s=>s.nome===n);return e.jsxs(e.Fragment,{children:[e.jsx(M,{}),e.jsx("main",{className:"min-h-screen bg-gray-50 pt-4 md:pt-8",children:e.jsx("div",{className:"container mx-auto px-4 pb-4",children:e.jsxs("div",{className:"grid lg:grid-cols-[280px_1fr] gap-8",children:[e.jsx(a.Suspense,{fallback:null,children:e.jsx(U,{categories:o?.categories.map(s=>s.nome)||[],selected:n,onSelect:p,search:l,onSearch:x})}),e.jsxs("div",{children:[c&&(c.descricao||c.videoUrl)&&e.jsxs("div",{className:"mb-8 bg-white rounded-2xl shadow-card overflow-hidden",children:[c.videoUrl&&e.jsx("div",{className:"relative w-full aspect-video bg-gray-900",children:e.jsx("video",{src:c.videoUrl,className:"w-full h-full object-cover",autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}),c.descricao&&e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-title font-bold text-dark mb-3",children:n}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:c.descricao})]})]}),y?v:i.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("p",{className:"text-xl text-gray-500",children:"Nenhum produto encontrado"}),l&&e.jsx("button",{onClick:()=>x(""),className:"mt-4 px-6 py-2 bg-primary text-white rounded-lg hover:opacity-90 transition-all",children:"Limpar busca"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Mostrando ",e.jsx("span",{className:"font-semibold",children:r*m+1})," -"," ",e.jsx("span",{className:"font-semibold",children:Math.min((r+1)*m,i.length)})," de"," ",e.jsx("span",{className:"font-semibold",children:i.length})," ",i.length===1?"produto":"produtos"]})}),e.jsx(a.Suspense,{fallback:v,children:e.jsx(V,{products:C,onView:b,onAdd:w})}),E()]})]})]})})}),e.jsx("button",{onClick:P,className:"fixed bottom-6 right-6 bg-green-500 hover:bg-green-600 text-white p-4 rounded-full shadow-2xl hover:scale-110 transition-all z-40","aria-label":"Contato WhatsApp",children:e.jsx(T,{size:28})}),e.jsxs(a.Suspense,{fallback:null,children:[g&&e.jsx(W,{product:g,onClose:()=>b(null)}),e.jsx(F,{}),e.jsx(G,{})]})]})}function K(){return e.jsx(S,{children:e.jsx(H,{})})}export{K as default};
