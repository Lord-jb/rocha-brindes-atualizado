import{q as se,e as ae,f as Z,b as q,c as ce,j as e,s as Y,d as V,h as je,u as le,i as ve,l as ie,k as Ne,m as ge,g as te,n as we,a as Ce}from"./Providers.Tkr5jSlj.js";import{r as n}from"./index.y5FlbPQu.js";import{c as O,u as pe,o as he,C as ke,a as Se}from"./chevron-right.CYQHz5DZ.js";import{X as H}from"./x.C1Z6Gwrm.js";import{S as Ie}from"./search.DZ_NgUoX.js";import{T as de}from"./trash-2.SCFBAFVo.js";import{P as ne,M as Ee,a as ze}from"./phone.e0DJ84kG.js";import{P as be}from"./plus.BloKM-6q.js";import{P as oe}from"./package.q2AT0W3T.js";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=O("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=O("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=O("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=O("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=O("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=O("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=O("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=O("MoveDown",[["path",{d:"M8 18L12 22L16 18",key:"cskvfv"}],["path",{d:"M12 2V22",key:"r89rzk"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=O("MoveUp",[["path",{d:"M8 6L12 2L16 6",key:"1yvkyx"}],["path",{d:"M12 2V22",key:"r89rzk"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=O("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=O("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=O("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=O("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=O("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=O("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=O("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);function me(){return pe({queryKey:["categories"],queryFn:async()=>{const a=se(Z(q,"categorias"),ae("nome"));return(await ce(a)).docs.map(c=>({id:c.id,...c.data()}))},staleTime:300*1e3,refetchOnMount:!0,refetchOnWindowFocus:!1})}const Ve="iem94FVEkj3Qjv3DsJXpbQ";async function J(a,r){const c=a.name.split(".").pop()?.toLowerCase()||"jpg";let C="";if(r.type==="main"&&r.productId)C=`${r.productId}.${c}`;else if(r.type==="variation"&&r.productId&&r.variation){const T=r.variation.toLowerCase().replace(/\s+/g,"-");C=`${r.productId}-${T}.${c}`}else C=a.name;const x=new File([a],C,{type:a.type}),k=new FormData;k.append("file",x),k.append("metadata",JSON.stringify({folder:r.folder,productId:r.productId,variation:r.variation,type:r.type,filename:C,uploadDate:new Date().toISOString()}));const j=await fetch("https://imagens.bjeslee19.workers.dev/",{method:"POST",body:k}),P=await j.text();let g;try{g=JSON.parse(P)}catch{g=P}if(!j.ok)throw console.error("Upload error RAW:",g),new Error(typeof g=="string"?g:JSON.stringify(g));if(!g||!g.imageId)throw console.error("Upload OK mas sem imageId:",g),new Error("ID da imagem não retornado pelo servidor");return g.imageId}function re(a,r="public"){return a?a.startsWith("http://")||a.startsWith("https://")||a.startsWith("blob:")||a.startsWith("data:")?a:`https://imagedelivery.net/${Ve}/${a}/${r}`:""}async function X(a){if(a&&!(a.startsWith("http://")||a.startsWith("https://"))&&!(a.startsWith("blob:")||a.startsWith("data:")))try{const r=await fetch("https://imagens.bjeslee19.workers.dev/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageId:a})});if(!r.ok){const c=await r.text();console.error(`Erro ao deletar imagem ${a}:`,c)}}catch(r){console.error(`Erro ao deletar imagem ${a}:`,r)}}async function $e(a){const r=a.filter(c=>c&&!c.startsWith("http")&&!c.startsWith("blob:")&&!c.startsWith("data:"));if(r.length!==0)try{const c=await fetch("https://imagens.bjeslee19.workers.dev/delete-multiple",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageIds:r})});if(!c.ok){const C=await c.text();console.error("Erro ao deletar múltiplas imagens:",C)}}catch(c){console.error("Erro ao deletar múltiplas imagens:",c)}}const Fe="1t7T-5mU4ET0kjqd8x_sXlEwunwogCBrlqFnYpVaoyvE",Be="AIzaSyAWUmt2UDeXxY1my2ajGU5bAMSjuU0L14o",We="produtos!A:Z";function xe(a){return a.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toUpperCase().trim()}function Ge(a,r){if(!a||!r)return a;const c=new RegExp(`\\s+${r}$`,"i");return a.replace(c,"").trim()}async function Ke(a){const r=a.trim();if(!r)return null;const c=r.split("_"),C=c.length>2?c.slice(0,c.length-1).join("_"):r,x=`https://sheets.googleapis.com/v4/spreadsheets/${Fe}/values/${encodeURIComponent(We)}?key=${Be}`,k=await fetch(x);if(!k.ok)throw console.error("Erro ao buscar planilha:",await k.text()),new Error("Não foi possível acessar a planilha do Google Sheets");const P=(await k.json()).values||[];if(!P.length)return null;const[g,...T]=P;console.log("Header da planilha:",g),console.log("Primeira linha de dados:",T[0]);const S=f=>xe(f||""),E=g.findIndex(f=>{const w=S(f);return["ID","CODIGO","CÓDIGO","SKU","COD","CODE"].includes(w)}),d=g.findIndex(f=>{const w=S(f);return["NOME","PRODUTO","DESCRICAO_CURTA","NAME"].includes(w)}),N=g.findIndex(f=>{const w=S(f);return["DESCRICAO","DESCRIÇÃO","DESC","DESCRIPTION"].includes(w)}),D=g.findIndex(f=>{const w=S(f);return["COR","CORES","VARIACAO","VARIACOES","VARIAÇÃO","COLOR"].includes(w)}),U=g.findIndex(f=>{const w=S(f);return["CATEGORIA","CATEGORIAS","GRUPO","CATEGORY"].includes(w)}),A=g.findIndex(f=>{const w=S(f);return["DESTAQUE","HIGHLIGHT","FEATURED"].includes(w)});if(E===-1)throw console.error("Colunas disponíveis:",g.map((f,w)=>`${w}: ${f}`)),new Error(`Coluna de código/SKU não encontrada na planilha. Colunas disponíveis: ${g.join(", ")}`);const u=T.filter(f=>{const w=(f[E]||"").trim();return w?w===C||w.startsWith(C+"_"):!1});if(!u.length)return null;let v="",I="";const _=new Set;let o=!1;const l=[];for(const f of u){const w=d>=0?(f[d]||"").trim():"",B=N>=0?(f[N]||"").trim():"",$=D>=0?(f[D]||"").trim():"",y=U>=0?(f[U]||"").trim():"",z=A>=0?(f[A]||"").trim():"";!v&&w&&(v=$?Ge(w,$):w),!I&&B&&(I=B),y&&y.split(",").map(t=>t.trim()).filter(Boolean).forEach(t=>_.add(t)),typeof z=="string"&&["SIM","TRUE","1","YES","S"].includes(xe(z))&&(o=!0),$&&!l.find(t=>t.cor===$)&&l.push({cor:$})}const p=Array.from(_);return{baseSku:C,nome:v||C,descricao:I,categorias:p,destaque:o,variacoes:l}}function He(){const[a,r]=n.useState(""),[c,C]=n.useState(""),[x,k]=n.useState(""),[j,P]=n.useState(!1),[g,T]=n.useState([]),[S,E]=n.useState(!1),[d,N]=n.useState(null),[D,U]=n.useState(""),[A,u]=n.useState([]),[v,I]=n.useState(""),[_,o]=n.useState(""),[l,p]=n.useState(!1),[f,w]=n.useState(""),[B,$]=n.useState(!1),{data:y=[]}=me(),z=i=>{const h=i.target.files?.[0];h&&(N(h),U(URL.createObjectURL(h)))},t=()=>{if(v.trim()){const i=v.trim(),h=[...A,{cor:i,image:null,preview:""}];u(h),_||o(i),I("")}},s=(i,h)=>{const R=[...A];R[i].image=h,R[i].preview=URL.createObjectURL(h),u(R)},b=i=>{const h=A[i]?.cor,R=A.filter((M,F)=>F!==i);u(R),o(M=>M&&M===h?R[0]?.cor??"":M)},m=async()=>{const i=c.trim();if(i){$(!0),w("");try{const h=await Ke(i);if(!h){w("Nenhum produto encontrado na planilha com esse código.");return}if(C(h.baseSku),h.nome&&r(h.nome),h.descricao&&k(h.descricao),h.categorias?.length&&(T(h.categorias),E(!1)),P(h.destaque),h.variacoes?.length){const R=h.variacoes.map(F=>({cor:F.cor,image:null,preview:""}));u(R);const M=h.variacoes.find(F=>F.cor.toLowerCase().includes("preto"));M?o(M.cor):h.variacoes[0]?o(h.variacoes[0].cor):o("")}else u([]),o("");w("Dados preenchidos a partir da planilha ✅")}catch(h){console.error(h),w("Erro ao buscar dados na planilha.")}finally{$(!1)}}},L=async i=>{if(i.preventDefault(),g.length===0){E(!0),w("Selecione pelo menos uma categoria");return}E(!1),p(!0),w("");try{if(!c.trim())throw new Error("Informe um código/SKU");const h=[],R=[];let M=null;const F={};for(const K of A){if(!K.image)continue;const W=await J(K.image,{folder:`produtos/${c}/variacoes`,productId:c,variation:K.cor,type:"variation"});R.push({cor:K.cor,imagem_url:W,thumb_url:W}),h.push(W),F[K.cor]=W}if(d)M=await J(d,{folder:`produtos/${c}`,productId:c,type:"main"}),h.unshift(M);else if(_&&F[_])M=F[_];else{const K=Object.keys(F).find(W=>W.toLowerCase().includes("preto"));if(K)M=F[K];else{const W=Object.values(F)[0];W&&(M=W)}}if(!M)throw new Error("Envie pelo menos uma imagem (principal ou de alguma variação).");await Y(V(Z(q,"produtos"),c),{id:c,nome:a,descricao:x,categorias:g,destaque:j,variacoes:R,imagem_url:M,thumb_url:M,imagens_urls:h,thumbs_urls:h,createdAt:je()}),w("Produto salvo com sucesso!"),r(""),C(""),k(""),P(!1),T([]),E(!1),N(null),U(""),u([]),I(""),o("")}catch(h){console.error(h),w(h instanceof Error?h.message:"Erro ao salvar produto")}finally{p(!1)}};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-title font-bold mb-6",children:"Adicionar Produto"}),e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Nome"}),e.jsx("input",{type:"text",value:a,onChange:i=>r(i.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"SKU/Código"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:c,onChange:i=>C(i.target.value),onBlur:m,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary",required:!0}),e.jsx("button",{type:"button",onClick:m,disabled:B,className:"px-3 py-2 text-sm rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50",children:B?"Buscando...":"Planilha"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Descrição"}),e.jsx("textarea",{value:x,onChange:i=>k(i.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2",children:["Categorias ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:`flex flex-wrap gap-2 p-3 rounded-lg border-2 ${S?"border-red-300 bg-red-50":"border-gray-200"}`,children:y.map(i=>e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-white rounded-lg cursor-pointer hover:bg-gray-50 border border-gray-200",children:[e.jsx("input",{type:"checkbox",checked:g.includes(i.nome),onChange:h=>{E(!1),h.target.checked?T(R=>[...R,i.nome]):T(R=>R.filter(M=>M!==i.nome))},className:"rounded"}),e.jsx("span",{className:"text-sm",children:i.nome})]},i.id))}),S&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Selecione pelo menos uma categoria"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:j,onChange:i=>P(i.target.checked),className:"rounded"}),e.jsx("span",{className:"text-sm font-semibold",children:"Produto em destaque"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Imagem Principal (opcional)"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:D?e.jsxs("div",{className:"relative aspect-square max-w-xs mx-auto",children:[e.jsx("img",{src:D,alt:"Preview",className:"w-full h-full object-contain"}),e.jsx("button",{type:"button",onClick:()=>{N(null),U("")},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1",children:e.jsx(H,{size:16})})]}):e.jsxs("label",{className:"flex flex-col items-center gap-2 cursor-pointer",children:[e.jsx(G,{className:"text-gray-400",size:48}),e.jsx("span",{className:"text-sm text-gray-600",children:"Clique para selecionar imagem principal (opcional)"}),e.jsx("input",{type:"file",accept:"image/*",onChange:z,className:"hidden"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Variações de Cor"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",value:v,onChange:i=>I(i.target.value),onKeyDown:i=>{i.key==="Enter"&&(i.preventDefault(),t())},placeholder:"Nome da cor (ex: Vermelho, Preto fosco)",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary"}),e.jsx("button",{type:"button",onClick:t,className:"bg-primary hover:opacity-90 text-text-primary px-4 py-2 rounded-lg font-semibold",children:"Adicionar"})]}),A.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Cor principal"}),e.jsxs("select",{value:_,onChange:i=>o(i.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"Selecione a cor principal"}),A.map((i,h)=>e.jsx("option",{value:i.cor,children:i.cor},i.cor+h))]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Essa cor será usada como principal se você não enviar imagem principal do produto."})]}),e.jsx("div",{className:"space-y-3",children:A.map((i,h)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-sm mb-2",children:i.cor}),i.preview?e.jsx("div",{className:"relative w-24 h-24",children:e.jsx("img",{src:i.preview,alt:i.cor,className:"w-full h-full object-cover rounded"})}):e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-white border border-gray-300 rounded cursor-pointer hover:bg-gray-50",children:[e.jsx(G,{size:16}),e.jsx("span",{className:"text-xs",children:"Adicionar imagem"}),e.jsx("input",{type:"file",accept:"image/*",onChange:R=>{const M=R.target.files?.[0];M&&s(h,M)},className:"hidden"})]})]}),e.jsx("button",{type:"button",onClick:()=>b(h),className:"text-red-500 hover:bg-red-50 p-2 rounded",children:e.jsx(H,{size:18})})]},h))})]}),f&&e.jsx("p",{className:`text-center font-semibold ${f.includes("sucesso")||f.includes("planilha")?"text-green-600":"text-red-600"}`,children:f}),e.jsx("button",{type:"submit",disabled:l,className:"w-full bg-primary hover:opacity-90 text-text-primary font-bold py-3 rounded-lg transition-all disabled:opacity-50",children:l?"Salvando...":"Salvar Produto"})]})]})}function Qe({product:a,onClose:r}){const[c,C]=n.useState(a.nome||""),[x,k]=n.useState(a.descricao||""),[j,P]=n.useState(a.destaque||!1),[g,T]=n.useState(a.categorias||[]),[S,E]=n.useState(null),[d,N]=n.useState(a.imagem_url?re(a.imagem_url,"thumbnail"):""),[D,U]=n.useState(a.variacoes?.map(y=>({cor:y.cor,image:null,preview:re(y.imagem_url,"thumbnail"),existingUrl:y.imagem_url}))||[]),[A,u]=n.useState(""),[v,I]=n.useState(!1),[_,o]=n.useState(""),{data:l=[]}=me(),p=y=>{const z=y.target.files?.[0];z&&(E(z),N(URL.createObjectURL(z)))},f=()=>{A.trim()&&(U([...D,{cor:A.trim(),image:null,preview:""}]),u(""))},w=(y,z)=>{const t=[...D];t[y].image=z,t[y].preview=URL.createObjectURL(z),U(t)},B=y=>{U(D.filter((z,t)=>t!==y))},$=async y=>{y.preventDefault(),I(!0),o("");try{let z=a.imagem_url;S&&(z=await J(S,{folder:`produtos/${a.id}`,productId:a.id,type:"main"}),a.imagem_url&&a.imagem_url!==z&&await X(a.imagem_url));const t=[],s=[z],b=a.variacoes?.map(m=>m.imagem_url)||[];for(const m of D)if(m.image){const L=await J(m.image,{folder:`produtos/${a.id}/variacoes`,productId:a.id,variation:m.cor,type:"variation"});if(t.push({cor:m.cor,imagem_url:L,thumb_url:L}),s.push(L),m.existingUrl&&m.existingUrl!==L){const i=b.indexOf(m.existingUrl);i>-1&&b.splice(i,1)}}else if(m.existingUrl){const L=a.variacoes?.find(i=>i.cor===m.cor);if(L){t.push(L),s.push(L.imagem_url);const i=b.indexOf(L.imagem_url);i>-1&&b.splice(i,1)}}for(const m of b)await X(m);await le(V(q,"produtos",a.id),{nome:c,descricao:x,categorias:g,destaque:j,variacoes:t,imagem_url:z,thumb_url:z,imagens_urls:s,thumbs_urls:s}),o("Produto atualizado com sucesso!"),setTimeout(()=>r(),1500)}catch(z){console.error(z),o(z instanceof Error?z.message:"Erro ao atualizar produto")}finally{I(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center z-10",children:[e.jsx("h2",{className:"text-xl font-title font-bold",children:"Editar Produto"}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(H,{size:20})})]}),e.jsxs("form",{onSubmit:$,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Nome"}),e.jsx("input",{type:"text",value:c,onChange:y=>C(y.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"SKU/Código"}),e.jsx("input",{type:"text",value:a.id,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Descrição"}),e.jsx("textarea",{value:x,onChange:y=>k(y.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Categorias"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(y=>e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:g.includes(y.nome),onChange:z=>{z.target.checked?T(t=>[...t,y.nome]):T(t=>t.filter(s=>s!==y.nome))},className:"rounded"}),e.jsx("span",{className:"text-sm",children:y.nome})]},y.id))})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j,onChange:y=>P(y.target.checked),className:"rounded"}),e.jsx("span",{className:"text-sm font-semibold",children:"Produto em destaque"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Imagem Principal"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:d?e.jsxs("div",{className:"relative aspect-square max-w-xs mx-auto",children:[e.jsx("img",{src:d,alt:"Preview",className:"w-full h-full object-contain"}),e.jsxs("label",{className:"absolute bottom-2 right-2 bg-primary text-white p-2 rounded-full cursor-pointer hover:opacity-90 shadow-lg transition-opacity",children:[e.jsx(G,{size:16}),e.jsx("input",{type:"file",accept:"image/*",onChange:p,className:"hidden"})]})]}):e.jsxs("label",{className:"flex flex-col items-center gap-2 cursor-pointer",children:[e.jsx(G,{className:"text-gray-400",size:48}),e.jsx("span",{className:"text-sm text-gray-600",children:"Clique para selecionar imagem principal"}),e.jsx("input",{type:"file",accept:"image/*",onChange:p,className:"hidden"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Variações de Cor"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",value:A,onChange:y=>u(y.target.value),onKeyDown:y=>{y.key==="Enter"&&(y.preventDefault(),f())},placeholder:"Nome da cor (ex: Vermelho, Preto fosco)",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:outline-none"}),e.jsx("button",{type:"button",onClick:f,className:"bg-primary hover:opacity-90 text-white px-4 py-2 rounded-lg font-semibold transition-opacity",children:"Adicionar"})]}),e.jsx("div",{className:"space-y-3",children:D.map((y,z)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-sm mb-2",children:y.cor}),y.preview?e.jsxs("div",{className:"relative w-24 h-24",children:[e.jsx("img",{src:y.preview,alt:y.cor,className:"w-full h-full object-cover rounded"}),e.jsxs("label",{className:"absolute bottom-0 right-0 bg-primary text-white p-1 rounded cursor-pointer hover:opacity-90 shadow-md transition-opacity",children:[e.jsx(G,{size:12}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>{const s=t.target.files?.[0];s&&w(z,s)},className:"hidden"})]})]}):e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-white border border-gray-300 rounded cursor-pointer hover:bg-gray-50 transition-colors",children:[e.jsx(G,{size:16}),e.jsx("span",{className:"text-xs",children:"Adicionar imagem"}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>{const s=t.target.files?.[0];s&&w(z,s)},className:"hidden"})]})]}),e.jsx("button",{type:"button",onClick:()=>B(z),className:"text-red-500 hover:bg-red-50 p-2 rounded transition-colors",children:e.jsx(H,{size:18})})]},z))})]}),_&&e.jsx("div",{className:`p-3 rounded-lg text-center font-semibold ${_.includes("sucesso")?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:_}),e.jsx("button",{type:"submit",disabled:v,className:"w-full bg-primary hover:opacity-90 text-white font-bold py-3 rounded-lg transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Salvando...":"Salvar Alterações"})]})]})})}function Je(){const[a,r]=n.useState(0),[c,C]=n.useState([]),[x,k]=n.useState(null),[j,P]=n.useState(null),[g,T]=n.useState(""),S=50,E=ve(),d=n.useMemo(()=>{const o=se(Z(q,"produtos"),ae("createdAt","desc"),ie(S));return a>0&&c[a-1]?se(Z(q,"produtos"),ae("createdAt","desc"),Ne(c[a-1]),ie(S)):o},[a,c,S]),{data:N=[],isLoading:D,refetch:U,isFetching:A}=pe({queryKey:["admin-products",a,S,c[a-1]?.id],queryFn:async()=>{const l=(await ce(d)).docs;return l.length>0&&C(p=>{const f=[...p];return f[a]=l[l.length-1],f}),l.map(p=>({id:p.id,...p.data()}))},placeholderData:o=>o??[],staleTime:3e4}),u=n.useMemo(()=>{if(!g.trim())return N;const o=g.toLowerCase();return N.filter(l=>l.nome.toLowerCase().includes(o)||l.id.toLowerCase().includes(o))},[N,g]),v=async o=>{if(confirm(`Tem certeza que deseja excluir "${o.nome}"?`)){P(o.id);try{const l=[];o.imagem_url&&l.push(o.imagem_url),o.thumb_url&&o.thumb_url!==o.imagem_url&&l.push(o.thumb_url),o.imagens_urls?.length&&o.imagens_urls.forEach(p=>{l.includes(p)||l.push(p)}),o.thumbs_urls?.length&&o.thumbs_urls.forEach(p=>{l.includes(p)||l.push(p)}),o.variacoes?.length&&o.variacoes.forEach(p=>{p.imagem_url&&!l.includes(p.imagem_url)&&l.push(p.imagem_url),p.thumb_url&&!l.includes(p.thumb_url)&&l.push(p.thumb_url)}),await $e(l),await ge(V(q,"produtos",o.id)),await E.invalidateQueries({queryKey:["admin-products"]}),await U()}catch(l){console.error("Erro ao deletar produto:",l),alert("Erro ao deletar produto")}finally{P(null)}}},I=o=>{k(o)},_=()=>{k(null),E.invalidateQueries({queryKey:["admin-products"]}),U()};return D&&!N.length?e.jsx("div",{className:"text-center py-8",children:"Carregando produtos..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-title font-bold",children:["Produtos Cadastrados ",A&&e.jsx("span",{className:"text-sm text-gray-400",children:"(atualizando…)"})]}),e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx("input",{type:"text",value:g,onChange:o=>T(o.target.value),placeholder:"Buscar por nome ou SKU...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:outline-none text-sm"}),e.jsx(Ie,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18})]})]})}),e.jsx("div",{className:"max-h-[600px] overflow-auto divide-y",children:u.map(o=>{const l=o.thumb_url||o.imagem_url||o.imagens_urls?.[0],p=l?he(l,"thumbnail"):"";return e.jsxs("div",{className:"flex items-center gap-4 px-4 py-2 hover:bg-gray-50",children:[p?e.jsx("img",{src:p,alt:o.nome??"Produto",className:"w-16 h-16 object-contain rounded bg-gray-50"}):e.jsx("div",{className:"w-16 h-16 flex items-center justify-center bg-gray-100 rounded",children:e.jsx("span",{className:"text-xs text-gray-400",children:"Sem img"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:o.nome}),e.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",o.id]}),e.jsx("div",{className:"flex gap-2 mt-1 flex-wrap",children:o.categorias?.map(f=>e.jsx("span",{className:"text-xs bg-gray-200 px-2 py-1 rounded",children:f},f))}),o.variacoes&&o.variacoes.length>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[o.variacoes.length," variações de cor"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>I(o),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Editar",disabled:j===o.id,children:e.jsx(_e,{size:18})}),e.jsx("button",{onClick:()=>v(o),className:"p-2 text-red-600 hover:bg-red-50 rounded disabled:opacity-50",title:"Excluir",disabled:j===o.id,children:j===o.id?e.jsx("div",{className:"w-[18px] h-[18px] border-2 border-red-600 border-t-transparent rounded-full animate-spin"}):e.jsx(de,{size:18})})]})]},o.id)})}),e.jsxs("div",{className:"p-4 border-t border-gray-200 flex justify-between items-center",children:[e.jsxs("button",{onClick:()=>r(o=>Math.max(0,o-1)),disabled:a===0,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg disabled:opacity-50 hover:bg-gray-200",children:[e.jsx(ke,{size:18}),"Anterior"]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Página ",a+1]}),e.jsxs("button",{onClick:()=>r(o=>o+1),disabled:N.length<S,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg disabled:opacity-50 hover:bg-gray-200",children:["Próximo",e.jsx(Se,{size:18})]})]})]}),x&&e.jsx(Qe,{product:x,onClose:_})]})}function Ye(){const[a,r]=n.useState(""),[c,C]=n.useState(!1),[x,k]=n.useState(null),[j,P]=n.useState(""),[g,T]=n.useState(!1),{data:S=[],refetch:E}=me(),d=u=>{const v=u.target.files?.[0];v&&(k(v),P(URL.createObjectURL(v)))},N=async u=>{u.preventDefault(),T(!0);try{const v=a.toLowerCase().replace(/\s+/g,"-");let I="";x&&(I=await J(x,{folder:"categorias",productId:v,type:"category"})),await Y(V(q,"categorias",v),{id:v,nome:a,productCount:0,popular:c,imagePath:I}),r(""),C(!1),k(null),P(""),E()}catch(v){console.error(v),alert("Erro ao criar categoria")}finally{T(!1)}},D=async u=>{if(confirm("Tem certeza? Esta ação não pode ser desfeita."))try{u.imagePath&&await X(u.imagePath),await ge(V(q,"categorias",u.id)),E()}catch(v){console.error(v),alert("Erro ao excluir categoria")}},U=async u=>{try{await le(V(q,"categorias",u.id),{popular:!u.popular}),E()}catch(v){console.error(v),alert("Não foi possível atualizar popular")}},A=async(u,v)=>{try{const I=await J(v,{folder:"categorias",productId:u.id,type:"category"});u.imagePath&&await X(u.imagePath),await le(V(q,"categorias",u.id),{imagePath:I}),E()}catch(I){console.error(I),alert("Não foi possível atualizar a imagem")}};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-title font-bold mb-6",children:"Gerenciar Categorias"}),e.jsxs("form",{onSubmit:N,className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Nome da categoria"}),e.jsx("input",{type:"text",value:a,onChange:u=>r(u.target.value),placeholder:"Nome da categoria",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Imagem da categoria"}),j?e.jsxs("div",{className:"relative w-full h-24",children:[e.jsx("img",{src:j,alt:"Preview",className:"w-full h-full object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>{k(null),P("")},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1",children:e.jsx(H,{size:14})})]}):e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx(G,{size:16}),e.jsx("span",{className:"text-sm",children:"Selecionar imagem"}),e.jsx("input",{type:"file",accept:"image/*",onChange:d,className:"hidden"})]})]})]}),e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:u=>C(u.target.checked),className:"w-4 h-4 rounded"}),e.jsx("span",{className:"text-sm font-semibold",children:"Marcar como categoria popular"})]}),e.jsx("button",{type:"submit",disabled:g,className:"w-full bg-primary hover:opacity-90 text-text-primary font-semibold px-6 py-3 rounded-lg disabled:opacity-50",children:g?"Criando...":"Criar Categoria"})]}),e.jsx("div",{className:"space-y-2",children:S.map(u=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[u.imagePath&&e.jsx("img",{src:he(u.imagePath,"thumbnail"),alt:u.nome,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:u.nome}),e.jsxs("p",{className:"text-sm text-gray-500",children:[u.productCount||0," produtos"]}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-3",children:[e.jsx("button",{onClick:()=>void U(u),className:`px-3 py-1 rounded border text-sm ${u.popular?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300"}`,children:u.popular?"Popular ✓":"Marcar como popular"}),e.jsxs("label",{className:"flex items-center gap-2 px-3 py-1 bg-white border border-gray-300 rounded cursor-pointer hover:bg-gray-50",children:[e.jsx(G,{size:14}),e.jsx("span",{className:"text-xs",children:"Alterar imagem"}),e.jsx("input",{type:"file",accept:"image/*",onChange:v=>{const I=v.target.files?.[0];I&&A(u,I)},className:"hidden"})]})]})]})]}),e.jsx("button",{onClick:()=>void D(u),className:"p-2 text-red-600 hover:bg-red-50 rounded",children:e.jsx(de,{size:18})})]},u.id))})]})}function Xe(){const[a,r]=n.useState(!1),[c,C]=n.useState(""),[x,k]=n.useState({companyName:"Rocha Brindes",description:"",address:"",phone:"",email:"",copyright:"© 2024 Rocha Brindes. Todos os direitos reservados.",instagramUrl:"",facebookUrl:"",linkedinUrl:"",youtubeUrl:"",navigation:{title:"Navegação",links:[{label:"Início",url:"/"},{label:"Catálogo",url:"/catalogo"}]}});n.useEffect(()=>{(async()=>{try{const N=await te(V(q,"config","footer"));N.exists()&&k(D=>({...D,...N.data()}))}catch(N){console.error("Erro carregar footer:",N)}})()},[]);const j=(d,N)=>{k({...x,[d]:N})},P=d=>{k({...x,navigation:{...x.navigation,title:d}})},g=(d,N,D)=>{const U=[...x.navigation.links];U[d]={...U[d],[N]:D},k({...x,navigation:{...x.navigation,links:U}})},T=()=>{k({...x,navigation:{...x.navigation,links:[...x.navigation.links,{label:"",url:""}]}})},S=d=>{k({...x,navigation:{...x.navigation,links:x.navigation.links.filter((N,D)=>D!==d)}})},E=async()=>{r(!0),C("");try{await Y(V(q,"config","footer"),x),C("✅ Rodapé atualizado!"),setTimeout(()=>C(""),3e3)}catch{C("❌ Erro ao salvar.")}finally{r(!1)}};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-50 p-2 rounded-lg text-blue-600",children:e.jsx(Te,{size:24})}),e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Configurar Rodapé"})]}),c&&e.jsx("span",{className:`px-3 py-1 rounded-md text-sm font-bold ${c.includes("✅")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:c})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(ye,{size:18,className:"text-primary"}),"Informações da Empresa"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Nome da Empresa"}),e.jsx("input",{type:"text",value:x.companyName,onChange:d=>j("companyName",d.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Rocha Brindes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Descrição"}),e.jsx("textarea",{value:x.description,onChange:d=>j("description",d.target.value),rows:3,className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Transformando ideias em brindes únicos..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Copyright"}),e.jsx("input",{type:"text",value:x.copyright,onChange:d=>j("copyright",d.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"© 2024 Rocha Brindes"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(ne,{size:18,className:"text-primary"}),"Informações de Contato"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(Ee,{size:14})," Endereço"]}),e.jsx("textarea",{value:x.address,onChange:d=>j("address",d.target.value),rows:2,className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Rua Example, 123 - Centro"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(ne,{size:14})," Telefone"]}),e.jsx("input",{type:"text",value:x.phone,onChange:d=>j("phone",d.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"(00) 0000-0000"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(ze,{size:14})," Email"]}),e.jsx("input",{type:"email",value:x.email,onChange:d=>j("email",d.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"contato@rochabrindes.com"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(De,{size:18,className:"text-primary"}),"Redes Sociais"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Instagram"}),e.jsx("input",{type:"url",value:x.instagramUrl,onChange:d=>j("instagramUrl",d.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"https://instagram.com/rochabrindes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Facebook"}),e.jsx("input",{type:"url",value:x.facebookUrl,onChange:d=>j("facebookUrl",d.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"https://facebook.com/rochabrindes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"LinkedIn"}),e.jsx("input",{type:"url",value:x.linkedinUrl,onChange:d=>j("linkedinUrl",d.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"https://linkedin.com/company/rochabrindes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"YouTube"}),e.jsx("input",{type:"url",value:x.youtubeUrl,onChange:d=>j("youtubeUrl",d.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"https://youtube.com/@rochabrindes"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Links de Navegação"}),e.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:opacity-90 text-sm font-semibold",children:[e.jsx(be,{size:16}),"Adicionar Link"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Título da Seção"}),e.jsx("input",{type:"text",value:x.navigation.title,onChange:d=>P(d.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Navegação"})]}),e.jsx("div",{className:"space-y-3",children:x.navigation.links.map((d,N)=>e.jsxs("div",{className:"flex gap-3 items-start p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1 grid md:grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",value:d.label,onChange:D=>g(N,"label",D.target.value),className:"w-full p-2 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Texto do Link"}),e.jsx("input",{type:"text",value:d.url,onChange:D=>g(N,"url",D.target.value),className:"w-full p-2 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"/caminho ou https://..."})]}),e.jsx("button",{onClick:()=>S(N),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(H,{size:20})})]},N))})]}),e.jsx("div",{className:"pt-4 border-t border-gray-100 flex justify-end",children:e.jsxs("button",{onClick:E,disabled:a,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-bold transition-all disabled:opacity-50",children:[a?e.jsx(Ae,{className:"animate-spin",size:18}):e.jsx(fe,{size:18}),"Salvar Rodapé"]})})]})}function Ze(){const[a,r]=n.useState({}),[c,C]=n.useState(!1),[x,k]=n.useState(null),[j,P]=n.useState(""),[g,T]=n.useState(""),[S,E]=n.useState(""),[d,N]=n.useState("");n.useEffect(()=>{D(),U()},[]);const D=async()=>{try{const l=await te(V(q,"config","layout"));if(l.exists()){const p=l.data();r(p),T(p.companyInfo?.title||""),E(p.companyInfo?.description||""),p.whatsapp&&N(p.whatsapp)}}catch(l){console.error("Erro ao carregar assets:",l),P("Erro ao carregar configurações")}},U=async()=>{try{const l=await te(V(q,"config","general"));if(l.exists()){const p=l.data();p.whatsappNumber&&!d&&N(p.whatsappNumber)}}catch(l){console.error("Erro ao carregar WhatsApp:",l)}},A=async l=>{await Y(V(q,"config","layout"),l,{merge:!0})},u=async l=>{await Y(V(q,"config","general"),{whatsappNumber:l},{merge:!0})},v=(l,p=3e3)=>{P(l),setTimeout(()=>P(""),p)},I=async()=>{try{const l={...a,companyInfo:S?{title:g,description:S}:void 0,whatsapp:d||void 0};await A(l),d&&await u(d),r(l),v("Informações salvas com sucesso!")}catch(l){console.error(l),v("Erro ao salvar informações")}},_=async l=>{C(!0),k("logo");try{const p=await J(l,{folder:"layout",type:"logo"});a.logo&&await X(a.logo);const f={...a,logo:p};await A(f),r(f),v("Logo atualizado com sucesso!")}catch(p){console.error(p),v("Erro ao fazer upload do logo")}finally{C(!1),k(null)}},o=async()=>{if(a.logo)try{await X(a.logo);const l={...a,logo:void 0};await A(l),r(l),v("Logo removido com sucesso!")}catch(l){console.error(l),v("Erro ao remover logo")}};return e.jsxs("div",{className:"space-y-8",children:[j&&e.jsx("div",{className:`p-4 rounded-xl text-center font-semibold shadow-md animate-fade-in ${j.includes("sucesso")?"bg-green-50 text-green-700 border-2 border-green-200":"bg-red-50 text-red-700 border-2 border-red-200"}`,children:j}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(Le,{size:20,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-title font-bold text-gray-800",children:"Logo Principal"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Logotipo exibido no cabeçalho"})]})]}),a.logo?e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"w-64 h-32 border-2 border-gray-200 rounded-xl p-4 group hover:border-primary transition-colors bg-gray-50",children:e.jsx("img",{src:re(a.logo,"thumbnail"),alt:"Logo",className:"w-full h-full object-contain"})}),e.jsx("button",{onClick:()=>void o(),className:"absolute -top-3 -right-3 bg-red-500 hover:bg-red-600 text-white rounded-full p-2 shadow-lg transition-all transform hover:scale-110",title:"Remover logo",children:e.jsx(H,{size:18})})]}):e.jsxs("label",{className:"group relative inline-flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-primary/10 to-primary/5 border-2 border-dashed border-primary/30 rounded-xl cursor-pointer hover:border-primary hover:from-primary/20 hover:to-primary/10 transition-all",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-white rounded-lg shadow-sm group-hover:shadow-md transition-shadow",children:x==="logo"?e.jsx(ee,{size:20,className:"animate-spin text-primary"}):e.jsx(G,{size:20,className:"text-primary"})}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Adicionar Logo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:l=>{const p=l.target.files?.[0];p&&_(p)},className:"hidden",disabled:c})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Re,{size:20,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-title font-bold text-gray-800",children:"Configurações"}),e.jsx("p",{className:"text-sm text-gray-500",children:"WhatsApp e outros"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(ne,{size:16}),"WhatsApp"]}),e.jsx("input",{type:"text",value:d,onChange:l=>N(l.target.value),placeholder:"Ex: 5589994333316",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none transition-colors"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Apenas números com DDI e DDD"})]})]})]}),e.jsx(Xe,{}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>void I(),className:"px-8 py-3 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:"Salvar Configurações"})})]})}const Q={hero:{title:"Brindes que Impressionam",subtitle:"Transforme sua marca em experiências memoráveis",ctaText:"Explorar Catálogo"},infoSections:[{title:"Qualidade Garantida",description:"Trabalhamos apenas com fornecedores certificados e produtos de alta qualidade para garantir a satisfação dos nossos clientes.",imagePosition:"right",features:["Produtos certificados e testados","Garantia de qualidade em todos os itens","Entrega rápida e segura"]},{title:"Personalização Completa",description:"Oferecemos personalização completa para que sua marca se destaque. Do design à produção, cuidamos de cada detalhe.",imagePosition:"left",features:["Design exclusivo para sua marca","Múltiplas opções de personalização","Equipe especializada em branding"]},{title:"Atendimento Especializado",description:"Nossa equipe está pronta para ajudar você em cada etapa do processo, desde a escolha do produto até a entrega final.",imagePosition:"right",features:["Consultoria gratuita","Suporte em todo o processo","Pós-venda diferenciado"]}],videos:[],featuredProductIds:[],stats:{products:{value:"500+",label:"Produtos Disponíveis"},clients:{value:"1000+",label:"Clientes Satisfeitos"},years:{value:"15+",label:"Anos de Experiência"}},cta:{title:"Pronto para Começar?",description:"Solicite um orçamento personalizado e descubra como podemos ajudar sua marca",buttonText:"Ver Catálogo Completo"}};function es(){const[a,r]=n.useState(Q),[c,C]=n.useState(!1),[x,k]=n.useState(null),[j,P]=n.useState(""),[g,T]=n.useState([]),[S,E]=n.useState([]),[d,N]=n.useState(!0),[D,U]=n.useState(!0);n.useEffect(()=>{A(),u()},[]);const A=async()=>{U(!0);try{const t=await te(V(q,"config","landing"));if(t.exists()){const s=t.data();r({hero:s.hero||Q.hero,infoSections:s.infoSections||Q.infoSections,videos:s.videos||[],featuredProductIds:s.featuredProductIds||[],stats:{products:s.stats?.products||Q.stats.products,clients:s.stats?.clients||Q.stats.clients,years:s.stats?.years||Q.stats.years},cta:s.cta||Q.cta}),E(s.featuredProductIds||[])}}catch(t){console.error("Erro ao carregar landing:",t),I("❌ Erro ao carregar dados")}finally{U(!1)}},u=async()=>{N(!0);try{const t=se(Z(q,"produtos"),ae("createdAt","desc"),ie(100)),b=(await ce(t)).docs.map(m=>({id:m.id,...m.data()}));T(b)}catch(t){console.error("Erro ao carregar produtos:",t),I("❌ Erro ao carregar produtos")}finally{N(!1)}},v=async()=>{C(!0);try{await Y(V(q,"config","landing"),{...a,featuredProductIds:S}),I("✅ Landing page atualizada!")}catch(t){I("❌ Erro ao salvar"),console.error(t)}finally{C(!1)}},I=t=>{P(t),setTimeout(()=>P(""),3e3)},_=t=>{E(s=>s.includes(t)?s.filter(b=>b!==t):s.length>=10?s:[...s,t])},o=async(t,s,b,m)=>{k("video");try{const L={url:t,title:b,description:m};s&&s.trim()&&(L.thumbnail=s),r(i=>({...i,videos:[...i.videos,L]})),I("✅ Vídeo adicionado!")}catch(L){console.error("Erro ao adicionar vídeo:",L),I("❌ Erro ao adicionar")}finally{k(null)}},l=t=>{r(s=>({...s,videos:s.videos.filter((b,m)=>m!==t)})),I("✅ Vídeo removido!")},p=()=>{const t={title:"Nova Seção",description:"Descrição da seção",imagePosition:"right",features:["Item 1","Item 2","Item 3"]};r(s=>({...s,infoSections:[...s.infoSections||[],t]})),I("✅ Seção adicionada!")},f=t=>{r(s=>({...s,infoSections:s.infoSections?.filter((b,m)=>m!==t)})),I("✅ Seção removida!")},w=(t,s,b)=>{r(m=>({...m,infoSections:m.infoSections?.map((L,i)=>i===t?{...L,[s]:b}:L)}))},B=t=>{r(s=>({...s,infoSections:s.infoSections?.map((b,m)=>m===t?{...b,features:[...b.features||[],"Novo item"]}:b)}))},$=(t,s)=>{r(b=>({...b,infoSections:b.infoSections?.map((m,L)=>L===t?{...m,features:m.features?.filter((i,h)=>h!==s)}:m)}))},y=(t,s,b)=>{r(m=>({...m,infoSections:m.infoSections?.map((L,i)=>i===t?{...L,features:L.features?.map((h,R)=>R===s?b:h)}:L)}))},z=(t,s)=>{if(!a.infoSections)return;const b=s==="up"?t-1:t+1;if(b<0||b>=a.infoSections.length)return;const m=[...a.infoSections],L=m[t];m[t]=m[b],m[b]=L,r(i=>({...i,infoSections:m}))};return D?e.jsxs("div",{className:"flex items-center justify-center py-20",children:[e.jsx(ee,{className:"animate-spin text-primary",size:48}),e.jsx("span",{className:"ml-4 text-xl text-gray-600",children:"Carregando..."})]}):e.jsxs("div",{className:"space-y-8",children:[j&&e.jsx("div",{className:`p-4 rounded-xl text-center font-semibold ${j.includes("✅")?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:j}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/10 rounded-lg flex items-center justify-center",children:e.jsx(qe,{size:20,className:"text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Seção Hero (Principal)"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Primeira impressão do site"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Título Principal"}),e.jsx("input",{type:"text",value:a.hero?.title||"",onChange:t=>r(s=>({...s,hero:{...s.hero,title:t.target.value}})),className:"w-full px-4 py-3 border-2 rounded-xl focus:border-primary outline-none",placeholder:"Ex: Brindes que Impressionam"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Subtítulo"}),e.jsx("input",{type:"text",value:a.hero?.subtitle||"",onChange:t=>r(s=>({...s,hero:{...s.hero,subtitle:t.target.value}})),className:"w-full px-4 py-3 border-2 rounded-xl focus:border-primary outline-none",placeholder:"Ex: Transforme sua marca em experiências memoráveis"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Texto do Botão Principal"}),e.jsx("input",{type:"text",value:a.hero?.ctaText||"",onChange:t=>r(s=>({...s,hero:{...s.hero,ctaText:t.target.value}})),className:"w-full px-4 py-3 border-2 rounded-xl focus:border-primary outline-none",placeholder:"Ex: Explorar Catálogo"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-500/10 rounded-lg flex items-center justify-center",children:e.jsx(ue,{size:20,className:"text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Seções de Informação"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Blocos informativos ao longo da página"})]})]}),e.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600",children:[e.jsx(be,{size:18}),"Adicionar Seção"]})]}),a.infoSections&&a.infoSections.length>0?e.jsx("div",{className:"space-y-6",children:a.infoSections.map((t,s)=>e.jsxs("div",{className:"border-2 rounded-xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-bold text-lg",children:["Seção ",s+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s>0&&e.jsx("button",{onClick:()=>z(s,"up"),className:"p-2 hover:bg-gray-100 rounded-lg",title:"Mover para cima",children:e.jsx(Me,{size:18})}),s<a.infoSections.length-1&&e.jsx("button",{onClick:()=>z(s,"down"),className:"p-2 hover:bg-gray-100 rounded-lg",title:"Mover para baixo",children:e.jsx(Ue,{size:18})}),e.jsx("button",{onClick:()=>f(s),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:e.jsx(de,{size:18})})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Título"}),e.jsx("input",{type:"text",value:t.title,onChange:b=>w(s,"title",b.target.value),className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",placeholder:"Título da seção"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Posição da Imagem"}),e.jsxs("select",{value:t.imagePosition||"right",onChange:b=>w(s,"imagePosition",b.target.value),className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",children:[e.jsx("option",{value:"left",children:"Esquerda"}),e.jsx("option",{value:"right",children:"Direita"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Descrição"}),e.jsx("textarea",{value:t.description,onChange:b=>w(s,"description",b.target.value),rows:3,className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none resize-none",placeholder:"Descrição detalhada da seção"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"URL da Imagem (opcional)"}),e.jsx("input",{type:"url",value:t.imageUrl||"",onChange:b=>w(s,"imageUrl",b.target.value),className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",placeholder:"https://exemplo.com/imagem.jpg"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-semibold",children:"Itens em Destaque"}),e.jsx("button",{onClick:()=>B(s),className:"text-sm text-primary hover:underline",children:"+ Adicionar Item"})]}),e.jsx("div",{className:"space-y-2",children:t.features?.map((b,m)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:b,onChange:L=>y(s,m,L.target.value),className:"flex-1 px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",placeholder:`Item ${m+1}`}),e.jsx("button",{onClick:()=>$(s,m),className:"px-3 text-red-500 hover:bg-red-50 rounded-lg",children:e.jsx(H,{size:18})})]},m))})]})]},s))}):e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl",children:[e.jsx(ue,{className:"mx-auto text-gray-400 mb-3",size:48}),e.jsx("p",{className:"text-gray-600 font-semibold",children:"Nenhuma seção adicionada"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:'Clique em "Adicionar Seção" para começar'})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500/10 rounded-lg flex items-center justify-center",children:e.jsx(oe,{size:20,className:"text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Produtos em Destaque"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Selecione até 10 produtos para o carrossel"})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm font-semibold text-gray-700",children:["Selecionados: ",e.jsx("span",{className:"text-primary",children:S.length}),"/10"]})}),d?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(ee,{className:"animate-spin text-primary",size:32}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando produtos..."})]}):g.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl",children:[e.jsx(oe,{className:"mx-auto text-gray-400 mb-3",size:48}),e.jsx("p",{className:"text-gray-600 font-semibold",children:"Nenhum produto cadastrado"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Cadastre produtos primeiro na aba Produtos"})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 max-h-[600px] overflow-y-auto p-2",children:g.map(t=>{const s=S.includes(t.id),b=t.thumb_url||t.imagem_url||t.variacoes?.[0]?.thumb_url,m=b?re(b,"thumbnail"):"";return e.jsxs("button",{onClick:()=>_(t.id),disabled:!s&&S.length>=10,className:`relative group border-2 rounded-xl overflow-hidden transition-all ${s?"border-primary ring-2 ring-primary/20":"border-gray-200 hover:border-gray-300"} ${!s&&S.length>=10?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("div",{className:"aspect-square bg-gray-100",children:m?e.jsx("img",{src:m,alt:t.nome,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(oe,{size:24,className:"text-gray-400"})})}),e.jsxs("div",{className:"p-2 bg-white",children:[e.jsx("p",{className:"text-xs font-semibold line-clamp-2 text-left",children:t.nome}),e.jsxs("p",{className:"text-[10px] text-gray-500 text-left mt-1",children:["SKU: ",t.id]})]}),s&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute top-2 right-2 bg-primary text-white rounded-full p-1.5 shadow-lg",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("div",{className:"absolute top-2 left-2 bg-white text-primary rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold shadow-lg",children:S.indexOf(t.id)+1})]})]},t.id)})}),S.length>=10&&e.jsx("p",{className:"text-sm text-orange-600 mt-4 text-center font-semibold",children:"Limite máximo de produtos atingido"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Pe,{size:20,className:"text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Estatísticas"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Números da empresa"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Produtos - Valor"}),e.jsx("input",{type:"text",value:a.stats?.products?.value||"",onChange:t=>r(s=>({...s,stats:{...s.stats,products:{...s.stats.products,value:t.target.value}}})),className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",placeholder:"500+"}),e.jsx("label",{className:"block text-sm font-semibold mb-2 mt-2",children:"Produtos - Texto"}),e.jsx("input",{type:"text",value:a.stats?.products?.label||"",onChange:t=>r(s=>({...s,stats:{...s.stats,products:{...s.stats.products,label:t.target.value}}})),className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",placeholder:"Produtos Disponíveis"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Clientes - Valor"}),e.jsx("input",{type:"text",value:a.stats?.clients?.value||"",onChange:t=>r(s=>({...s,stats:{...s.stats,clients:{...s.stats.clients,value:t.target.value}}})),className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",placeholder:"1000+"}),e.jsx("label",{className:"block text-sm font-semibold mb-2 mt-2",children:"Clientes - Texto"}),e.jsx("input",{type:"text",value:a.stats?.clients?.label||"",onChange:t=>r(s=>({...s,stats:{...s.stats,clients:{...s.stats.clients,label:t.target.value}}})),className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",placeholder:"Clientes Satisfeitos"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Experiência - Valor"}),e.jsx("input",{type:"text",value:a.stats?.years?.value||"",onChange:t=>r(s=>({...s,stats:{...s.stats,years:{...s.stats.years,value:t.target.value}}})),className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",placeholder:"15+"}),e.jsx("label",{className:"block text-sm font-semibold mb-2 mt-2",children:"Experiência - Texto"}),e.jsx("input",{type:"text",value:a.stats?.years?.label||"",onChange:t=>r(s=>({...s,stats:{...s.stats,years:{...s.stats.years,label:t.target.value}}})),className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",placeholder:"Anos de Experiência"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Oe,{size:20,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Vídeos de Produção"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Exibidos abaixo das estatísticas"})]})]}),e.jsx(ss,{onSubmit:o,loading:x==="video"}),a.videos.length>0&&e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4 mt-6",children:a.videos.map((t,s)=>e.jsxs("div",{className:"border-2 rounded-xl overflow-hidden group",children:[e.jsx("div",{className:"relative aspect-video bg-gray-900",children:e.jsx("video",{src:t.url,className:"w-full h-full object-cover",muted:!0})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-bold mb-1",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:t.description}),e.jsx("button",{onClick:()=>l(s),className:"text-red-500 text-sm hover:underline",children:"Remover"})]})]},s))})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-pink-500/10 rounded-lg flex items-center justify-center",children:e.jsx(ye,{size:20,className:"text-pink-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Call to Action Final"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Seção de conversão no final da página"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Título"}),e.jsx("input",{type:"text",value:a.cta.title,onChange:t=>r(s=>({...s,cta:{...s.cta,title:t.target.value}})),className:"w-full px-4 py-3 border-2 rounded-xl focus:border-primary outline-none",placeholder:"Pronto para Começar?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Descrição"}),e.jsx("textarea",{value:a.cta.description,onChange:t=>r(s=>({...s,cta:{...s.cta,description:t.target.value}})),rows:3,className:"w-full px-4 py-3 border-2 rounded-xl focus:border-primary outline-none resize-none",placeholder:"Solicite um orçamento personalizado..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Texto do Botão"}),e.jsx("input",{type:"text",value:a.cta.buttonText,onChange:t=>r(s=>({...s,cta:{...s.cta,buttonText:t.target.value}})),className:"w-full px-4 py-3 border-2 rounded-xl focus:border-primary outline-none",placeholder:"Ver Catálogo Completo"})]})]})]}),e.jsxs("button",{onClick:v,disabled:c,className:"w-full flex items-center justify-center gap-3 bg-primary text-white py-4 rounded-xl font-bold hover:opacity-90 disabled:opacity-50",children:[c?e.jsx(ee,{className:"animate-spin",size:20}):e.jsx(fe,{size:20}),"Salvar Landing Page"]})]})}function ss({onSubmit:a,loading:r}){const[c,C]=n.useState(""),[x,k]=n.useState(""),[j,P]=n.useState(""),[g,T]=n.useState(""),S=()=>{c&&j&&g&&(a(c,x,j,g),C(""),k(""),P(""),T(""))};return e.jsxs("div",{className:"border-2 border-dashed rounded-xl p-6 space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Título"}),e.jsx("input",{type:"text",value:j,onChange:E=>P(E.target.value),className:"w-full px-4 py-2 border-2 rounded-lg outline-none focus:border-primary",placeholder:"Ex: Processo de Personalização"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Descrição"}),e.jsx("input",{type:"text",value:g,onChange:E=>T(E.target.value),className:"w-full px-4 py-2 border-2 rounded-lg outline-none focus:border-primary",placeholder:"Breve descrição do vídeo"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"URL do Vídeo"}),e.jsx("input",{type:"url",value:c,onChange:E=>C(E.target.value),className:"w-full px-4 py-2 border-2 rounded-lg outline-none focus:border-primary",placeholder:"https://seusite.com/videos/video-producao.mp4"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cole a URL completa do vídeo hospedado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"URL da Thumbnail (opcional)"}),e.jsx("input",{type:"url",value:x,onChange:E=>k(E.target.value),className:"w-full px-4 py-2 border-2 rounded-lg outline-none focus:border-primary",placeholder:"https://seusite.com/videos/thumb-producao.jpg"})]})]}),e.jsx("button",{onClick:S,disabled:!c||!j||!g||r,className:"w-full bg-primary text-white py-3 rounded-lg font-semibold disabled:opacity-50",children:r?"Adicionando...":"Adicionar Vídeo"})]})}function ms(){const[a,r]=n.useState("products"),c=async()=>{await we(Ce)};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-title font-bold",children:"Painel Admin"}),e.jsx("button",{onClick:c,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg",children:"Sair"})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex gap-4 mb-6 overflow-x-auto",children:[e.jsx("button",{onClick:()=>r("products"),className:`px-6 py-2 rounded-lg font-semibold transition-all whitespace-nowrap ${a==="products"?"bg-primary text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"Produtos"}),e.jsx("button",{onClick:()=>r("categories"),className:`px-6 py-2 rounded-lg font-semibold transition-all whitespace-nowrap ${a==="categories"?"bg-primary text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"Categorias"}),e.jsx("button",{onClick:()=>r("landing"),className:`px-6 py-2 rounded-lg font-semibold transition-all whitespace-nowrap ${a==="landing"?"bg-primary text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"Página Inicial"}),e.jsx("button",{onClick:()=>r("config"),className:`px-6 py-2 rounded-lg font-semibold transition-all whitespace-nowrap ${a==="config"?"bg-primary text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"Configurações"})]}),a==="products"&&e.jsxs("div",{className:"space-y-8",children:[e.jsx(He,{}),e.jsx(Je,{})]}),a==="categories"&&e.jsx(Ye,{}),a==="landing"&&e.jsx(es,{}),a==="config"&&e.jsx(Ze,{})]})]})}export{ms as default};
