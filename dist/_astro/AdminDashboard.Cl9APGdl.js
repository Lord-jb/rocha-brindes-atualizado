import{q as Z,e as ee,f as Y,b as U,c as oe,j as e,s as X,d as O,h as xe,u as ae,i as he,l as te,k as pe,m as ce,g as re,n as fe,a as be}from"./Providers.DSdMb4Z2.js";import{r as i}from"./index.y5FlbPQu.js";import{c as K,u as de,o as me,C as ye,a as je}from"./chevron-right.BQH1nt45.js";import{X as Q}from"./x.Dn29-G3J.js";import{S as ve}from"./search.C63jIeQO.js";import{T as ue}from"./trash-2.CaiQsfJl.js";import{P as Ne}from"./phone.D-NBCNhh.js";import{P as ie}from"./package.DPbreus8.js";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=K("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=K("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=K("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=K("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=K("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=K("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=K("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=K("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);function le(){return de({queryKey:["categories"],queryFn:async()=>{const s=Z(Y(U,"categorias"),ee("nome"));return(await oe(s)).docs.map(l=>({id:l.id,...l.data()}))},staleTime:300*1e3,refetchOnMount:!0,refetchOnWindowFocus:!1})}const Pe="iem94FVEkj3Qjv3DsJXpbQ";async function H(s,o){const l=s.name.split(".").pop()?.toLowerCase()||"jpg";let y="";if(o.type==="main"&&o.productId)y=`${o.productId}.${l}`;else if(o.type==="variation"&&o.productId&&o.variation){const I=o.variation.toLowerCase().replace(/\s+/g,"-");y=`${o.productId}-${I}.${l}`}else y=s.name;const P=new File([s],y,{type:s.type}),v=new FormData;v.append("file",P),v.append("metadata",JSON.stringify({folder:o.folder,productId:o.productId,variation:o.variation,type:o.type,filename:y,uploadDate:new Date().toISOString()}));const N=await fetch("https://imagens.bjeslee19.workers.dev/",{method:"POST",body:v}),C=await N.text();let u;try{u=JSON.parse(C)}catch{u=C}if(!N.ok)throw console.error("Upload error RAW:",u),new Error(typeof u=="string"?u:JSON.stringify(u));if(!u||!u.imageId)throw console.error("Upload OK mas sem imageId:",u),new Error("ID da imagem não retornado pelo servidor");return u.imageId}function se(s,o="public"){return s?s.startsWith("http://")||s.startsWith("https://")||s.startsWith("blob:")||s.startsWith("data:")?s:`https://imagedelivery.net/${Pe}/${s}/${o}`:""}async function J(s){if(s&&!(s.startsWith("http://")||s.startsWith("https://"))&&!(s.startsWith("blob:")||s.startsWith("data:")))try{const o=await fetch("https://imagens.bjeslee19.workers.dev/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageId:s})});if(!o.ok){const l=await o.text();console.error(`Erro ao deletar imagem ${s}:`,l)}}catch(o){console.error(`Erro ao deletar imagem ${s}:`,o)}}async function ze(s){const o=s.filter(l=>l&&!l.startsWith("http")&&!l.startsWith("blob:")&&!l.startsWith("data:"));if(o.length!==0)try{const l=await fetch("https://imagens.bjeslee19.workers.dev/delete-multiple",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageIds:o})});if(!l.ok){const y=await l.text();console.error("Erro ao deletar múltiplas imagens:",y)}}catch(l){console.error("Erro ao deletar múltiplas imagens:",l)}}const De="1t7T-5mU4ET0kjqd8x_sXlEwunwogCBrlqFnYpVaoyvE",Ae="AIzaSyAWUmt2UDeXxY1my2ajGU5bAMSjuU0L14o",Le="produtos!A:Z";function ne(s){return s.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toUpperCase().trim()}function _e(s,o){if(!s||!o)return s;const l=new RegExp(`\\s+${o}$`,"i");return s.replace(l,"").trim()}async function Ue(s){const o=s.trim();if(!o)return null;const l=o.split("_"),y=l.length>2?l.slice(0,l.length-1).join("_"):o,P=`https://sheets.googleapis.com/v4/spreadsheets/${De}/values/${encodeURIComponent(Le)}?key=${Ae}`,v=await fetch(P);if(!v.ok)throw console.error("Erro ao buscar planilha:",await v.text()),new Error("Não foi possível acessar a planilha do Google Sheets");const C=(await v.json()).values||[];if(!C.length)return null;const[u,...I]=C;console.log("Header da planilha:",u),console.log("Primeira linha de dados:",I[0]);const f=x=>ne(x||""),j=u.findIndex(x=>{const b=f(x);return["ID","CODIGO","CÓDIGO","SKU","COD","CODE"].includes(b)}),A=u.findIndex(x=>{const b=f(x);return["NOME","PRODUTO","DESCRICAO_CURTA","NAME"].includes(b)}),z=u.findIndex(x=>{const b=f(x);return["DESCRICAO","DESCRIÇÃO","DESC","DESCRIPTION"].includes(b)}),L=u.findIndex(x=>{const b=f(x);return["COR","CORES","VARIACAO","VARIACOES","VARIAÇÃO","COLOR"].includes(b)}),E=u.findIndex(x=>{const b=f(x);return["CATEGORIA","CATEGORIAS","GRUPO","CATEGORY"].includes(b)}),k=u.findIndex(x=>{const b=f(x);return["DESTAQUE","HIGHLIGHT","FEATURED"].includes(b)});if(j===-1)throw console.error("Colunas disponíveis:",u.map((x,b)=>`${b}: ${x}`)),new Error(`Coluna de código/SKU não encontrada na planilha. Colunas disponíveis: ${u.join(", ")}`);const m=I.filter(x=>{const b=(x[j]||"").trim();return b?b===y||b.startsWith(y+"_"):!1});if(!m.length)return null;let h="",r="";const c=new Set;let a=!1;const t=[];for(const x of m){const b=A>=0?(x[A]||"").trim():"",G=z>=0?(x[z]||"").trim():"",V=L>=0?(x[L]||"").trim():"",p=E>=0?(x[E]||"").trim():"",w=k>=0?(x[k]||"").trim():"";!h&&b&&(h=V?_e(b,V):b),!r&&G&&(r=G),p&&p.split(",").map(S=>S.trim()).filter(Boolean).forEach(S=>c.add(S)),typeof w=="string"&&["SIM","TRUE","1","YES","S"].includes(ne(w))&&(a=!0),V&&!t.find(S=>S.cor===V)&&t.push({cor:V})}const d=Array.from(c);return{baseSku:y,nome:h||y,descricao:r,categorias:d,destaque:a,variacoes:t}}function Re(){const[s,o]=i.useState(""),[l,y]=i.useState(""),[P,v]=i.useState(""),[N,C]=i.useState(!1),[u,I]=i.useState([]),[f,j]=i.useState(!1),[A,z]=i.useState(null),[L,E]=i.useState(""),[k,m]=i.useState([]),[h,r]=i.useState(""),[c,a]=i.useState(""),[t,d]=i.useState(!1),[x,b]=i.useState(""),[G,V]=i.useState(!1),{data:p=[]}=le(),w=n=>{const g=n.target.files?.[0];g&&(z(g),E(URL.createObjectURL(g)))},S=()=>{if(h.trim()){const n=h.trim(),g=[...k,{cor:n,image:null,preview:""}];m(g),c||a(n),r("")}},T=(n,g)=>{const _=[...k];_[n].image=g,_[n].preview=URL.createObjectURL(g),m(_)},B=n=>{const g=k[n]?.cor,_=k.filter((D,q)=>q!==n);m(_),a(D=>D&&D===g?_[0]?.cor??"":D)},R=async()=>{const n=l.trim();if(n){V(!0),b("");try{const g=await Ue(n);if(!g){b("Nenhum produto encontrado na planilha com esse código.");return}if(y(g.baseSku),g.nome&&o(g.nome),g.descricao&&v(g.descricao),g.categorias?.length&&(I(g.categorias),j(!1)),C(g.destaque),g.variacoes?.length){const _=g.variacoes.map(q=>({cor:q.cor,image:null,preview:""}));m(_);const D=g.variacoes.find(q=>q.cor.toLowerCase().includes("preto"));D?a(D.cor):g.variacoes[0]?a(g.variacoes[0].cor):a("")}else m([]),a("");b("Dados preenchidos a partir da planilha ✅")}catch(g){console.error(g),b("Erro ao buscar dados na planilha.")}finally{V(!1)}}},M=async n=>{if(n.preventDefault(),u.length===0){j(!0),b("Selecione pelo menos uma categoria");return}j(!1),d(!0),b("");try{if(!l.trim())throw new Error("Informe um código/SKU");const g=[],_=[];let D=null;const q={};for(const F of k){if(!F.image)continue;const $=await H(F.image,{folder:`produtos/${l}/variacoes`,productId:l,variation:F.cor,type:"variation"});_.push({cor:F.cor,imagem_url:$,thumb_url:$}),g.push($),q[F.cor]=$}if(A)D=await H(A,{folder:`produtos/${l}`,productId:l,type:"main"}),g.unshift(D);else if(c&&q[c])D=q[c];else{const F=Object.keys(q).find($=>$.toLowerCase().includes("preto"));if(F)D=q[F];else{const $=Object.values(q)[0];$&&(D=$)}}if(!D)throw new Error("Envie pelo menos uma imagem (principal ou de alguma variação).");await X(O(Y(U,"produtos"),l),{id:l,nome:s,descricao:P,categorias:u,destaque:N,variacoes:_,imagem_url:D,thumb_url:D,imagens_urls:g,thumbs_urls:g,createdAt:xe()}),b("Produto salvo com sucesso!"),o(""),y(""),v(""),C(!1),I([]),j(!1),z(null),E(""),m([]),r(""),a("")}catch(g){console.error(g),b(g instanceof Error?g.message:"Erro ao salvar produto")}finally{d(!1)}};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-title font-bold mb-6",children:"Adicionar Produto"}),e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Nome"}),e.jsx("input",{type:"text",value:s,onChange:n=>o(n.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"SKU/Código"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:l,onChange:n=>y(n.target.value),onBlur:R,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary",required:!0}),e.jsx("button",{type:"button",onClick:R,disabled:G,className:"px-3 py-2 text-sm rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50",children:G?"Buscando...":"Planilha"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Descrição"}),e.jsx("textarea",{value:P,onChange:n=>v(n.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2",children:["Categorias ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:`flex flex-wrap gap-2 p-3 rounded-lg border-2 ${f?"border-red-300 bg-red-50":"border-gray-200"}`,children:p.map(n=>e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-white rounded-lg cursor-pointer hover:bg-gray-50 border border-gray-200",children:[e.jsx("input",{type:"checkbox",checked:u.includes(n.nome),onChange:g=>{j(!1),g.target.checked?I(_=>[..._,n.nome]):I(_=>_.filter(D=>D!==n.nome))},className:"rounded"}),e.jsx("span",{className:"text-sm",children:n.nome})]},n.id))}),f&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Selecione pelo menos uma categoria"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:N,onChange:n=>C(n.target.checked),className:"rounded"}),e.jsx("span",{className:"text-sm font-semibold",children:"Produto em destaque"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Imagem Principal (opcional)"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:L?e.jsxs("div",{className:"relative aspect-square max-w-xs mx-auto",children:[e.jsx("img",{src:L,alt:"Preview",className:"w-full h-full object-contain"}),e.jsx("button",{type:"button",onClick:()=>{z(null),E("")},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1",children:e.jsx(Q,{size:16})})]}):e.jsxs("label",{className:"flex flex-col items-center gap-2 cursor-pointer",children:[e.jsx(W,{className:"text-gray-400",size:48}),e.jsx("span",{className:"text-sm text-gray-600",children:"Clique para selecionar imagem principal (opcional)"}),e.jsx("input",{type:"file",accept:"image/*",onChange:w,className:"hidden"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Variações de Cor"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",value:h,onChange:n=>r(n.target.value),onKeyDown:n=>{n.key==="Enter"&&(n.preventDefault(),S())},placeholder:"Nome da cor (ex: Vermelho, Preto fosco)",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary"}),e.jsx("button",{type:"button",onClick:S,className:"bg-primary hover:opacity-90 text-text-primary px-4 py-2 rounded-lg font-semibold",children:"Adicionar"})]}),k.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Cor principal"}),e.jsxs("select",{value:c,onChange:n=>a(n.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"Selecione a cor principal"}),k.map((n,g)=>e.jsx("option",{value:n.cor,children:n.cor},n.cor+g))]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Essa cor será usada como principal se você não enviar imagem principal do produto."})]}),e.jsx("div",{className:"space-y-3",children:k.map((n,g)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-sm mb-2",children:n.cor}),n.preview?e.jsx("div",{className:"relative w-24 h-24",children:e.jsx("img",{src:n.preview,alt:n.cor,className:"w-full h-full object-cover rounded"})}):e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-white border border-gray-300 rounded cursor-pointer hover:bg-gray-50",children:[e.jsx(W,{size:16}),e.jsx("span",{className:"text-xs",children:"Adicionar imagem"}),e.jsx("input",{type:"file",accept:"image/*",onChange:_=>{const D=_.target.files?.[0];D&&T(g,D)},className:"hidden"})]})]}),e.jsx("button",{type:"button",onClick:()=>B(g),className:"text-red-500 hover:bg-red-50 p-2 rounded",children:e.jsx(Q,{size:18})})]},g))})]}),x&&e.jsx("p",{className:`text-center font-semibold ${x.includes("sucesso")||x.includes("planilha")?"text-green-600":"text-red-600"}`,children:x}),e.jsx("button",{type:"submit",disabled:t,className:"w-full bg-primary hover:opacity-90 text-text-primary font-bold py-3 rounded-lg transition-all disabled:opacity-50",children:t?"Salvando...":"Salvar Produto"})]})]})}function Te({product:s,onClose:o}){const[l,y]=i.useState(s.nome||""),[P,v]=i.useState(s.descricao||""),[N,C]=i.useState(s.destaque||!1),[u,I]=i.useState(s.categorias||[]),[f,j]=i.useState(null),[A,z]=i.useState(s.imagem_url?se(s.imagem_url,"thumbnail"):""),[L,E]=i.useState(s.variacoes?.map(p=>({cor:p.cor,image:null,preview:se(p.imagem_url,"thumbnail"),existingUrl:p.imagem_url}))||[]),[k,m]=i.useState(""),[h,r]=i.useState(!1),[c,a]=i.useState(""),{data:t=[]}=le(),d=p=>{const w=p.target.files?.[0];w&&(j(w),z(URL.createObjectURL(w)))},x=()=>{k.trim()&&(E([...L,{cor:k.trim(),image:null,preview:""}]),m(""))},b=(p,w)=>{const S=[...L];S[p].image=w,S[p].preview=URL.createObjectURL(w),E(S)},G=p=>{E(L.filter((w,S)=>S!==p))},V=async p=>{p.preventDefault(),r(!0),a("");try{let w=s.imagem_url;f&&(w=await H(f,{folder:`produtos/${s.id}`,productId:s.id,type:"main"}),s.imagem_url&&s.imagem_url!==w&&await J(s.imagem_url));const S=[],T=[w],B=s.variacoes?.map(R=>R.imagem_url)||[];for(const R of L)if(R.image){const M=await H(R.image,{folder:`produtos/${s.id}/variacoes`,productId:s.id,variation:R.cor,type:"variation"});if(S.push({cor:R.cor,imagem_url:M,thumb_url:M}),T.push(M),R.existingUrl&&R.existingUrl!==M){const n=B.indexOf(R.existingUrl);n>-1&&B.splice(n,1)}}else if(R.existingUrl){const M=s.variacoes?.find(n=>n.cor===R.cor);if(M){S.push(M),T.push(M.imagem_url);const n=B.indexOf(M.imagem_url);n>-1&&B.splice(n,1)}}for(const R of B)await J(R);await ae(O(U,"produtos",s.id),{nome:l,descricao:P,categorias:u,destaque:N,variacoes:S,imagem_url:w,thumb_url:w,imagens_urls:T,thumbs_urls:T}),a("Produto atualizado com sucesso!"),setTimeout(()=>o(),1500)}catch(w){console.error(w),a(w instanceof Error?w.message:"Erro ao atualizar produto")}finally{r(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center z-10",children:[e.jsx("h2",{className:"text-xl font-title font-bold",children:"Editar Produto"}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(Q,{size:20})})]}),e.jsxs("form",{onSubmit:V,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Nome"}),e.jsx("input",{type:"text",value:l,onChange:p=>y(p.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"SKU/Código"}),e.jsx("input",{type:"text",value:s.id,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Descrição"}),e.jsx("textarea",{value:P,onChange:p=>v(p.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Categorias"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(p=>e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:u.includes(p.nome),onChange:w=>{w.target.checked?I(S=>[...S,p.nome]):I(S=>S.filter(T=>T!==p.nome))},className:"rounded"}),e.jsx("span",{className:"text-sm",children:p.nome})]},p.id))})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:N,onChange:p=>C(p.target.checked),className:"rounded"}),e.jsx("span",{className:"text-sm font-semibold",children:"Produto em destaque"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Imagem Principal"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:A?e.jsxs("div",{className:"relative aspect-square max-w-xs mx-auto",children:[e.jsx("img",{src:A,alt:"Preview",className:"w-full h-full object-contain"}),e.jsxs("label",{className:"absolute bottom-2 right-2 bg-primary text-white p-2 rounded-full cursor-pointer hover:opacity-90 shadow-lg transition-opacity",children:[e.jsx(W,{size:16}),e.jsx("input",{type:"file",accept:"image/*",onChange:d,className:"hidden"})]})]}):e.jsxs("label",{className:"flex flex-col items-center gap-2 cursor-pointer",children:[e.jsx(W,{className:"text-gray-400",size:48}),e.jsx("span",{className:"text-sm text-gray-600",children:"Clique para selecionar imagem principal"}),e.jsx("input",{type:"file",accept:"image/*",onChange:d,className:"hidden"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Variações de Cor"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",value:k,onChange:p=>m(p.target.value),onKeyDown:p=>{p.key==="Enter"&&(p.preventDefault(),x())},placeholder:"Nome da cor (ex: Vermelho, Preto fosco)",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:outline-none"}),e.jsx("button",{type:"button",onClick:x,className:"bg-primary hover:opacity-90 text-white px-4 py-2 rounded-lg font-semibold transition-opacity",children:"Adicionar"})]}),e.jsx("div",{className:"space-y-3",children:L.map((p,w)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-sm mb-2",children:p.cor}),p.preview?e.jsxs("div",{className:"relative w-24 h-24",children:[e.jsx("img",{src:p.preview,alt:p.cor,className:"w-full h-full object-cover rounded"}),e.jsxs("label",{className:"absolute bottom-0 right-0 bg-primary text-white p-1 rounded cursor-pointer hover:opacity-90 shadow-md transition-opacity",children:[e.jsx(W,{size:12}),e.jsx("input",{type:"file",accept:"image/*",onChange:S=>{const T=S.target.files?.[0];T&&b(w,T)},className:"hidden"})]})]}):e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-white border border-gray-300 rounded cursor-pointer hover:bg-gray-50 transition-colors",children:[e.jsx(W,{size:16}),e.jsx("span",{className:"text-xs",children:"Adicionar imagem"}),e.jsx("input",{type:"file",accept:"image/*",onChange:S=>{const T=S.target.files?.[0];T&&b(w,T)},className:"hidden"})]})]}),e.jsx("button",{type:"button",onClick:()=>G(w),className:"text-red-500 hover:bg-red-50 p-2 rounded transition-colors",children:e.jsx(Q,{size:18})})]},w))})]}),c&&e.jsx("div",{className:`p-3 rounded-lg text-center font-semibold ${c.includes("sucesso")?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:c}),e.jsx("button",{type:"submit",disabled:h,className:"w-full bg-primary hover:opacity-90 text-white font-bold py-3 rounded-lg transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Salvando...":"Salvar Alterações"})]})]})})}function Oe(){const[s,o]=i.useState(0),[l,y]=i.useState([]),[P,v]=i.useState(null),[N,C]=i.useState(null),[u,I]=i.useState(""),f=50,j=he(),A=i.useMemo(()=>{const a=Z(Y(U,"produtos"),ee("createdAt","desc"),te(f));return s>0&&l[s-1]?Z(Y(U,"produtos"),ee("createdAt","desc"),pe(l[s-1]),te(f)):a},[s,l,f]),{data:z=[],isLoading:L,refetch:E,isFetching:k}=de({queryKey:["admin-products",s,f,l[s-1]?.id],queryFn:async()=>{const t=(await oe(A)).docs;return t.length>0&&y(d=>{const x=[...d];return x[s]=t[t.length-1],x}),t.map(d=>({id:d.id,...d.data()}))},placeholderData:a=>a??[],staleTime:3e4}),m=i.useMemo(()=>{if(!u.trim())return z;const a=u.toLowerCase();return z.filter(t=>t.nome.toLowerCase().includes(a)||t.id.toLowerCase().includes(a))},[z,u]),h=async a=>{if(confirm(`Tem certeza que deseja excluir "${a.nome}"?`)){C(a.id);try{const t=[];a.imagem_url&&t.push(a.imagem_url),a.thumb_url&&a.thumb_url!==a.imagem_url&&t.push(a.thumb_url),a.imagens_urls?.length&&a.imagens_urls.forEach(d=>{t.includes(d)||t.push(d)}),a.thumbs_urls?.length&&a.thumbs_urls.forEach(d=>{t.includes(d)||t.push(d)}),a.variacoes?.length&&a.variacoes.forEach(d=>{d.imagem_url&&!t.includes(d.imagem_url)&&t.push(d.imagem_url),d.thumb_url&&!t.includes(d.thumb_url)&&t.push(d.thumb_url)}),await ze(t),await ce(O(U,"produtos",a.id)),await j.invalidateQueries({queryKey:["admin-products"]}),await E()}catch(t){console.error("Erro ao deletar produto:",t),alert("Erro ao deletar produto")}finally{C(null)}}},r=a=>{v(a)},c=()=>{v(null),j.invalidateQueries({queryKey:["admin-products"]}),E()};return L&&!z.length?e.jsx("div",{className:"text-center py-8",children:"Carregando produtos..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-title font-bold",children:["Produtos Cadastrados ",k&&e.jsx("span",{className:"text-sm text-gray-400",children:"(atualizando…)"})]}),e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx("input",{type:"text",value:u,onChange:a=>I(a.target.value),placeholder:"Buscar por nome ou SKU...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:outline-none text-sm"}),e.jsx(ve,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18})]})]})}),e.jsx("div",{className:"max-h-[600px] overflow-auto divide-y",children:m.map(a=>{const t=a.thumb_url||a.imagem_url||a.imagens_urls?.[0],d=t?me(t,"thumbnail"):"";return e.jsxs("div",{className:"flex items-center gap-4 px-4 py-2 hover:bg-gray-50",children:[d?e.jsx("img",{src:d,alt:a.nome??"Produto",className:"w-16 h-16 object-contain rounded bg-gray-50"}):e.jsx("div",{className:"w-16 h-16 flex items-center justify-center bg-gray-100 rounded",children:e.jsx("span",{className:"text-xs text-gray-400",children:"Sem img"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:a.nome}),e.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",a.id]}),e.jsx("div",{className:"flex gap-2 mt-1 flex-wrap",children:a.categorias?.map(x=>e.jsx("span",{className:"text-xs bg-gray-200 px-2 py-1 rounded",children:x},x))}),a.variacoes&&a.variacoes.length>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.variacoes.length," variações de cor"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>r(a),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Editar",disabled:N===a.id,children:e.jsx(Ce,{size:18})}),e.jsx("button",{onClick:()=>h(a),className:"p-2 text-red-600 hover:bg-red-50 rounded disabled:opacity-50",title:"Excluir",disabled:N===a.id,children:N===a.id?e.jsx("div",{className:"w-[18px] h-[18px] border-2 border-red-600 border-t-transparent rounded-full animate-spin"}):e.jsx(ue,{size:18})})]})]},a.id)})}),e.jsxs("div",{className:"p-4 border-t border-gray-200 flex justify-between items-center",children:[e.jsxs("button",{onClick:()=>o(a=>Math.max(0,a-1)),disabled:s===0,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg disabled:opacity-50 hover:bg-gray-200",children:[e.jsx(ye,{size:18}),"Anterior"]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Página ",s+1]}),e.jsxs("button",{onClick:()=>o(a=>a+1),disabled:z.length<f,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg disabled:opacity-50 hover:bg-gray-200",children:["Próximo",e.jsx(je,{size:18})]})]})]}),P&&e.jsx(Te,{product:P,onClose:c})]})}function qe(){const[s,o]=i.useState(""),[l,y]=i.useState(!1),[P,v]=i.useState(null),[N,C]=i.useState(""),[u,I]=i.useState(!1),{data:f=[],refetch:j}=le(),A=m=>{const h=m.target.files?.[0];h&&(v(h),C(URL.createObjectURL(h)))},z=async m=>{m.preventDefault(),I(!0);try{const h=s.toLowerCase().replace(/\s+/g,"-");let r="";P&&(r=await H(P,{folder:"categorias",productId:h,type:"category"})),await X(O(U,"categorias",h),{id:h,nome:s,productCount:0,popular:l,imagePath:r}),o(""),y(!1),v(null),C(""),j()}catch(h){console.error(h),alert("Erro ao criar categoria")}finally{I(!1)}},L=async m=>{if(confirm("Tem certeza? Esta ação não pode ser desfeita."))try{m.imagePath&&await J(m.imagePath),await ce(O(U,"categorias",m.id)),j()}catch(h){console.error(h),alert("Erro ao excluir categoria")}},E=async m=>{try{await ae(O(U,"categorias",m.id),{popular:!m.popular}),j()}catch(h){console.error(h),alert("Não foi possível atualizar popular")}},k=async(m,h)=>{try{const r=await H(h,{folder:"categorias",productId:m.id,type:"category"});m.imagePath&&await J(m.imagePath),await ae(O(U,"categorias",m.id),{imagePath:r}),j()}catch(r){console.error(r),alert("Não foi possível atualizar a imagem")}};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-title font-bold mb-6",children:"Gerenciar Categorias"}),e.jsxs("form",{onSubmit:z,className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Nome da categoria"}),e.jsx("input",{type:"text",value:s,onChange:m=>o(m.target.value),placeholder:"Nome da categoria",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Imagem da categoria"}),N?e.jsxs("div",{className:"relative w-full h-24",children:[e.jsx("img",{src:N,alt:"Preview",className:"w-full h-full object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>{v(null),C("")},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1",children:e.jsx(Q,{size:14})})]}):e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx(W,{size:16}),e.jsx("span",{className:"text-sm",children:"Selecionar imagem"}),e.jsx("input",{type:"file",accept:"image/*",onChange:A,className:"hidden"})]})]})]}),e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:m=>y(m.target.checked),className:"w-4 h-4 rounded"}),e.jsx("span",{className:"text-sm font-semibold",children:"Marcar como categoria popular"})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full bg-primary hover:opacity-90 text-text-primary font-semibold px-6 py-3 rounded-lg disabled:opacity-50",children:u?"Criando...":"Criar Categoria"})]}),e.jsx("div",{className:"space-y-2",children:f.map(m=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[m.imagePath&&e.jsx("img",{src:me(m.imagePath,"thumbnail"),alt:m.nome,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:m.nome}),e.jsxs("p",{className:"text-sm text-gray-500",children:[m.productCount||0," produtos"]}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-3",children:[e.jsx("button",{onClick:()=>void E(m),className:`px-3 py-1 rounded border text-sm ${m.popular?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300"}`,children:m.popular?"Popular ✓":"Marcar como popular"}),e.jsxs("label",{className:"flex items-center gap-2 px-3 py-1 bg-white border border-gray-300 rounded cursor-pointer hover:bg-gray-50",children:[e.jsx(W,{size:14}),e.jsx("span",{className:"text-xs",children:"Alterar imagem"}),e.jsx("input",{type:"file",accept:"image/*",onChange:h=>{const r=h.target.files?.[0];r&&k(m,r)},className:"hidden"})]})]})]})]}),e.jsx("button",{onClick:()=>void L(m),className:"p-2 text-red-600 hover:bg-red-50 rounded",children:e.jsx(ue,{size:18})})]},m.id))})]})}function Me(){const[s,o]=i.useState({}),[l,y]=i.useState(!1),[P,v]=i.useState(null),[N,C]=i.useState(""),[u,I]=i.useState(""),[f,j]=i.useState(""),[A,z]=i.useState("");i.useEffect(()=>{L(),E()},[]);const L=async()=>{try{const t=await re(O(U,"config","layout"));if(t.exists()){const d=t.data();o(d),I(d.companyInfo?.title||""),j(d.companyInfo?.description||""),d.whatsapp&&z(d.whatsapp)}}catch(t){console.error("Erro ao carregar assets:",t),C("Erro ao carregar configurações")}},E=async()=>{try{const t=await re(O(U,"config","general"));if(t.exists()){const d=t.data();d.whatsappNumber&&!A&&z(d.whatsappNumber)}}catch(t){console.error("Erro ao carregar WhatsApp:",t)}},k=async t=>{await X(O(U,"config","layout"),t,{merge:!0})},m=async t=>{await X(O(U,"config","general"),{whatsappNumber:t},{merge:!0})},h=(t,d=3e3)=>{C(t),setTimeout(()=>C(""),d)},r=async()=>{try{const t={...s,companyInfo:f?{title:u,description:f}:void 0,whatsapp:A||void 0};await k(t),A&&await m(A),o(t),h("Informações salvas com sucesso!")}catch(t){console.error(t),h("Erro ao salvar informações")}},c=async t=>{y(!0),v("logo");try{const d=await H(t,{folder:"layout",type:"logo"});s.logo&&await J(s.logo);const x={...s,logo:d};await k(x),o(x),h("Logo atualizado com sucesso!")}catch(d){console.error(d),h("Erro ao fazer upload do logo")}finally{y(!1),v(null)}},a=async()=>{if(s.logo)try{await J(s.logo);const t={...s,logo:void 0};await k(t),o(t),h("Logo removido com sucesso!")}catch(t){console.error(t),h("Erro ao remover logo")}};return e.jsxs("div",{className:"space-y-8",children:[N&&e.jsx("div",{className:`p-4 rounded-xl text-center font-semibold shadow-md animate-fade-in ${N.includes("sucesso")?"bg-green-50 text-green-700 border-2 border-green-200":"bg-red-50 text-red-700 border-2 border-red-200"}`,children:N}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(we,{size:20,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-title font-bold text-gray-800",children:"Logo Principal"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Logotipo exibido no cabeçalho"})]})]}),s.logo?e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"w-64 h-32 border-2 border-gray-200 rounded-xl p-4 group hover:border-primary transition-colors bg-gray-50",children:e.jsx("img",{src:se(s.logo,"thumbnail"),alt:"Logo",className:"w-full h-full object-contain"})}),e.jsx("button",{onClick:()=>void a(),className:"absolute -top-3 -right-3 bg-red-500 hover:bg-red-600 text-white rounded-full p-2 shadow-lg transition-all transform hover:scale-110",title:"Remover logo",children:e.jsx(Q,{size:18})})]}):e.jsxs("label",{className:"group relative inline-flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-primary/10 to-primary/5 border-2 border-dashed border-primary/30 rounded-xl cursor-pointer hover:border-primary hover:from-primary/20 hover:to-primary/10 transition-all",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-white rounded-lg shadow-sm group-hover:shadow-md transition-shadow",children:P==="logo"?e.jsx(ge,{size:20,className:"animate-spin text-primary"}):e.jsx(W,{size:20,className:"text-primary"})}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Adicionar Logo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>{const d=t.target.files?.[0];d&&c(d)},className:"hidden",disabled:l})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx(ke,{size:20,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-title font-bold text-gray-800",children:"Configurações"}),e.jsx("p",{className:"text-sm text-gray-500",children:"WhatsApp e outros"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(Ne,{size:16}),"WhatsApp"]}),e.jsx("input",{type:"text",value:A,onChange:t=>z(t.target.value),placeholder:"Ex: 5589994333316",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none transition-colors"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Apenas números com DDI e DDD"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>void r(),className:"px-8 py-3 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:"Salvar Configurações"})})]})}function Ve(){const[s,o]=i.useState({hero:{title:"Brindes que Impressionam",subtitle:"Transforme sua marca em experiências memoráveis",ctaText:"Explorar Catálogo",backgroundUrl:""},videos:[],featuredProductIds:[]}),[l,y]=i.useState(!1),[P,v]=i.useState(null),[N,C]=i.useState(""),[u,I]=i.useState([]),[f,j]=i.useState([]);i.useEffect(()=>{A(),z()},[]);const A=async()=>{try{const r=await re(O(U,"config","landing"));if(r.exists()){const c=r.data();o(c),j(c.featuredProductIds||[])}}catch(r){console.error("Erro ao carregar landing:",r)}},z=async()=>{try{const r=Z(Y(U,"produtos"),ee("createdAt","desc"),te(100)),a=(await oe(r)).docs.map(t=>({id:t.id,...t.data()}));I(a)}catch(r){console.error("Erro ao carregar produtos:",r)}},L=async()=>{y(!0);try{await X(O(U,"config","landing"),{...s,featuredProductIds:f}),E("✅ Landing page atualizada!")}catch{E("❌ Erro ao salvar")}finally{y(!1)}},E=r=>{C(r),setTimeout(()=>C(""),3e3)},k=r=>{j(c=>c.includes(r)?c.filter(a=>a!==r):c.length>=10?c:[...c,r])},m=async(r,c,a,t)=>{v("video");try{const d={url:r,title:a,description:t};c&&c.trim()&&(d.thumbnail=c),o(x=>({...x,videos:[...x.videos,d]})),E("✅ Vídeo adicionado!")}catch(d){console.error("Erro ao adicionar vídeo:",d),E("❌ Erro ao adicionar")}finally{v(null)}},h=r=>{o(c=>({...c,videos:c.videos.filter((a,t)=>t!==r)})),E("✅ Vídeo removido!")};return e.jsxs("div",{className:"space-y-8",children:[N&&e.jsx("div",{className:`p-4 rounded-xl text-center font-semibold ${N.includes("✅")?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:N}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Ie,{size:20,className:"text-purple-600"})}),e.jsx("h2",{className:"text-xl font-bold",children:"Seção Hero (Principal)"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Título"}),e.jsx("input",{type:"text",value:s.hero.title,onChange:r=>o(c=>({...c,hero:{...c.hero,title:r.target.value}})),className:"w-full px-4 py-3 border-2 rounded-xl focus:border-primary outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Subtítulo"}),e.jsx("input",{type:"text",value:s.hero.subtitle,onChange:r=>o(c=>({...c,hero:{...c.hero,subtitle:r.target.value}})),className:"w-full px-4 py-3 border-2 rounded-xl focus:border-primary outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Texto do Botão"}),e.jsx("input",{type:"text",value:s.hero.ctaText,onChange:r=>o(c=>({...c,hero:{...c.hero,ctaText:r.target.value}})),className:"w-full px-4 py-3 border-2 rounded-xl focus:border-primary outline-none"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Ee,{size:20,className:"text-blue-600"})}),e.jsx("h2",{className:"text-xl font-bold",children:"Vídeos de Produção"})]}),e.jsx($e,{onSubmit:m,loading:P==="video"}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4 mt-6",children:s.videos.map((r,c)=>e.jsxs("div",{className:"border-2 rounded-xl overflow-hidden group",children:[e.jsx("div",{className:"relative aspect-video bg-gray-900",children:e.jsx("video",{src:r.url,className:"w-full h-full object-cover",muted:!0})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-bold mb-1",children:r.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:r.description}),e.jsx("button",{onClick:()=>h(c),className:"text-red-500 text-sm hover:underline",children:"Remover"})]})]},c))})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500/10 rounded-lg flex items-center justify-center",children:e.jsx(ie,{size:20,className:"text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Produtos em Destaque"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Selecione até 10 produtos para o carrossel"})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm font-semibold text-gray-700",children:["Selecionados: ",e.jsx("span",{className:"text-primary",children:f.length}),"/10"]})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 max-h-[600px] overflow-y-auto",children:u.map(r=>{const c=f.includes(r.id),a=r.thumb_url||r.imagem_url||r.variacoes?.[0]?.thumb_url,t=a?se(a,"thumbnail"):"";return e.jsxs("button",{onClick:()=>k(r.id),disabled:!c&&f.length>=10,className:`relative group border-2 rounded-xl overflow-hidden transition-all ${c?"border-primary ring-2 ring-primary/20":"border-gray-200 hover:border-gray-300"} ${!c&&f.length>=10?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("div",{className:"aspect-square bg-gray-100",children:t?e.jsx("img",{src:t,alt:r.nome,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ie,{size:24,className:"text-gray-400"})})}),e.jsxs("div",{className:"p-2 bg-white",children:[e.jsx("p",{className:"text-xs font-semibold line-clamp-2 text-left",children:r.nome}),e.jsxs("p",{className:"text-[10px] text-gray-500 text-left mt-1",children:["SKU: ",r.id]})]}),c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute top-2 right-2 bg-primary text-white rounded-full p-1.5 shadow-lg",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("div",{className:"absolute top-2 left-2 bg-white text-primary rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold shadow-lg",children:f.indexOf(r.id)+1})]})]},r.id)})}),f.length>=10&&e.jsx("p",{className:"text-sm text-orange-600 mt-4 text-center font-semibold",children:"Limite máximo de produtos atingido"})]}),e.jsxs("button",{onClick:L,disabled:l,className:"w-full flex items-center justify-center gap-3 bg-primary text-white py-4 rounded-xl font-bold hover:opacity-90 disabled:opacity-50",children:[l?e.jsx(ge,{className:"animate-spin",size:20}):e.jsx(Se,{size:20}),"Salvar Landing Page"]})]})}function $e({onSubmit:s,loading:o}){const[l,y]=i.useState(""),[P,v]=i.useState(""),[N,C]=i.useState(""),[u,I]=i.useState(""),f=()=>{l&&N&&u&&(s(l,P,N,u),y(""),v(""),C(""),I(""))};return e.jsxs("div",{className:"border-2 border-dashed rounded-xl p-6 space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Título"}),e.jsx("input",{type:"text",value:N,onChange:j=>C(j.target.value),className:"w-full px-4 py-2 border-2 rounded-lg outline-none focus:border-primary",placeholder:"Ex: Processo de Personalização"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Descrição"}),e.jsx("input",{type:"text",value:u,onChange:j=>I(j.target.value),className:"w-full px-4 py-2 border-2 rounded-lg outline-none focus:border-primary",placeholder:"Breve descrição do vídeo"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"URL do Vídeo"}),e.jsx("input",{type:"url",value:l,onChange:j=>y(j.target.value),className:"w-full px-4 py-2 border-2 rounded-lg outline-none focus:border-primary",placeholder:"https://seusite.com/videos/video-producao.mp4"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cole a URL completa do vídeo hospedado em seu servidor"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"URL da Thumbnail (opcional)"}),e.jsx("input",{type:"url",value:P,onChange:j=>v(j.target.value),className:"w-full px-4 py-2 border-2 rounded-lg outline-none focus:border-primary",placeholder:"https://seusite.com/videos/thumb-producao.jpg"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Imagem de pré-visualização do vídeo"})]})]}),e.jsx("button",{onClick:f,disabled:!l||!N||!u||o,className:"w-full bg-primary text-white py-3 rounded-lg font-semibold disabled:opacity-50",children:o?"Adicionando...":"Adicionar Vídeo"})]})}function Ye(){const[s,o]=i.useState("products"),l=async()=>{await fe(be)};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-title font-bold",children:"Painel Admin"}),e.jsx("button",{onClick:l,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg",children:"Sair"})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex gap-4 mb-6 overflow-x-auto",children:[e.jsx("button",{onClick:()=>o("products"),className:`px-6 py-2 rounded-lg font-semibold transition-all whitespace-nowrap ${s==="products"?"bg-primary text-text-primary":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"Produtos"}),e.jsx("button",{onClick:()=>o("categories"),className:`px-6 py-2 rounded-lg font-semibold transition-all whitespace-nowrap ${s==="categories"?"bg-primary text-text-primary":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"Categorias"}),e.jsx("button",{onClick:()=>o("landing"),className:`px-6 py-2 rounded-lg font-semibold transition-all whitespace-nowrap ${s==="landing"?"bg-primary text-text-primary":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"Landing Page"}),e.jsx("button",{onClick:()=>o("layout"),className:`px-6 py-2 rounded-lg font-semibold transition-all whitespace-nowrap ${s==="layout"?"bg-primary text-text-primary":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"Configurações"})]}),s==="products"&&e.jsxs("div",{className:"space-y-8",children:[e.jsx(Re,{}),e.jsx(Oe,{})]}),s==="categories"&&e.jsx(qe,{}),s==="landing"&&e.jsx(Ve,{}),s==="layout"&&e.jsx(Me,{})]})]})}export{Ye as default};
