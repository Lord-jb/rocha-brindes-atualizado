const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/CategorySidebar.BWBDjTif.js","_astro/Providers.DcKbSSq3.js","_astro/index.y5FlbPQu.js","_astro/cloudflare.CBuuMiT9.js","_astro/x.z4jA_tG-.js","_astro/search.DKiS5xs1.js","_astro/grid-3x3.vbt91aiS.js","_astro/ProductGrid.C4Eb_H7e.js","_astro/eye.REUo0HNQ.js","_astro/ProductModal.D2Axktd9.js","_astro/Header.SGgp_8z0.js","_astro/package.Cs8q6pKs.js","_astro/shopping-cart.B3fp9bs6.js","_astro/plus.ORqsLvC8.js","_astro/CartSidebar.Dw3536eM.js","_astro/trash-2.C3WEIqJe.js","_astro/Footer.Ba7k2GNQ.js","_astro/phone.CFc2kv0p.js"])))=>i.map(i=>d[i]);
import{_ as p}from"./preload-helper.BlTxHScW.js";import{j as e,P as k,g as z,d as I,a as M}from"./Providers.DcKbSSq3.js";import{r as a}from"./index.y5FlbPQu.js";import{u as R,a as T,s as U,H as W,M as D}from"./Header.SGgp_8z0.js";import{p as O,C as V,a as G}from"./cloudflare.CBuuMiT9.js";import{S as F}from"./search.DKiS5xs1.js";const $=a.lazy(()=>p(()=>import("./CategorySidebar.BWBDjTif.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),H=a.lazy(()=>p(()=>import("./ProductGrid.C4Eb_H7e.js"),__vite__mapDeps([7,1,2,3,8]))),B=a.lazy(()=>p(()=>import("./ProductModal.D2Axktd9.js"),__vite__mapDeps([9,1,2,3,10,4,11,12,13]))),K=a.lazy(()=>p(()=>import("./CartSidebar.Dw3536eM.js"),__vite__mapDeps([14,1,2,10,3,4,12,13,15]))),q=a.lazy(()=>p(()=>import("./Footer.Ba7k2GNQ.js"),__vite__mapDeps([16,1,2,3,17])));function J(){const{data:r,isLoading:C}=R(1e3),{category:i,search:n,add:_,setCategory:x,setSearch:h}=T(),[g,b]=a.useState(null),[P,E]=a.useState("5589994333316"),[o,f]=a.useState(0),[j,S]=a.useState(!1);a.useEffect(()=>{const s=()=>{S(window.innerWidth<768)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const m=j?15:40;a.useEffect(()=>{if(r){U(r);const s=[];r.layout.logo&&s.push(r.layout.logo),O(s)}},[r]),a.useEffect(()=>{const t=new URLSearchParams(window.location.search).get("categoria");t&&x(t)},[x]),a.useEffect(()=>{f(0),window.scrollTo({top:0,behavior:"smooth"})},[i,n]);const l=a.useMemo(()=>r?r.products.filter(s=>{const t=i==="Todos"||s.categorias?.includes(i),c=!n||s.nome.toLowerCase().includes(n.toLowerCase())||s.id.toLowerCase().includes(n.toLowerCase());return t&&c}):[],[r,i,n]),A=a.useMemo(()=>{const s=o*m;return l.slice(s,s+m)},[l,o]),u=Math.ceil(l.length/m),y=s=>{f(s),window.scrollTo({top:0,behavior:"smooth"})};a.useEffect(()=>{(async()=>{try{const t=await z(I(M,"config","general"));if(t.exists()){const c=t.data();c.whatsappNumber&&E(c.whatsappNumber)}}catch(t){console.error("Erro ao carregar Contato:",t)}})()},[]);const v=()=>{const s=P.replace(/\D/g,""),t=encodeURIComponent("Olá! Gostaria de mais informações sobre os produtos."),c=`https://wa.me/${s}?text=${t}`;/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?window.location.href=c:window.open(c,"_blank")},w=e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[...Array(m)].map((s,t)=>e.jsx("div",{className:"bg-white rounded-xl h-96 animate-pulse"},t))}),L=()=>u<=1?null:e.jsx("div",{className:"mt-12 mb-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>y(o-1),disabled:o===0,className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-gray-300 rounded-lg disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-50 hover:border-primary transition-all font-medium text-sm",children:[e.jsx(V,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Anterior"})]}),e.jsxs("span",{className:"text-sm text-gray-600 font-medium",children:["Página ",e.jsx("span",{className:"font-bold text-primary",children:o+1})," de"," ",e.jsx("span",{className:"font-bold",children:u})]}),e.jsxs("button",{onClick:()=>y(o+1),disabled:o>=u-1,className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-gray-300 rounded-lg disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-50 hover:border-primary transition-all font-medium text-sm",children:[e.jsx("span",{className:"hidden sm:inline",children:"Próxima"}),e.jsx(G,{size:18})]})]})}),d=r?.categories.find(s=>s.nome===i),N=r?.categories.map(s=>s.nome)||[];return e.jsxs(e.Fragment,{children:[e.jsx(W,{}),e.jsx("main",{className:"min-h-screen bg-gray-50 pt-4 md:pt-8 overflow-x-hidden",children:e.jsx("div",{className:"container mx-auto px-4 pb-4",children:e.jsxs("div",{className:"grid lg:grid-cols-[280px_1fr] gap-8",children:[e.jsx(a.Suspense,{fallback:null,children:e.jsx($,{categories:N,selected:i,onSelect:x,search:n,onSearch:h})}),e.jsxs("div",{children:[j&&e.jsxs("div",{className:"md:hidden mb-6 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-full border border-gray-200 px-4 py-2 shadow-sm",children:[e.jsx(F,{size:18,className:"text-gray-500"}),e.jsx("input",{type:"text",value:n,onChange:s=>h(s.target.value),placeholder:"Buscar produtos ou SKUs",className:"flex-1 bg-transparent outline-none text-sm"})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1",children:["Todos",...N].map(s=>e.jsx("button",{onClick:()=>x(s),className:`whitespace-nowrap px-3 py-1.5 rounded-full border text-xs ${i===s?"bg-primary text-white border-primary":"bg-white text-gray-700 border-gray-200"}`,children:s},s))})]}),d&&(d.descricao||d.videoUrl)&&e.jsxs("div",{className:"mb-8 bg-white rounded-2xl shadow-card overflow-hidden",children:[d.videoUrl&&e.jsx("div",{className:"relative w-full aspect-video bg-gray-900",children:e.jsx("video",{src:d.videoUrl,className:"w-full h-full object-cover",autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}),d.descricao&&e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-title font-bold text-dark mb-3",children:i}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:d.descricao})]})]}),C?w:l.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("p",{className:"text-xl text-gray-500",children:"Nenhum produto encontrado"}),n&&e.jsx("button",{onClick:()=>h(""),className:"mt-4 px-6 py-2 bg-primary text-white rounded-lg hover:opacity-90 transition-all",children:"Limpar busca"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Mostrando ",e.jsx("span",{className:"font-semibold",children:o*m+1})," -"," ",e.jsx("span",{className:"font-semibold",children:Math.min((o+1)*m,l.length)})," de"," ",e.jsx("span",{className:"font-semibold",children:l.length})," ",l.length===1?"produto":"produtos"]})}),e.jsx(a.Suspense,{fallback:w,children:e.jsx(H,{products:A,onView:b,onAdd:_})}),L()]})]})]})})}),e.jsx("button",{onClick:v,className:"fixed bottom-20 right-6 bg-green-500 hover:bg-green-600 text-white p-4 rounded-full shadow-2xl hover:scale-110 transition-all z-40","aria-label":"Contato WhatsApp",children:e.jsx(D,{size:28})}),e.jsxs(a.Suspense,{fallback:null,children:[g&&e.jsx(B,{product:g,onClose:()=>b(null)}),e.jsx(K,{}),e.jsx(q,{})]}),e.jsx("div",{className:"bg-gradient-to-r from-primary/10 via-primary/5 to-primary/10 py-8 px-4 mt-6",children:e.jsxs("div",{className:"container mx-auto flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg md:text-xl font-title font-bold text-dark",children:"Precisa de ajuda rápida?"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Use os filtros e a busca para achar produtos ou fale conosco pelo WhatsApp."})]}),e.jsx("button",{onClick:v,className:"px-5 py-3 bg-green-500 hover:bg-green-600 text-white rounded-full shadow-md font-semibold text-sm transition-all",children:"Abrir WhatsApp"})]})})]})}function ae(){return e.jsx(k,{children:e.jsx(J,{})})}export{ae as default};
