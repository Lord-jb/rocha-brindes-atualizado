import{q as ne,e as ce,f as se,a as V,c as be,j as e,s as Y,d as B,h as xe,u as ge,i as Re,l as pe,k as Te,m as Ce,g as re,n as Le,p as Me,b as De}from"./Providers.DcKbSSq3.js";import{r as n}from"./index.y5FlbPQu.js";import{c as _,u as ke,d as Q,o as ee,e as ae,C as Ue,a as Ae,f as Oe,b as qe}from"./cloudflare.CBuuMiT9.js";import{X as K}from"./x.z4jA_tG-.js";import{S as _e}from"./search.DKiS5xs1.js";import{T as de}from"./trash-2.C3WEIqJe.js";import{P as he,M as $e,a as Ve}from"./phone.CFc2kv0p.js";import{P as Se}from"./plus.ORqsLvC8.js";import{P as ie}from"./package.Cs8q6pKs.js";import{E as Fe}from"./eye.REUo0HNQ.js";import{G as Be}from"./grid-3x3.vbt91aiS.js";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=_("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=_("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=_("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=_("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=_("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=_("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=_("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=_("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=_("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=_("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=_("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=_("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=_("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=_("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=_("MoveDown",[["path",{d:"M8 18L12 22L16 18",key:"cskvfv"}],["path",{d:"M12 2V22",key:"r89rzk"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=_("MoveUp",[["path",{d:"M8 6L12 2L16 6",key:"1yvkyx"}],["path",{d:"M12 2V22",key:"r89rzk"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=_("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=_("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=_("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=_("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=_("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=_("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=_("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=_("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);function me(){return ke({queryKey:["categories"],queryFn:async()=>{const o=ne(se(V,"categorias"),ce("nome"));return(await be(o)).docs.map(x=>({id:x.id,...x.data()}))},staleTime:300*1e3,refetchOnMount:!0,refetchOnWindowFocus:!1})}const is="1t7T-5mU4ET0kjqd8x_sXlEwunwogCBrlqFnYpVaoyvE",ns="AIzaSyAWUmt2UDeXxY1my2ajGU5bAMSjuU0L14o",cs="produtos!A:Z";function we(o){return o.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toUpperCase().trim()}function ds(o,u){if(!o||!u)return o;const x=new RegExp(`\\s+${u}$`,"i");return o.replace(x,"").trim()}async function ms(o){const u=o.trim();if(!u)return null;const x=u.split("_"),E=x.length>2?x.slice(0,x.length-1).join("_"):u,g=`https://sheets.googleapis.com/v4/spreadsheets/${is}/values/${encodeURIComponent(cs)}?key=${ns}`,b=await fetch(g);if(!b.ok)throw console.error("Erro ao buscar planilha:",await b.text()),new Error("Não foi possível acessar a planilha do Google Sheets");const z=(await b.json()).values||[];if(!z.length)return null;const[f,...T]=z;console.log("Header da planilha:",f),console.log("Primeira linha de dados:",T[0]);const D=m=>we(m||""),P=f.findIndex(m=>{const N=D(m);return["ID","CODIGO","CÓDIGO","SKU","COD","CODE"].includes(N)}),d=f.findIndex(m=>{const N=D(m);return["NOME","PRODUTO","DESCRICAO_CURTA","NAME"].includes(N)}),k=f.findIndex(m=>{const N=D(m);return["DESCRICAO","DESCRIÇÃO","DESC","DESCRIPTION"].includes(N)}),L=f.findIndex(m=>{const N=D(m);return["COR","CORES","VARIACAO","VARIACOES","VARIAÇÃO","COLOR"].includes(N)}),O=f.findIndex(m=>{const N=D(m);return["CATEGORIA","CATEGORIAS","GRUPO","CATEGORY"].includes(N)}),v=f.findIndex(m=>{const N=D(m);return["DESTAQUE","HIGHLIGHT","FEATURED"].includes(N)});if(P===-1)throw console.error("Colunas disponíveis:",f.map((m,N)=>`${N}: ${m}`)),new Error(`Coluna de código/SKU não encontrada na planilha. Colunas disponíveis: ${f.join(", ")}`);const U=T.filter(m=>{const N=(m[P]||"").trim();return N?N===E||N.startsWith(E+"_"):!1});if(!U.length)return null;let p="",C="";const A=new Set;let i=!1;const S=[];for(const m of U){const N=d>=0?(m[d]||"").trim():"",H=k>=0?(m[k]||"").trim():"",G=L>=0?(m[L]||"").trim():"",y=O>=0?(m[O]||"").trim():"",R=v>=0?(m[v]||"").trim():"";!p&&N&&(p=G?ds(N,G):N),!C&&H&&(C=H),y&&y.split(",").map(l=>l.trim()).filter(Boolean).forEach(l=>A.add(l)),typeof R=="string"&&["SIM","TRUE","1","YES","S"].includes(we(R))&&(i=!0),G&&!S.find(l=>l.cor===G)&&S.push({cor:G})}const c=Array.from(A);return{baseSku:E,nome:p||E,descricao:C,categorias:c,destaque:i,variacoes:S}}function us(){const[o,u]=n.useState(""),[x,E]=n.useState(""),[g,b]=n.useState(""),[h,z]=n.useState(!1),[f,T]=n.useState([]),[D,P]=n.useState(!1),[d,k]=n.useState(null),[L,O]=n.useState(""),[v,U]=n.useState([]),[p,C]=n.useState(""),[A,i]=n.useState(""),[S,c]=n.useState(!1),[m,N]=n.useState(""),[H,G]=n.useState(!1),{data:y=[]}=me(),R=a=>{const r=a.target.files?.[0];r&&(k(r),O(URL.createObjectURL(r)))},l=()=>{if(p.trim()){const a=p.trim(),r=[...v,{cor:a,image:null,preview:""}];U(r),A||i(a),C("")}},w=(a,r)=>{const j=[...v];j[a].image=r,j[a].preview=URL.createObjectURL(r),U(j)},I=a=>{const r=v[a]?.cor,j=v.filter((M,$)=>$!==a);U(j),i(M=>M&&M===r?j[0]?.cor??"":M)},t=async()=>{const a=x.trim();if(a){G(!0),N("");try{const r=await ms(a);if(!r){N("Nenhum produto encontrado na planilha com esse código.");return}if(E(r.baseSku),r.nome&&u(r.nome),r.descricao&&b(r.descricao),r.categorias?.length&&(T(r.categorias),P(!1)),z(r.destaque),r.variacoes?.length){const j=r.variacoes.map($=>({cor:$.cor,image:null,preview:""}));U(j);const M=r.variacoes.find($=>$.cor.toLowerCase().includes("preto"));M?i(M.cor):r.variacoes[0]?i(r.variacoes[0].cor):i("")}else U([]),i("");N("Dados preenchidos a partir da planilha ✅")}catch(r){console.error(r),N("Erro ao buscar dados na planilha.")}finally{G(!1)}}},s=async a=>{if(a.preventDefault(),f.length===0){P(!0),N("Selecione pelo menos uma categoria");return}P(!1),c(!0),N("");try{if(!x.trim())throw new Error("Informe um código/SKU");const r=[],j=[];let M=null;const $={};for(const q of v){if(!q.image)continue;const F=await Q(q.image,{folder:`produtos/${x}/variacoes`,productId:x,variation:q.cor,type:"variation"});j.push({cor:q.cor,imagem_url:F,thumb_url:F}),r.push(F),$[q.cor]=F}if(d)M=await Q(d,{folder:`produtos/${x}`,productId:x,type:"main"}),r.unshift(M);else if(A&&$[A])M=$[A];else{const q=Object.keys($).find(F=>F.toLowerCase().includes("preto"));if(q)M=$[q];else{const F=Object.values($)[0];F&&(M=F)}}if(!M)throw new Error("Envie pelo menos uma imagem (principal ou de alguma variação).");await Y(B(se(V,"produtos"),x),{id:x,nome:o,descricao:g,categorias:f,destaque:h,variacoes:j,imagem_url:M,thumb_url:M,imagens_urls:r,thumbs_urls:r,createdAt:xe()}),N("Produto salvo com sucesso!"),u(""),E(""),b(""),z(!1),T([]),P(!1),k(null),O(""),U([]),C(""),i("")}catch(r){console.error(r),N(r instanceof Error?r.message:"Erro ao salvar produto")}finally{c(!1)}};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-title font-bold mb-6",children:"Adicionar Produto"}),e.jsxs("form",{onSubmit:s,className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Nome"}),e.jsx("input",{type:"text",value:o,onChange:a=>u(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"SKU/Código"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:x,onChange:a=>E(a.target.value),onBlur:t,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary",required:!0}),e.jsx("button",{type:"button",onClick:t,disabled:H,className:"px-3 py-2 text-sm rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50",children:H?"Buscando...":"Planilha"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Descrição"}),e.jsx("textarea",{value:g,onChange:a=>b(a.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2",children:["Categorias ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:`flex flex-wrap gap-2 p-3 rounded-lg border-2 ${D?"border-red-300 bg-red-50":"border-gray-200"}`,children:y.map(a=>e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-white rounded-lg cursor-pointer hover:bg-gray-50 border border-gray-200",children:[e.jsx("input",{type:"checkbox",checked:f.includes(a.nome),onChange:r=>{P(!1),r.target.checked?T(j=>[...j,a.nome]):T(j=>j.filter(M=>M!==a.nome))},className:"rounded"}),e.jsx("span",{className:"text-sm",children:a.nome})]},a.id))}),D&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Selecione pelo menos uma categoria"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:a=>z(a.target.checked),className:"rounded"}),e.jsx("span",{className:"text-sm font-semibold",children:"Produto em destaque"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Imagem Principal (opcional)"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:L?e.jsxs("div",{className:"relative aspect-square max-w-xs mx-auto",children:[e.jsx("img",{src:L,alt:"Preview",className:"w-full h-full object-contain"}),e.jsx("button",{type:"button",onClick:()=>{k(null),O("")},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1",children:e.jsx(K,{size:16})})]}):e.jsxs("label",{className:"flex flex-col items-center gap-2 cursor-pointer",children:[e.jsx(W,{className:"text-gray-400",size:48}),e.jsx("span",{className:"text-sm text-gray-600",children:"Clique para selecionar imagem principal (opcional)"}),e.jsx("input",{type:"file",accept:"image/*",onChange:R,className:"hidden"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Variações de Cor"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",value:p,onChange:a=>C(a.target.value),onKeyDown:a=>{a.key==="Enter"&&(a.preventDefault(),l())},placeholder:"Nome da cor (ex: Vermelho, Preto fosco)",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary"}),e.jsx("button",{type:"button",onClick:l,className:"bg-primary hover:opacity-90 text-text-primary px-4 py-2 rounded-lg font-semibold",children:"Adicionar"})]}),v.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Cor principal"}),e.jsxs("select",{value:A,onChange:a=>i(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"Selecione a cor principal"}),v.map((a,r)=>e.jsx("option",{value:a.cor,children:a.cor},a.cor+r))]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Essa cor será usada como principal se você não enviar imagem principal do produto."})]}),e.jsx("div",{className:"space-y-3",children:v.map((a,r)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-sm mb-2",children:a.cor}),a.preview?e.jsx("div",{className:"relative w-24 h-24",children:e.jsx("img",{src:a.preview,alt:a.cor,className:"w-full h-full object-cover rounded"})}):e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-white border border-gray-300 rounded cursor-pointer hover:bg-gray-50",children:[e.jsx(W,{size:16}),e.jsx("span",{className:"text-xs",children:"Adicionar imagem"}),e.jsx("input",{type:"file",accept:"image/*",onChange:j=>{const M=j.target.files?.[0];M&&w(r,M)},className:"hidden"})]})]}),e.jsx("button",{type:"button",onClick:()=>I(r),className:"text-red-500 hover:bg-red-50 p-2 rounded",children:e.jsx(K,{size:18})})]},r))})]}),m&&e.jsx("p",{className:`text-center font-semibold ${m.includes("sucesso")||m.includes("planilha")?"text-green-600":"text-red-600"}`,children:m}),e.jsx("button",{type:"submit",disabled:S,className:"w-full bg-primary hover:opacity-90 text-text-primary font-bold py-3 rounded-lg transition-all disabled:opacity-50",children:S?"Salvando...":"Salvar Produto"})]})]})}function xs({product:o,onClose:u}){const[x,E]=n.useState(o.nome||""),[g,b]=n.useState(o.descricao||""),[h,z]=n.useState(o.destaque||!1),[f,T]=n.useState(o.categorias||[]),[D,P]=n.useState(null),[d,k]=n.useState(o.imagem_url?ee(o.imagem_url,"thumbnail"):""),[L,O]=n.useState(o.variacoes?.map(y=>({cor:y.cor,image:null,preview:ee(y.imagem_url,"thumbnail"),existingUrl:y.imagem_url}))||[]),[v,U]=n.useState(""),[p,C]=n.useState(!1),[A,i]=n.useState(""),{data:S=[]}=me(),c=y=>{const R=y.target.files?.[0];R&&(P(R),k(URL.createObjectURL(R)))},m=()=>{v.trim()&&(O([...L,{cor:v.trim(),image:null,preview:""}]),U(""))},N=(y,R)=>{const l=[...L];l[y].image=R,l[y].preview=URL.createObjectURL(R),O(l)},H=y=>{O(L.filter((R,l)=>l!==y))},G=async y=>{y.preventDefault(),C(!0),i("");try{let R=o.imagem_url;D&&(R=await Q(D,{folder:`produtos/${o.id}`,productId:o.id,type:"main"}),o.imagem_url&&o.imagem_url!==R&&await ae(o.imagem_url));const l=[],w=[R],I=o.variacoes?.map(t=>t.imagem_url)||[];for(const t of L)if(t.image){const s=await Q(t.image,{folder:`produtos/${o.id}/variacoes`,productId:o.id,variation:t.cor,type:"variation"});if(l.push({cor:t.cor,imagem_url:s,thumb_url:s}),w.push(s),t.existingUrl&&t.existingUrl!==s){const a=I.indexOf(t.existingUrl);a>-1&&I.splice(a,1)}}else if(t.existingUrl){const s=o.variacoes?.find(a=>a.cor===t.cor);if(s){l.push(s),w.push(s.imagem_url);const a=I.indexOf(s.imagem_url);a>-1&&I.splice(a,1)}}for(const t of I)await ae(t);await ge(B(V,"produtos",o.id),{nome:x,descricao:g,categorias:f,destaque:h,variacoes:l,imagem_url:R,thumb_url:R,imagens_urls:w,thumbs_urls:w}),i("Produto atualizado com sucesso!"),setTimeout(()=>u(),1500)}catch(R){console.error(R),i(R instanceof Error?R.message:"Erro ao atualizar produto")}finally{C(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center z-10",children:[e.jsx("h2",{className:"text-xl font-title font-bold",children:"Editar Produto"}),e.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(K,{size:20})})]}),e.jsxs("form",{onSubmit:G,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Nome"}),e.jsx("input",{type:"text",value:x,onChange:y=>E(y.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"SKU/Código"}),e.jsx("input",{type:"text",value:o.id,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Descrição"}),e.jsx("textarea",{value:g,onChange:y=>b(y.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Categorias"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:S.map(y=>e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:f.includes(y.nome),onChange:R=>{R.target.checked?T(l=>[...l,y.nome]):T(l=>l.filter(w=>w!==y.nome))},className:"rounded"}),e.jsx("span",{className:"text-sm",children:y.nome})]},y.id))})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:y=>z(y.target.checked),className:"rounded"}),e.jsx("span",{className:"text-sm font-semibold",children:"Produto em destaque"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Imagem Principal"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:d?e.jsxs("div",{className:"relative aspect-square max-w-xs mx-auto",children:[e.jsx("img",{src:d,alt:"Preview",className:"w-full h-full object-contain"}),e.jsxs("label",{className:"absolute bottom-2 right-2 bg-primary text-white p-2 rounded-full cursor-pointer hover:opacity-90 shadow-lg transition-opacity",children:[e.jsx(W,{size:16}),e.jsx("input",{type:"file",accept:"image/*",onChange:c,className:"hidden"})]})]}):e.jsxs("label",{className:"flex flex-col items-center gap-2 cursor-pointer",children:[e.jsx(W,{className:"text-gray-400",size:48}),e.jsx("span",{className:"text-sm text-gray-600",children:"Clique para selecionar imagem principal"}),e.jsx("input",{type:"file",accept:"image/*",onChange:c,className:"hidden"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Variações de Cor"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",value:v,onChange:y=>U(y.target.value),onKeyDown:y=>{y.key==="Enter"&&(y.preventDefault(),m())},placeholder:"Nome da cor (ex: Vermelho, Preto fosco)",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:outline-none"}),e.jsx("button",{type:"button",onClick:m,className:"bg-primary hover:opacity-90 text-white px-4 py-2 rounded-lg font-semibold transition-opacity",children:"Adicionar"})]}),e.jsx("div",{className:"space-y-3",children:L.map((y,R)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-sm mb-2",children:y.cor}),y.preview?e.jsxs("div",{className:"relative w-24 h-24",children:[e.jsx("img",{src:y.preview,alt:y.cor,className:"w-full h-full object-cover rounded"}),e.jsxs("label",{className:"absolute bottom-0 right-0 bg-primary text-white p-1 rounded cursor-pointer hover:opacity-90 shadow-md transition-opacity",children:[e.jsx(W,{size:12}),e.jsx("input",{type:"file",accept:"image/*",onChange:l=>{const w=l.target.files?.[0];w&&N(R,w)},className:"hidden"})]})]}):e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-white border border-gray-300 rounded cursor-pointer hover:bg-gray-50 transition-colors",children:[e.jsx(W,{size:16}),e.jsx("span",{className:"text-xs",children:"Adicionar imagem"}),e.jsx("input",{type:"file",accept:"image/*",onChange:l=>{const w=l.target.files?.[0];w&&N(R,w)},className:"hidden"})]})]}),e.jsx("button",{type:"button",onClick:()=>H(R),className:"text-red-500 hover:bg-red-50 p-2 rounded transition-colors",children:e.jsx(K,{size:18})})]},R))})]}),A&&e.jsx("div",{className:`p-3 rounded-lg text-center font-semibold ${A.includes("sucesso")?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:A}),e.jsx("button",{type:"submit",disabled:p,className:"w-full bg-primary hover:opacity-90 text-white font-bold py-3 rounded-lg transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Salvando...":"Salvar Alterações"})]})]})})}function gs(){const[o,u]=n.useState(0),[x,E]=n.useState([]),[g,b]=n.useState(null),[h,z]=n.useState(null),[f,T]=n.useState(""),D=50,P=Re(),d=n.useMemo(()=>{const i=ne(se(V,"produtos"),ce("createdAt","desc"),pe(D));return o>0&&x[o-1]?ne(se(V,"produtos"),ce("createdAt","desc"),Te(x[o-1]),pe(D)):i},[o,x,D]),{data:k=[],isLoading:L,refetch:O,isFetching:v}=ke({queryKey:["admin-products",o,D,x[o-1]?.id],queryFn:async()=>{const S=(await be(d)).docs;return S.length>0&&E(c=>{const m=[...c];return m[o]=S[S.length-1],m}),S.map(c=>({id:c.id,...c.data()}))},placeholderData:i=>i??[],staleTime:3e4}),U=n.useMemo(()=>{if(!f.trim())return k;const i=f.toLowerCase();return k.filter(S=>S.nome.toLowerCase().includes(i)||S.id.toLowerCase().includes(i))},[k,f]),p=async i=>{if(confirm(`Tem certeza que deseja excluir "${i.nome}"?`)){z(i.id);try{const S=[];i.imagem_url&&S.push(i.imagem_url),i.thumb_url&&i.thumb_url!==i.imagem_url&&S.push(i.thumb_url),i.imagens_urls?.length&&i.imagens_urls.forEach(c=>{S.includes(c)||S.push(c)}),i.thumbs_urls?.length&&i.thumbs_urls.forEach(c=>{S.includes(c)||S.push(c)}),i.variacoes?.length&&i.variacoes.forEach(c=>{c.imagem_url&&!S.includes(c.imagem_url)&&S.push(c.imagem_url),c.thumb_url&&!S.includes(c.thumb_url)&&S.push(c.thumb_url)}),await Oe(S),await Ce(B(V,"produtos",i.id)),await P.invalidateQueries({queryKey:["admin-products"]}),await O()}catch(S){console.error("Erro ao deletar produto:",S),alert("Erro ao deletar produto")}finally{z(null)}}},C=i=>{b(i)},A=()=>{b(null),P.invalidateQueries({queryKey:["admin-products"]}),O()};return L&&!k.length?e.jsx("div",{className:"text-center py-8",children:"Carregando produtos..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-title font-bold",children:["Produtos Cadastrados ",v&&e.jsx("span",{className:"text-sm text-gray-400",children:"(atualizando…)"})]}),e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx("input",{type:"text",value:f,onChange:i=>T(i.target.value),placeholder:"Buscar por nome ou SKU...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:outline-none text-sm"}),e.jsx(_e,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18})]})]})}),e.jsx("div",{className:"max-h-[600px] overflow-auto divide-y",children:U.map(i=>{const S=i.thumb_url||i.imagem_url||i.imagens_urls?.[0],c=S?ee(S,"thumbnail"):"";return e.jsxs("div",{className:"flex items-center gap-4 px-4 py-2 hover:bg-gray-50",children:[c?e.jsx("img",{src:c,alt:i.nome??"Produto",className:"w-16 h-16 object-contain rounded bg-gray-50"}):e.jsx("div",{className:"w-16 h-16 flex items-center justify-center bg-gray-100 rounded",children:e.jsx("span",{className:"text-xs text-gray-400",children:"Sem img"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:i.nome}),e.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",i.id]}),e.jsx("div",{className:"flex gap-2 mt-1 flex-wrap",children:i.categorias?.map(m=>e.jsx("span",{className:"text-xs bg-gray-200 px-2 py-1 rounded",children:m},m))}),i.variacoes&&i.variacoes.length>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[i.variacoes.length," variações de cor"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>C(i),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Editar",disabled:h===i.id,children:e.jsx(ts,{size:18})}),e.jsx("button",{onClick:()=>p(i),className:"p-2 text-red-600 hover:bg-red-50 rounded disabled:opacity-50",title:"Excluir",disabled:h===i.id,children:h===i.id?e.jsx("div",{className:"w-[18px] h-[18px] border-2 border-red-600 border-t-transparent rounded-full animate-spin"}):e.jsx(de,{size:18})})]})]},i.id)})}),e.jsxs("div",{className:"p-4 border-t border-gray-200 flex justify-between items-center",children:[e.jsxs("button",{onClick:()=>u(i=>Math.max(0,i-1)),disabled:o===0,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg disabled:opacity-50 hover:bg-gray-200",children:[e.jsx(Ue,{size:18}),"Anterior"]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Página ",o+1]}),e.jsxs("button",{onClick:()=>u(i=>i+1),disabled:k.length<D,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg disabled:opacity-50 hover:bg-gray-200",children:["Próximo",e.jsx(Ae,{size:18})]})]})]}),g&&e.jsx(xs,{product:g,onClose:A})]})}const ps=qe(o=>({message:"",type:"success",isVisible:!1,showToast:(u,x="success")=>o({message:u,type:x,isVisible:!0}),hideToast:()=>o({isVisible:!1})}));function hs(){const[o,u]=n.useState(""),[x,E]=n.useState(!1),[g,b]=n.useState(null),[h,z]=n.useState(""),[f,T]=n.useState(!1),{data:D=[],refetch:P}=me(),{showToast:d}=ps(),k=p=>{const C=p.target.files?.[0];C&&(b(C),z(URL.createObjectURL(C)))},L=async p=>{p.preventDefault(),T(!0);try{const C=o.toLowerCase().replace(/\s+/g,"-");let A="";g&&(A=await Q(g,{folder:"categorias",productId:C,type:"category"})),await Y(B(V,"categorias",C),{id:C,nome:o,productCount:0,popular:x,imagePath:A}),u(""),E(!1),b(null),z(""),P(),d("Categoria criada com sucesso!","success")}catch(C){console.error(C),d("Erro ao criar categoria","error")}finally{T(!1)}},O=async p=>{if(confirm("Tem certeza? Esta ação não pode ser desfeita."))try{p.imagePath&&await ae(p.imagePath),await Ce(B(V,"categorias",p.id)),P(),d("Categoria excluída com sucesso!","success")}catch(C){console.error(C),d("Erro ao excluir categoria","error")}},v=async p=>{try{await ge(B(V,"categorias",p.id),{popular:!p.popular}),P(),d("Status atualizado!","success")}catch(C){console.error(C),d("Não foi possível atualizar","error")}},U=async(p,C)=>{try{const A=await Q(C,{folder:"categorias",productId:p.id,type:"category"});p.imagePath&&await ae(p.imagePath),await ge(B(V,"categorias",p.id),{imagePath:A}),P(),d("Imagem atualizada!","success")}catch(A){console.error(A),d("Não foi possível atualizar a imagem","error")}};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[e.jsx("h2",{className:"text-xl font-title font-bold mb-6",children:"Gerenciar Categorias"}),e.jsxs("form",{onSubmit:L,className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Nome da categoria"}),e.jsx("input",{type:"text",value:o,onChange:p=>u(p.target.value),placeholder:"Nome da categoria",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Imagem da categoria"}),h?e.jsxs("div",{className:"relative w-full h-24",children:[e.jsx("img",{src:h,alt:"Preview",className:"w-full h-full object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>{b(null),z("")},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1",children:e.jsx(K,{size:14})})]}):e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx(W,{size:16}),e.jsx("span",{className:"text-sm",children:"Selecionar imagem"}),e.jsx("input",{type:"file",accept:"image/*",onChange:k,className:"hidden"})]})]})]}),e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x,onChange:p=>E(p.target.checked),className:"w-4 h-4 rounded"}),e.jsx("span",{className:"text-sm font-semibold",children:"Marcar como categoria popular"})]}),e.jsx("button",{type:"submit",disabled:f,className:"w-full bg-primary hover:opacity-90 text-text-primary font-semibold px-6 py-3 rounded-lg disabled:opacity-50",children:f?"Criando...":"Criar Categoria"})]}),e.jsx("div",{className:"space-y-2",children:D.map(p=>e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 bg-gray-50 rounded-lg gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1 w-full sm:w-auto",children:[p.imagePath&&e.jsx("img",{src:ee(p.imagePath,"thumbnail"),alt:p.nome,className:"w-16 h-16 object-cover rounded-lg flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold truncate",children:p.nome}),e.jsxs("p",{className:"text-sm text-gray-500",children:[p.productCount||0," produtos"]}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx("button",{onClick:()=>void v(p),className:`px-3 py-1 rounded border text-xs sm:text-sm ${p.popular?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300"}`,children:p.popular?"Popular ✓":"Marcar como popular"}),e.jsxs("label",{className:"flex items-center gap-2 px-3 py-1 bg-white border border-gray-300 rounded cursor-pointer hover:bg-gray-50",children:[e.jsx(W,{size:14}),e.jsx("span",{className:"text-xs",children:"Alterar imagem"}),e.jsx("input",{type:"file",accept:"image/*",onChange:C=>{const A=C.target.files?.[0];A&&U(p,A)},className:"hidden"})]})]})]})]}),e.jsx("button",{onClick:()=>void O(p),className:"p-2 text-red-600 hover:bg-red-50 rounded self-end sm:self-auto",children:e.jsx(de,{size:18})})]},p.id))})]})}function bs(){const[o,u]=n.useState(!1),[x,E]=n.useState(""),[g,b]=n.useState({companyName:"Rocha Brindes",description:"",address:"",phone:"",email:"",copyright:"© 2024 Rocha Brindes. Todos os direitos reservados.",instagramUrl:"",facebookUrl:"",linkedinUrl:"",youtubeUrl:"",navigation:{title:"Navegação",links:[{label:"Início",url:"/"},{label:"Catálogo",url:"/catalogo"}]}});n.useEffect(()=>{(async()=>{try{const k=await re(B(V,"config","footer"));k.exists()&&b(L=>({...L,...k.data()}))}catch(k){console.error("Erro carregar footer:",k)}})()},[]);const h=(d,k)=>{b({...g,[d]:k})},z=d=>{b({...g,navigation:{...g.navigation,title:d}})},f=(d,k,L)=>{const O=[...g.navigation.links];O[d]={...O[d],[k]:L},b({...g,navigation:{...g.navigation,links:O}})},T=()=>{b({...g,navigation:{...g.navigation,links:[...g.navigation.links,{label:"",url:""}]}})},D=d=>{b({...g,navigation:{...g.navigation,links:g.navigation.links.filter((k,L)=>L!==d)}})},P=async()=>{u(!0),E("");try{await Y(B(V,"config","footer"),g),E("✅ Rodapé atualizado!"),setTimeout(()=>E(""),3e3)}catch{E("❌ Erro ao salvar.")}finally{u(!1)}};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-50 p-2 rounded-lg text-blue-600",children:e.jsx(Ze,{size:24})}),e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Configurar Rodapé"})]}),x&&e.jsx("span",{className:`px-3 py-1 rounded-md text-sm font-bold ${x.includes("✅")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:x})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(Pe,{size:18,className:"text-primary"}),"Informações da Empresa"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Nome da Empresa"}),e.jsx("input",{type:"text",value:g.companyName,onChange:d=>h("companyName",d.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Rocha Brindes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Descrição"}),e.jsx("textarea",{value:g.description,onChange:d=>h("description",d.target.value),rows:3,className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Transformando ideias em brindes únicos..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Copyright"}),e.jsx("input",{type:"text",value:g.copyright,onChange:d=>h("copyright",d.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"© 2024 Rocha Brindes"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(he,{size:18,className:"text-primary"}),"Informações de Contato"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-1",children:[e.jsx($e,{size:14})," Endereço"]}),e.jsx("textarea",{value:g.address,onChange:d=>h("address",d.target.value),rows:2,className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Rua Example, 123 - Centro"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(he,{size:14})," Telefone"]}),e.jsx("input",{type:"text",value:g.phone,onChange:d=>h("phone",d.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"(00) 0000-0000"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(Ve,{size:14})," Email"]}),e.jsx("input",{type:"email",value:g.email,onChange:d=>h("email",d.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"contato@rochabrindes.com"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(Ye,{size:18,className:"text-primary"}),"Redes Sociais"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Instagram"}),e.jsx("input",{type:"url",value:g.instagramUrl,onChange:d=>h("instagramUrl",d.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"https://instagram.com/rochabrindes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Facebook"}),e.jsx("input",{type:"url",value:g.facebookUrl,onChange:d=>h("facebookUrl",d.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"https://facebook.com/rochabrindes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"LinkedIn"}),e.jsx("input",{type:"url",value:g.linkedinUrl,onChange:d=>h("linkedinUrl",d.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"https://linkedin.com/company/rochabrindes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"YouTube"}),e.jsx("input",{type:"url",value:g.youtubeUrl,onChange:d=>h("youtubeUrl",d.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"https://youtube.com/@rochabrindes"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Links de Navegação"}),e.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:opacity-90 text-sm font-semibold",children:[e.jsx(Se,{size:16}),"Adicionar Link"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Título da Seção"}),e.jsx("input",{type:"text",value:g.navigation.title,onChange:d=>z(d.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Navegação"})]}),e.jsx("div",{className:"space-y-3",children:g.navigation.links.map((d,k)=>e.jsxs("div",{className:"flex gap-3 items-start p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1 grid md:grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",value:d.label,onChange:L=>f(k,"label",L.target.value),className:"w-full p-2 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Texto do Link"}),e.jsx("input",{type:"text",value:d.url,onChange:L=>f(k,"url",L.target.value),className:"w-full p-2 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"/caminho ou https://..."})]}),e.jsx("button",{onClick:()=>D(k),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(K,{size:20})})]},k))})]}),e.jsx("div",{className:"pt-4 border-t border-gray-100 flex justify-end",children:e.jsxs("button",{onClick:P,disabled:o,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-bold transition-all disabled:opacity-50",children:[o?e.jsx(Xe,{className:"animate-spin",size:18}):e.jsx(fe,{size:18}),"Salvar Rodapé"]})})]})}function fs(){const[o,u]=n.useState({}),[x,E]=n.useState(!1),[g,b]=n.useState(null),[h,z]=n.useState(""),[f,T]=n.useState(""),[D,P]=n.useState(""),[d,k]=n.useState("");n.useEffect(()=>{L(),O()},[]);const L=async()=>{try{const c=await re(B(V,"config","layout"));if(c.exists()){const m=c.data();u(m),T(m.companyInfo?.title||""),P(m.companyInfo?.description||""),m.whatsapp&&k(m.whatsapp)}}catch(c){console.error("Erro ao carregar assets:",c),z("Erro ao carregar configurações")}},O=async()=>{try{const c=await re(B(V,"config","general"));if(c.exists()){const m=c.data();m.whatsappNumber&&!d&&k(m.whatsappNumber)}}catch(c){console.error("Erro ao carregar WhatsApp:",c)}},v=c=>{const m={};if(c.logo&&(m.logo=c.logo),c.companyInfo){const N={};c.companyInfo.title&&(N.title=c.companyInfo.title),c.companyInfo.description&&(N.description=c.companyInfo.description),(N.title||N.description)&&(m.companyInfo=N)}return c.whatsapp&&(m.whatsapp=c.whatsapp),m},U=async c=>{const m=v(c);await Y(B(V,"config","layout"),m,{merge:!0})},p=async c=>{await Y(B(V,"config","general"),{whatsappNumber:c},{merge:!0})},C=(c,m=3e3)=>{z(c),setTimeout(()=>z(""),m)},A=async()=>{try{const c={...o,companyInfo:D?{title:f,description:D}:void 0,whatsapp:d||void 0};await U(c),d&&await p(d),u(c),C("Informações salvas com sucesso!")}catch(c){console.error(c),C("Erro ao salvar informações")}},i=async c=>{E(!0),b("logo");try{const m=await Q(c,{folder:"layout",type:"logo"});o.logo&&await ae(o.logo);const N={...o,logo:m};await U(N),u(N),C("Logo atualizado com sucesso!")}catch(m){console.error(m),C("Erro ao fazer upload do logo")}finally{E(!1),b(null)}},S=async()=>{if(o.logo)try{await ae(o.logo),await Y(B(V,"config","layout"),{logo:Le()},{merge:!0}),u(c=>{const m={...c};return delete m.logo,m}),C("Logo removido com sucesso!")}catch(c){console.error(c),C("Erro ao remover logo")}};return e.jsxs("div",{className:"space-y-8",children:[h&&e.jsx("div",{className:`p-4 rounded-xl text-center font-semibold shadow-md animate-fade-in ${h.includes("sucesso")?"bg-green-50 text-green-700 border-2 border-green-200":"bg-red-50 text-red-700 border-2 border-red-200"}`,children:h}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(Ie,{size:20,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-title font-bold text-gray-800",children:"Logo Principal"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Logotipo exibido no cabeçalho"})]})]}),o.logo?e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"w-64 h-32 border-2 border-gray-200 rounded-xl p-4 group hover:border-primary transition-colors bg-gray-50",children:e.jsx("img",{src:ee(o.logo,"thumbnail"),alt:"Logo",className:"w-full h-full object-contain"})}),e.jsx("button",{onClick:()=>void S(),className:"absolute -top-3 -right-3 bg-red-500 hover:bg-red-600 text-white rounded-full p-2 shadow-lg transition-all transform hover:scale-110",title:"Remover logo",children:e.jsx(K,{size:18})})]}):e.jsxs("label",{className:"group relative inline-flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-primary/10 to-primary/5 border-2 border-dashed border-primary/30 rounded-xl cursor-pointer hover:border-primary hover:from-primary/20 hover:to-primary/10 transition-all",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-white rounded-lg shadow-sm group-hover:shadow-md transition-shadow",children:g==="logo"?e.jsx(X,{size:20,className:"animate-spin text-primary"}):e.jsx(W,{size:20,className:"text-primary"})}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Adicionar Logo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:c=>{const m=c.target.files?.[0];m&&i(m)},className:"hidden",disabled:x})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Ee,{size:20,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-title font-bold text-gray-800",children:"Configurações"}),e.jsx("p",{className:"text-sm text-gray-500",children:"WhatsApp e outros"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(he,{size:16}),"WhatsApp"]}),e.jsx("input",{type:"text",value:d,onChange:c=>k(c.target.value),placeholder:"Ex: 5589994333316",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none transition-colors"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Apenas números com DDI e DDD"})]})]})]}),e.jsx(bs,{}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>void A(),className:"px-8 py-3 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:"Salvar Configurações"})})]})}const J={hero:{title:"Brindes que Impressionam",subtitle:"Transforme sua marca em experiências memoráveis",ctaText:"Explorar Catálogo"},infoSections:[{title:"Qualidade Garantida",description:"Trabalhamos apenas com fornecedores certificados e produtos de alta qualidade para garantir a satisfação dos nossos clientes.",imagePosition:"right",features:["Produtos certificados e testados","Garantia de qualidade em todos os itens","Entrega rápida e segura"]},{title:"Personalização Completa",description:"Oferecemos personalização completa para que sua marca se destaque. Do design à produção, cuidamos de cada detalhe.",imagePosition:"left",features:["Design exclusivo para sua marca","Múltiplas opções de personalização","Equipe especializada em branding"]},{title:"Atendimento Especializado",description:"Nossa equipe está pronta para ajudar você em cada etapa do processo, desde a escolha do produto até a entrega final.",imagePosition:"right",features:["Consultoria gratuita","Suporte em todo o processo","Pós-venda diferenciado"]}],videos:[],featuredProductIds:[],stats:{products:{value:"500+",label:"Produtos Disponíveis"},clients:{value:"1000+",label:"Clientes Satisfeitos"},years:{value:"15+",label:"Anos de Experiência"}},cta:{title:"Pronto para Começar?",description:"Solicite um orçamento personalizado e descubra como podemos ajudar sua marca",buttonText:"Ver Catálogo Completo"}};function ys(){const[o,u]=n.useState(J),[x,E]=n.useState(!1),[g,b]=n.useState(null),[h,z]=n.useState(null),[f,T]=n.useState(""),[D,P]=n.useState([]),[d,k]=n.useState([]),[L,O]=n.useState(!0),[v,U]=n.useState(!0);n.useEffect(()=>{p(),C()},[]);const p=async()=>{U(!0);try{const t=await re(B(V,"config","landing"));if(t.exists()){const s=t.data();u({hero:s.hero||J.hero,infoSections:s.infoSections||J.infoSections,videos:s.videos||[],featuredProductIds:s.featuredProductIds||[],stats:{products:s.stats?.products||J.stats.products,clients:s.stats?.clients||J.stats.clients,years:s.stats?.years||J.stats.years},cta:s.cta||J.cta}),k(s.featuredProductIds||[])}}catch(t){console.error("Erro ao carregar landing:",t),i("❌ Erro ao carregar dados")}finally{U(!1)}},C=async()=>{O(!0);try{const t=ne(se(V,"produtos"),ce("createdAt","desc"),pe(100)),a=(await be(t)).docs.map(r=>({id:r.id,...r.data()}));P(a)}catch(t){console.error("Erro ao carregar produtos:",t),i("❌ Erro ao carregar produtos")}finally{O(!1)}},A=async()=>{E(!0);try{await Y(B(V,"config","landing"),{...o,featuredProductIds:d}),i("✅ Landing page atualizada!")}catch(t){i("❌ Erro ao salvar"),console.error(t)}finally{E(!1)}},i=t=>{T(t),setTimeout(()=>T(""),3e3)},S=t=>{k(s=>s.includes(t)?s.filter(a=>a!==t):s.length>=10?s:[...s,t])},c=async(t,s)=>{z(s);try{const a=await Q(t,{folder:"landing",type:"banner"});y(s,"imageUrl",a),i("✅ Imagem enviada!")}catch(a){console.error("Erro ao enviar imagem:",a),i("❌ Erro ao enviar imagem")}finally{z(null)}},m=async(t,s,a,r)=>{b("video");try{const j={url:t,title:a,description:r};s&&s.trim()&&(j.thumbnail=s),u(M=>({...M,videos:[...M.videos,j]})),i("✅ Vídeo adicionado!")}catch(j){console.error("Erro ao adicionar vídeo:",j),i("❌ Erro ao adicionar")}finally{b(null)}},N=t=>{u(s=>({...s,videos:s.videos.filter((a,r)=>r!==t)})),i("✅ Vídeo removido!")},H=()=>{const t={title:"Nova Seção",description:"Descrição da seção",imagePosition:"right",features:["Item 1","Item 2","Item 3"]};u(s=>({...s,infoSections:[...s.infoSections||[],t]})),i("✅ Seção adicionada!")},G=t=>{u(s=>({...s,infoSections:s.infoSections?.filter((a,r)=>r!==t)})),i("✅ Seção removida!")},y=(t,s,a)=>{u(r=>({...r,infoSections:r.infoSections?.map((j,M)=>M===t?{...j,[s]:a}:j)}))},R=t=>{u(s=>({...s,infoSections:s.infoSections?.map((a,r)=>r===t?{...a,features:[...a.features||[],"Novo item"]}:a)}))},l=(t,s)=>{u(a=>({...a,infoSections:a.infoSections?.map((r,j)=>j===t?{...r,features:r.features?.filter((M,$)=>$!==s)}:r)}))},w=(t,s,a)=>{u(r=>({...r,infoSections:r.infoSections?.map((j,M)=>M===t?{...j,features:j.features?.map(($,q)=>q===s?a:$)}:j)}))},I=(t,s)=>{if(!o.infoSections)return;const a=s==="up"?t-1:t+1;if(a<0||a>=o.infoSections.length)return;const r=[...o.infoSections],j=r[t];r[t]=r[a],r[a]=j,u(M=>({...M,infoSections:r}))};return v?e.jsxs("div",{className:"flex items-center justify-center py-20",children:[e.jsx(X,{className:"animate-spin text-primary",size:48}),e.jsx("span",{className:"ml-4 text-xl text-gray-600",children:"Carregando..."})]}):e.jsxs("div",{className:"space-y-8",children:[f&&e.jsx("div",{className:`p-4 rounded-xl text-center font-semibold ${f.includes("✅")?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:f}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/10 rounded-lg flex items-center justify-center",children:e.jsx(os,{size:20,className:"text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Seção Hero (Principal)"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Primeira impressão do site"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Título Principal"}),e.jsx("input",{type:"text",value:o.hero?.title||"",onChange:t=>u(s=>({...s,hero:{...s.hero,title:t.target.value}})),className:"w-full px-4 py-3 border-2 rounded-xl focus:border-primary outline-none",placeholder:"Ex: Brindes que Impressionam"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Subtítulo"}),e.jsx("input",{type:"text",value:o.hero?.subtitle||"",onChange:t=>u(s=>({...s,hero:{...s.hero,subtitle:t.target.value}})),className:"w-full px-4 py-3 border-2 rounded-xl focus:border-primary outline-none",placeholder:"Ex: Transforme sua marca em experiências memoráveis"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Texto do Botão Principal"}),e.jsx("input",{type:"text",value:o.hero?.ctaText||"",onChange:t=>u(s=>({...s,hero:{...s.hero,ctaText:t.target.value}})),className:"w-full px-4 py-3 border-2 rounded-xl focus:border-primary outline-none",placeholder:"Ex: Explorar Catálogo"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-500/10 rounded-lg flex items-center justify-center",children:e.jsx(ve,{size:20,className:"text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Seções de Informação"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Blocos informativos ao longo da página"})]})]}),e.jsxs("button",{onClick:H,className:"flex items-center gap-2 px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600",children:[e.jsx(Se,{size:18}),"Adicionar Seção"]})]}),o.infoSections&&o.infoSections.length>0?e.jsx("div",{className:"space-y-6",children:o.infoSections.map((t,s)=>e.jsxs("div",{className:"border-2 rounded-xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-bold text-lg",children:["Seção ",s+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s>0&&e.jsx("button",{onClick:()=>I(s,"up"),className:"p-2 hover:bg-gray-100 rounded-lg",title:"Mover para cima",children:e.jsx(as,{size:18})}),s<o.infoSections.length-1&&e.jsx("button",{onClick:()=>I(s,"down"),className:"p-2 hover:bg-gray-100 rounded-lg",title:"Mover para baixo",children:e.jsx(ss,{size:18})}),e.jsx("button",{onClick:()=>G(s),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:e.jsx(de,{size:18})})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Título"}),e.jsx("input",{type:"text",value:t.title,onChange:a=>y(s,"title",a.target.value),className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",placeholder:"Título da seção"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Posição da Imagem"}),e.jsxs("select",{value:t.imagePosition||"right",onChange:a=>y(s,"imagePosition",a.target.value),className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",children:[e.jsx("option",{value:"left",children:"Esquerda"}),e.jsx("option",{value:"right",children:"Direita"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Descrição"}),e.jsx("textarea",{value:t.description,onChange:a=>y(s,"description",a.target.value),rows:3,className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none resize-none",placeholder:"Descrição detalhada da seção"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Imagem (opcional)"}),e.jsxs("div",{className:"flex gap-4",children:[t.imageUrl&&e.jsxs("div",{className:"relative w-32 h-32 border-2 rounded-lg overflow-hidden",children:[e.jsx("img",{src:ee(t.imageUrl,"thumbnail"),alt:"Preview",className:"w-full h-full object-cover"}),e.jsx("button",{onClick:()=>y(s,"imageUrl",void 0),className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full hover:bg-red-600",children:e.jsx(K,{size:14})})]}),e.jsxs("label",{className:"flex-1 flex flex-col items-center justify-center border-2 border-dashed rounded-lg p-4 cursor-pointer hover:border-primary hover:bg-primary/5 transition-colors",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:a=>{const r=a.target.files?.[0];r&&c(r,s)},className:"hidden",disabled:h===s}),h===s?e.jsx(X,{className:"animate-spin text-primary mb-2",size:32}):e.jsx(Ie,{className:"text-gray-400 mb-2",size:32}),e.jsx("span",{className:"text-sm text-gray-600 text-center",children:h===s?"Enviando...":"Clique para fazer upload"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-semibold",children:"Itens em Destaque"}),e.jsx("button",{onClick:()=>R(s),className:"text-sm text-primary hover:underline",children:"+ Adicionar Item"})]}),e.jsx("div",{className:"space-y-2",children:t.features?.map((a,r)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:a,onChange:j=>w(s,r,j.target.value),className:"flex-1 px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",placeholder:`Item ${r+1}`}),e.jsx("button",{onClick:()=>l(s,r),className:"px-3 text-red-500 hover:bg-red-50 rounded-lg",children:e.jsx(K,{size:18})})]},r))})]})]},s))}):e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl",children:[e.jsx(ve,{className:"mx-auto text-gray-400 mb-3",size:48}),e.jsx("p",{className:"text-gray-600 font-semibold",children:"Nenhuma seção adicionada"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:'Clique em "Adicionar Seção" para começar'})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500/10 rounded-lg flex items-center justify-center",children:e.jsx(ie,{size:20,className:"text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Produtos em Destaque"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Selecione até 10 produtos para o carrossel"})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm font-semibold text-gray-700",children:["Selecionados: ",e.jsx("span",{className:"text-primary",children:d.length}),"/10"]})}),L?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(X,{className:"animate-spin text-primary",size:32}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando produtos..."})]}):D.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl",children:[e.jsx(ie,{className:"mx-auto text-gray-400 mb-3",size:48}),e.jsx("p",{className:"text-gray-600 font-semibold",children:"Nenhum produto cadastrado"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Cadastre produtos primeiro na aba Produtos"})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 max-h-[600px] overflow-y-auto p-2",children:D.map(t=>{const s=d.includes(t.id),a=t.thumb_url||t.imagem_url||t.variacoes?.[0]?.thumb_url,r=a?ee(a,"thumbnail"):"";return e.jsxs("button",{onClick:()=>S(t.id),disabled:!s&&d.length>=10,className:`relative group border-2 rounded-xl overflow-hidden transition-all ${s?"border-primary ring-2 ring-primary/20":"border-gray-200 hover:border-gray-300"} ${!s&&d.length>=10?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("div",{className:"aspect-square bg-gray-100",children:r?e.jsx("img",{src:r,alt:t.nome,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ie,{size:24,className:"text-gray-400"})})}),e.jsxs("div",{className:"p-2 bg-white",children:[e.jsx("p",{className:"text-xs font-semibold line-clamp-2 text-left",children:t.nome}),e.jsxs("p",{className:"text-[10px] text-gray-500 text-left mt-1",children:["SKU: ",t.id]})]}),s&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute top-2 right-2 bg-primary text-white rounded-full p-1.5 shadow-lg",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("div",{className:"absolute top-2 left-2 bg-white text-primary rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold shadow-lg",children:d.indexOf(t.id)+1})]})]},t.id)})}),d.length>=10&&e.jsx("p",{className:"text-sm text-orange-600 mt-4 text-center font-semibold",children:"Limite máximo de produtos atingido"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Ke,{size:20,className:"text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Estatísticas"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Números da empresa"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Produtos - Valor"}),e.jsx("input",{type:"text",value:o.stats?.products?.value||"",onChange:t=>u(s=>({...s,stats:{...s.stats,products:{...s.stats.products,value:t.target.value}}})),className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",placeholder:"500+"}),e.jsx("label",{className:"block text-sm font-semibold mb-2 mt-2",children:"Produtos - Texto"}),e.jsx("input",{type:"text",value:o.stats?.products?.label||"",onChange:t=>u(s=>({...s,stats:{...s.stats,products:{...s.stats.products,label:t.target.value}}})),className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",placeholder:"Produtos Disponíveis"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Clientes - Valor"}),e.jsx("input",{type:"text",value:o.stats?.clients?.value||"",onChange:t=>u(s=>({...s,stats:{...s.stats,clients:{...s.stats.clients,value:t.target.value}}})),className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",placeholder:"1000+"}),e.jsx("label",{className:"block text-sm font-semibold mb-2 mt-2",children:"Clientes - Texto"}),e.jsx("input",{type:"text",value:o.stats?.clients?.label||"",onChange:t=>u(s=>({...s,stats:{...s.stats,clients:{...s.stats.clients,label:t.target.value}}})),className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",placeholder:"Clientes Satisfeitos"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Experiência - Valor"}),e.jsx("input",{type:"text",value:o.stats?.years?.value||"",onChange:t=>u(s=>({...s,stats:{...s.stats,years:{...s.stats.years,value:t.target.value}}})),className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",placeholder:"15+"}),e.jsx("label",{className:"block text-sm font-semibold mb-2 mt-2",children:"Experiência - Texto"}),e.jsx("input",{type:"text",value:o.stats?.years?.label||"",onChange:t=>u(s=>({...s,stats:{...s.stats,years:{...s.stats.years,label:t.target.value}}})),className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",placeholder:"Anos de Experiência"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx(ls,{size:20,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Vídeos de Produção"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Exibidos abaixo das estatísticas"})]})]}),e.jsx(js,{onSubmit:m,loading:g==="video"}),o.videos.length>0&&e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4 mt-6",children:o.videos.map((t,s)=>e.jsxs("div",{className:"border-2 rounded-xl overflow-hidden group",children:[e.jsx("div",{className:"relative aspect-video bg-gray-900",children:e.jsx("video",{src:t.url,className:"w-full h-full object-cover",muted:!0})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-bold mb-1",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:t.description}),e.jsx("button",{onClick:()=>N(s),className:"text-red-500 text-sm hover:underline",children:"Remover"})]})]},s))})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-pink-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Pe,{size:20,className:"text-pink-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Call to Action Final"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Seção de conversão no final da página"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Título"}),e.jsx("input",{type:"text",value:o.cta.title,onChange:t=>u(s=>({...s,cta:{...s.cta,title:t.target.value}})),className:"w-full px-4 py-3 border-2 rounded-xl focus:border-primary outline-none",placeholder:"Pronto para Começar?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Descrição"}),e.jsx("textarea",{value:o.cta.description,onChange:t=>u(s=>({...s,cta:{...s.cta,description:t.target.value}})),rows:3,className:"w-full px-4 py-3 border-2 rounded-xl focus:border-primary outline-none resize-none",placeholder:"Solicite um orçamento personalizado..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Texto do Botão"}),e.jsx("input",{type:"text",value:o.cta.buttonText,onChange:t=>u(s=>({...s,cta:{...s.cta,buttonText:t.target.value}})),className:"w-full px-4 py-3 border-2 rounded-xl focus:border-primary outline-none",placeholder:"Ver Catálogo Completo"})]})]})]}),e.jsxs("button",{onClick:A,disabled:x,className:"w-full flex items-center justify-center gap-3 bg-primary text-white py-4 rounded-xl font-bold hover:opacity-90 disabled:opacity-50",children:[x?e.jsx(X,{className:"animate-spin",size:20}):e.jsx(fe,{size:20}),"Salvar Landing Page"]})]})}function js({onSubmit:o,loading:u}){const[x,E]=n.useState(""),[g,b]=n.useState(""),[h,z]=n.useState(""),[f,T]=n.useState(""),D=()=>{x&&h&&f&&(o(x,g,h,f),E(""),b(""),z(""),T(""))};return e.jsxs("div",{className:"border-2 border-dashed rounded-xl p-6 space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Título"}),e.jsx("input",{type:"text",value:h,onChange:P=>z(P.target.value),className:"w-full px-4 py-2 border-2 rounded-lg outline-none focus:border-primary",placeholder:"Ex: Processo de Personalização"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Descrição"}),e.jsx("input",{type:"text",value:f,onChange:P=>T(P.target.value),className:"w-full px-4 py-2 border-2 rounded-lg outline-none focus:border-primary",placeholder:"Breve descrição do vídeo"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"URL do Vídeo"}),e.jsx("input",{type:"url",value:x,onChange:P=>E(P.target.value),className:"w-full px-4 py-2 border-2 rounded-lg outline-none focus:border-primary",placeholder:"https://seusite.com/videos/video-producao.mp4"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cole a URL completa do vídeo hospedado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"URL da Thumbnail (opcional)"}),e.jsx("input",{type:"url",value:g,onChange:P=>b(P.target.value),className:"w-full px-4 py-2 border-2 rounded-lg outline-none focus:border-primary",placeholder:"https://seusite.com/videos/thumb-producao.jpg"})]})]}),e.jsx("button",{onClick:D,disabled:!x||!h||!f||u,className:"w-full bg-primary text-white py-3 rounded-lg font-semibold disabled:opacity-50",children:u?"Adicionando...":"Adicionar Vídeo"})]})}const vs=o=>{const u=x=>{const E=x.split("/").filter(Boolean);let b=(E[E.length-1]||"geral").replace(/-/g," ").trim();b=b.replace(/\b\w/g,z=>z.toUpperCase());const h=b.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");return{name:b,id:h}};try{const x=new URL(o);return u(x.pathname)}catch{return u(o)}},ue="https://imagens.bjeslee19.workers.dev";function Ns(){const[o,u]=n.useState(""),[x,E]=n.useState(!1),[g,b]=n.useState(""),[h,z]=n.useState({current:0,total:0}),[f,T]=n.useState([]),[D,P]=n.useState(!1),[d,k]=n.useState(!1),[L,O]=n.useState(null),[v,U]=n.useState(null),[p,C]=n.useState(null),{data:A=[]}=me(),i=async()=>{if(!o.trim()){b("Insira uma URL válida");return}E(!0),b("Iniciando extração..."),z({current:0,total:0}),T([]);try{const l=vs(o);C(l),console.log("[IMPORTER] Categoria:",l);const w=await fetch(`${ue}/scrape-products`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:o})});if(!w.ok){const s=await w.text();throw console.error("[IMPORTER] Erro na resposta:",s),new Error(`Erro ${w.status}: ${s}`)}const{productUrls:I}=await w.json();z({current:0,total:I.length}),b(`Encontrados ${I.length} produtos em "${l.name}"`);const t=[];for(let s=0;s<I.length;s++){const a=I[s];z({current:s+1,total:I.length}),b(`Processando ${s+1}/${I.length}`);try{const r=await fetch(`${ue}/scrape-product-detail`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:a})});if(r.ok){const j=await r.json();t.push({...j,selected:!0,categorias:[l.name],destaque:!1})}else console.error(`[IMPORTER] Erro ${r.status} ao processar ${a}`)}catch(r){console.error(`[IMPORTER] Erro ao processar ${a}:`,r)}await new Promise(r=>setTimeout(r,800))}T(t),P(!0),b(`✅ ${t.length} produtos extraídos de "${l.name}"!`)}catch(l){console.error("[IMPORTER] Erro geral:",l),b(`❌ Erro: ${l instanceof Error?l.message:"Erro ao extrair produtos"}`)}finally{E(!1)}},S=l=>{T(w=>w.map((I,t)=>t===l?{...I,selected:!I.selected}:I))},c=()=>{const l=f.every(w=>w.selected);T(w=>w.map(I=>({...I,selected:!l})))},m=l=>{T(w=>w.filter((I,t)=>t!==l))},N=l=>{O(l),U({...f[l]})},H=()=>{L!==null&&v&&(T(l=>l.map((w,I)=>I===L?v:w)),O(null),U(null))},G=()=>{O(null),U(null)},y=async()=>{const l=f.filter(I=>I.selected);if(l.length===0){b("❌ Nenhum produto selecionado");return}if(!p){b("❌ Categoria não identificada");return}k(!0),b("Salvando produtos...");let w=0;try{const I=B(V,"categorias",p.id);(await re(I)).exists()||(await Y(I,{id:p.id,nome:p.name,productCount:0,popular:!1,createdAt:xe()}),console.log("[IMPORTER] Categoria criada:",p.name));for(let s=0;s<l.length;s++){const a=l[s];z({current:s+1,total:l.length}),b(`Salvando ${s+1}/${l.length}: ${a.nome}`);try{const r=[],j={};for(const[q,F]of Object.entries(a.imagensPorCor||{})){j[q]=[],console.log(`[IMPORTER] Processando cor ${q}: ${F.length} imagens`);for(let Z=0;Z<Math.min(F.length,5);Z++){const oe=F[Z];try{console.log(`[IMPORTER] Baixando via proxy: ${oe}`);const te=await fetch(`${ue}/proxy-image`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:oe})});if(!te.ok){console.error(`[IMPORTER] Erro no proxy: ${te.status}`);continue}const ye=await te.blob(),ze=oe.split(".").pop()?.split("?")[0]||"jpg",je=new File([ye],`${a.id}_${q}_${Z}.${ze}`,{type:ye.type});console.log(`[IMPORTER] Upload para Cloudflare: ${je.name}`);const le=await Q(je,{folder:`produtos/${a.id}/variacoes`,productId:a.id,variation:q,type:"variation"});j[q].push(le),r.includes(le)||r.push(le),console.log(`[IMPORTER] ✓ Upload OK: ${le}`)}catch(te){console.error(`[IMPORTER] Erro ao processar ${oe}:`,te)}}}if(r.length===0){console.warn(`[IMPORTER] Produto ${a.id} sem imagens, pulando...`);continue}const M=a.cores.map(q=>{const F=j[q]||[];return{cor:q,imagem_url:F[0]||r[0],thumb_url:F[0]||r[0]}});let $=r[0];if(a.imagemPrincipal)for(const[q,F]of Object.entries(a.imagensPorCor)){const Z=F.indexOf(a.imagemPrincipal);if(Z!==-1&&j[q]?.[Z]){$=j[q][Z];break}}else{const q=j.PRETO||j["PRETO FOSCO"];q?.[0]?$=q[0]:a.cores[0]&&j[a.cores[0]]&&($=j[a.cores[0]][0]||r[0])}await Y(B(se(V,"produtos"),a.id),{id:a.id,nome:a.nome,descricao:a.descricao,categorias:a.categorias,destaque:a.destaque,variacoes:M,imagem_url:$,thumb_url:$,imagens_urls:r,thumbs_urls:r,createdAt:xe()}),console.log(`[IMPORTER] ✓ Produto ${a.id} salvo com sucesso`),w++}catch(r){console.error(`[IMPORTER] Erro ao salvar ${a.id}:`,r)}}b(`✅ ${w} produtos salvos em "${p.name}"!`),T([]),P(!1),u(""),C(null)}catch(I){console.error("[IMPORTER] Erro ao salvar:",I),b("❌ Erro ao salvar produtos")}finally{k(!1)}},R=f.filter(l=>l.selected).length;return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Je,{className:"text-primary",size:24}),e.jsx("h3",{className:"text-lg font-bold",children:"Importar produtos via URL"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"url",value:o,onChange:l=>u(l.target.value),placeholder:"https://www.xbzbrindes.com.br/brindes/Bar-e-Bebidas",className:"flex-1 px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-primary focus:outline-none",disabled:x}),e.jsx("button",{onClick:i,disabled:x||!o.trim(),className:"px-6 py-2 bg-primary text-white rounded-lg font-semibold hover:opacity-90 disabled:opacity-50 flex items-center gap-2",children:x?e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"animate-spin",size:18}),"Extraindo..."]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{size:18}),"Extrair"]})})]}),x&&h.total>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${h.current/h.total*100}%`}})}),e.jsxs("p",{className:"text-sm text-gray-600 text-center",children:[h.current," / ",h.total]})]}),g&&e.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-lg ${g.includes("✅")?"bg-green-50 text-green-700":g.includes("❌")?"bg-red-50 text-red-700":"bg-blue-50 text-blue-700"}`,children:[g.includes("✅")&&e.jsx(He,{size:18}),g.includes("❌")&&e.jsx(Ge,{size:18}),!g.includes("✅")&&!g.includes("❌")&&e.jsx(X,{className:"animate-spin",size:18}),e.jsx("span",{className:"text-sm font-semibold",children:g})]}),f.length>0&&!x&&e.jsxs("button",{onClick:()=>P(!0),className:"w-full px-4 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:opacity-90 flex items-center justify-center gap-2",children:[e.jsx(Fe,{size:18}),"Ver ",f.length," produtos (",R," selecionados)"]})]})]}),D&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold",children:["Produtos (",f.length,")"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsxs("span",{children:[R," selecionados"]}),p&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{className:"font-semibold text-primary",children:p.name})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:c,className:"px-3 py-1.5 text-sm border rounded-lg hover:bg-gray-50",children:[f.every(l=>l.selected)?"Desmarcar":"Selecionar"," todos"]}),e.jsx("button",{onClick:()=>P(!1),className:"p-2 rounded-full hover:bg-gray-100",children:e.jsx(K,{size:20})})]})]}),e.jsx("div",{className:"overflow-y-auto flex-1 p-6",children:e.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:f.map((l,w)=>e.jsx("div",{className:`border-2 rounded-lg p-4 ${l.selected?"border-primary bg-primary/5":"border-gray-200 opacity-60"}`,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:l.selected,onChange:()=>S(w),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden mb-2",children:e.jsx("img",{src:l.imagemPrincipal||l.imagens[0]||"",alt:l.nome,className:"w-full h-full object-contain"})}),e.jsx("h3",{className:"font-bold text-sm mb-1",children:l.nome}),e.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["SKU: ",l.id]}),l.categorias.length>0&&e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"text-xs bg-primary/20 text-primary px-2 py-1 rounded",children:l.categorias[0]})}),l.cores.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:l.cores.slice(0,3).map((I,t)=>e.jsx("span",{className:"text-[10px] bg-gray-200 px-2 py-1 rounded",children:I},t))}),e.jsxs("p",{className:"text-xs text-gray-500",children:[l.imagens.length," imagens"]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsxs("button",{onClick:()=>N(w),className:"flex-1 px-2 py-1.5 text-xs border border-blue-500 text-blue-500 rounded hover:bg-blue-50 flex items-center justify-center gap-1",children:[e.jsx(rs,{size:12}),"Editar"]}),e.jsx("button",{onClick:()=>m(w),className:"px-2 py-1.5 text-xs border border-red-500 text-red-500 rounded hover:bg-red-50",children:e.jsx(de,{size:12})})]})]})]})},w))})}),e.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t",children:[e.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Fechar"}),e.jsxs("button",{onClick:y,disabled:d||R===0,className:"px-6 py-2 bg-green-500 text-white rounded-lg font-semibold hover:opacity-90 disabled:opacity-50 flex items-center gap-2",children:[e.jsx(fe,{size:18}),"Salvar ",R]})]})]})}),L!==null&&v&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-[60] flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b bg-gradient-to-r from-primary/5 to-primary/10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Editar Produto"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Revise e ajuste as informações do produto"})]}),e.jsx("button",{onClick:G,className:"p-2 rounded-full hover:bg-white/50 transition-colors",children:e.jsx(K,{size:20})})]}),e.jsx("div",{className:"overflow-y-auto flex-1 p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2 text-gray-700",children:"Nome"}),e.jsx("input",{type:"text",value:v.nome,onChange:l=>U({...v,nome:l.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2 text-gray-700",children:"SKU/Código"}),e.jsx("input",{type:"text",value:v.id,disabled:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg bg-gray-50 text-gray-500 cursor-not-allowed"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"O código não pode ser alterado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2 text-gray-700",children:"Descrição"}),e.jsx("textarea",{value:v.descricao,onChange:l=>U({...v,descricao:l.target.value}),rows:4,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all resize-none"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[v.descricao.length," caracteres"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2 text-gray-700",children:"Categoria"}),e.jsx("div",{className:"p-4 bg-primary/5 border-2 border-primary/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-base font-semibold text-primary",children:v.categorias[0]||"Nenhuma categoria"}),p&&e.jsx("span",{className:"text-xs bg-primary/20 text-primary px-2 py-1 rounded-full",children:"Da URL"})]})}),A.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Categorias adicionais:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:A.filter(l=>!v.categorias.includes(l.nome)).map(l=>e.jsxs("button",{onClick:()=>U({...v,categorias:[...v.categorias,l.nome]}),className:"px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 border rounded-lg",children:["+ ",l.nome]},l.id))})]}),v.categorias.length>1&&e.jsx("div",{className:"mt-3",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:v.categorias.slice(1).map((l,w)=>e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-primary/10 border border-primary/30 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:l}),e.jsx("button",{onClick:()=>U({...v,categorias:v.categorias.filter(I=>I!==l)}),className:"text-red-500 hover:text-red-700",children:e.jsx(K,{size:14})})]},w))})})]}),e.jsx("div",{className:"p-4 bg-yellow-50 border-2 border-yellow-200 rounded-lg",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:v.destaque,onChange:l=>U({...v,destaque:l.target.checked}),className:"w-5 h-5 rounded"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-bold",children:"Produto em destaque"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Aparece na página inicial"})]})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"text-sm font-bold",children:"Cores e Imagens"}),e.jsxs("span",{className:"text-xs bg-gray-200 px-3 py-1 rounded-full font-semibold",children:[v.cores.length," cores • ",v.imagens.length," imagens"]})]}),e.jsx("div",{className:"space-y-4",children:Object.entries(v.imagensPorCor).sort((l,w)=>l[0].localeCompare(w[0])).map(([l,w])=>e.jsxs("div",{className:"border-2 border-primary/30 rounded-lg p-4 bg-primary/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-bold capitalize",children:l}),e.jsx("span",{className:"text-xs bg-primary/20 px-2 py-1 rounded-full",children:w.length})]}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:w.slice(0,8).map((I,t)=>e.jsxs("div",{className:"relative aspect-square bg-white rounded-lg overflow-hidden border-2",children:[e.jsx("img",{src:I,alt:`${l} ${t+1}`,className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute bottom-1 right-1 bg-primary text-white px-2 py-0.5 rounded text-xs",children:["#",t+1]})]},t))})]},l))})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t",children:[e.jsx("button",{onClick:G,className:"px-6 py-2 border rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsxs("button",{onClick:H,className:"px-6 py-2 bg-primary text-white rounded-lg font-semibold hover:opacity-90 flex items-center gap-2",children:[e.jsx(We,{size:18}),"Salvar"]})]})]})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-[70] flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl p-8 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-center",children:"Salvando..."}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-4",children:e.jsx("div",{className:"bg-green-500 h-3 rounded-full transition-all",style:{width:`${h.current/h.total*100}%`}})}),e.jsxs("p",{className:"text-center",children:[h.current," / ",h.total]})]})})]})}function Ms(){const[o,u]=n.useState("products"),[x,E]=n.useState(!1),g=async()=>{await Me(De)},b=[{id:"products",label:"Produtos",icon:ie},{id:"categories",label:"Categorias",icon:Be},{id:"landing",label:"Página Inicial",icon:Qe},{id:"config",label:"Configurações",icon:Ee}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40",children:e.jsxs("div",{className:"container mx-auto px-4 py-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-title font-bold",children:"Painel Admin"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>E(!x),className:"lg:hidden p-2 hover:bg-gray-100 rounded-lg",children:x?e.jsx(K,{size:24}):e.jsx(es,{size:24})}),e.jsxs("button",{onClick:g,className:"hidden sm:flex items-center gap-2 bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:[e.jsx(Ne,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Sair"})]}),e.jsx("button",{onClick:g,className:"sm:hidden p-2 text-red-500 hover:bg-red-50 rounded-lg",children:e.jsx(Ne,{size:20})})]})]}),e.jsx("nav",{className:`${x?"block":"hidden"} lg:block mt-4 lg:mt-0`,children:e.jsx("div",{className:"flex flex-col lg:flex-row gap-2 lg:gap-4 lg:mt-4",children:b.map(h=>{const z=h.icon;return e.jsxs("button",{onClick:()=>{u(h.id),E(!1)},className:`flex items-center gap-3 px-4 py-3 lg:py-2 rounded-lg font-semibold transition-all ${o===h.id?"bg-primary text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(z,{size:20}),e.jsx("span",{children:h.label})]},h.id)})})})]})}),e.jsxs("main",{className:"container mx-auto px-4 py-6 lg:py-8",children:[o==="products"&&e.jsxs("div",{className:"space-y-6 lg:space-y-8",children:[e.jsx(Ns,{}),e.jsx(us,{}),e.jsx(gs,{})]}),o==="categories"&&e.jsx(hs,{}),o==="landing"&&e.jsx(ys,{}),o==="config"&&e.jsx(fs,{})]})]})}export{Ms as default};
