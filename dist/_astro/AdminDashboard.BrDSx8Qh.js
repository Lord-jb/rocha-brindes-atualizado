import{q as te,e as re,f as se,a as _,c as ce,j as e,s as X,d as O,h as Ne,u as le,i as we,l as ie,k as Ce,m as pe,g as oe,n as ke,b as Se}from"./Providers.C6-WhYTD.js";import{r as c}from"./index.y5FlbPQu.js";import{c as R,u as he,d as Q,o as Z,e as J,C as Ie,a as ze,f as Ee,b as Pe}from"./cloudflare.DxirT_zr.js";import{X as G}from"./x.FywpjzLA.js";import{S as De,G as Le}from"./search.BiY3cSv4.js";import{T as de}from"./trash-2.Cl_gXIAN.js";import{P as ne,M as Te,a as Ae}from"./phone.Dp_9HefM.js";import{P as be}from"./plus.Dnp0UOQG.js";import{P as ae}from"./package.DD7bXVUJ.js";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=R("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=R("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=R("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=R("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=R("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=R("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=R("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=R("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=R("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=R("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=R("MoveDown",[["path",{d:"M8 18L12 22L16 18",key:"cskvfv"}],["path",{d:"M12 2V22",key:"r89rzk"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=R("MoveUp",[["path",{d:"M8 6L12 2L16 6",key:"1yvkyx"}],["path",{d:"M12 2V22",key:"r89rzk"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=R("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=R("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=R("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=R("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=R("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=R("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=R("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);function me(){return he({queryKey:["categories"],queryFn:async()=>{const r=te(se(_,"categorias"),re("nome"));return(await ce(r)).docs.map(u=>({id:u.id,...u.data()}))},staleTime:300*1e3,refetchOnMount:!0,refetchOnWindowFocus:!1})}const Ke="1t7T-5mU4ET0kjqd8x_sXlEwunwogCBrlqFnYpVaoyvE",He="AIzaSyAWUmt2UDeXxY1my2ajGU5bAMSjuU0L14o",We="produtos!A:Z";function ge(r){return r.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toUpperCase().trim()}function Qe(r,d){if(!r||!d)return r;const u=new RegExp(`\\s+${d}$`,"i");return r.replace(u,"").trim()}async function Ye(r){const d=r.trim();if(!d)return null;const u=d.split("_"),C=u.length>2?u.slice(0,u.length-1).join("_"):d,x=`https://sheets.googleapis.com/v4/spreadsheets/${Ke}/values/${encodeURIComponent(We)}?key=${He}`,N=await fetch(x);if(!N.ok)throw console.error("Erro ao buscar planilha:",await N.text()),new Error("Não foi possível acessar a planilha do Google Sheets");const E=(await N.json()).values||[];if(!E.length)return null;const[f,...T]=E;console.log("Header da planilha:",f),console.log("Primeira linha de dados:",T[0]);const z=b=>ge(b||""),k=f.findIndex(b=>{const j=z(b);return["ID","CODIGO","CÓDIGO","SKU","COD","CODE"].includes(j)}),i=f.findIndex(b=>{const j=z(b);return["NOME","PRODUTO","DESCRICAO_CURTA","NAME"].includes(j)}),y=f.findIndex(b=>{const j=z(b);return["DESCRICAO","DESCRIÇÃO","DESC","DESCRIPTION"].includes(j)}),P=f.findIndex(b=>{const j=z(b);return["COR","CORES","VARIACAO","VARIACOES","VARIAÇÃO","COLOR"].includes(j)}),U=f.findIndex(b=>{const j=z(b);return["CATEGORIA","CATEGORIAS","GRUPO","CATEGORY"].includes(j)}),A=f.findIndex(b=>{const j=z(b);return["DESTAQUE","HIGHLIGHT","FEATURED"].includes(j)});if(k===-1)throw console.error("Colunas disponíveis:",f.map((b,j)=>`${j}: ${b}`)),new Error(`Coluna de código/SKU não encontrada na planilha. Colunas disponíveis: ${f.join(", ")}`);const M=T.filter(b=>{const j=(b[k]||"").trim();return j?j===C||j.startsWith(C+"_"):!1});if(!M.length)return null;let m="",w="";const D=new Set;let l=!1;const n=[];for(const b of M){const j=i>=0?(b[i]||"").trim():"",K=y>=0?(b[y]||"").trim():"",$=P>=0?(b[P]||"").trim():"",p=U>=0?(b[U]||"").trim():"",S=A>=0?(b[A]||"").trim():"";!m&&j&&(m=$?Qe(j,$):j),!w&&K&&(w=K),p&&p.split(",").map(L=>L.trim()).filter(Boolean).forEach(L=>D.add(L)),typeof S=="string"&&["SIM","TRUE","1","YES","S"].includes(ge(S))&&(l=!0),$&&!n.find(L=>L.cor===$)&&n.push({cor:$})}const g=Array.from(D);return{baseSku:C,nome:m||C,descricao:w,categorias:g,destaque:l,variacoes:n}}function Ze(){const[r,d]=c.useState(""),[u,C]=c.useState(""),[x,N]=c.useState(""),[h,E]=c.useState(!1),[f,T]=c.useState([]),[z,k]=c.useState(!1),[i,y]=c.useState(null),[P,U]=c.useState(""),[A,M]=c.useState([]),[m,w]=c.useState(""),[D,l]=c.useState(""),[n,g]=c.useState(!1),[b,j]=c.useState(""),[K,$]=c.useState(!1),{data:p=[]}=me(),S=t=>{const o=t.target.files?.[0];o&&(y(o),U(URL.createObjectURL(o)))},L=()=>{if(m.trim()){const t=m.trim(),o=[...A,{cor:t,image:null,preview:""}];M(o),D||l(t),w("")}},q=(t,o)=>{const v=[...A];v[t].image=o,v[t].preview=URL.createObjectURL(o),M(v)},B=t=>{const o=A[t]?.cor,v=A.filter((I,V)=>V!==t);M(v),l(I=>I&&I===o?v[0]?.cor??"":I)},a=async()=>{const t=u.trim();if(t){$(!0),j("");try{const o=await Ye(t);if(!o){j("Nenhum produto encontrado na planilha com esse código.");return}if(C(o.baseSku),o.nome&&d(o.nome),o.descricao&&N(o.descricao),o.categorias?.length&&(T(o.categorias),k(!1)),E(o.destaque),o.variacoes?.length){const v=o.variacoes.map(V=>({cor:V.cor,image:null,preview:""}));M(v);const I=o.variacoes.find(V=>V.cor.toLowerCase().includes("preto"));I?l(I.cor):o.variacoes[0]?l(o.variacoes[0].cor):l("")}else M([]),l("");j("Dados preenchidos a partir da planilha ✅")}catch(o){console.error(o),j("Erro ao buscar dados na planilha.")}finally{$(!1)}}},s=async t=>{if(t.preventDefault(),f.length===0){k(!0),j("Selecione pelo menos uma categoria");return}k(!1),g(!0),j("");try{if(!u.trim())throw new Error("Informe um código/SKU");const o=[],v=[];let I=null;const V={};for(const F of A){if(!F.image)continue;const H=await Q(F.image,{folder:`produtos/${u}/variacoes`,productId:u,variation:F.cor,type:"variation"});v.push({cor:F.cor,imagem_url:H,thumb_url:H}),o.push(H),V[F.cor]=H}if(i)I=await Q(i,{folder:`produtos/${u}`,productId:u,type:"main"}),o.unshift(I);else if(D&&V[D])I=V[D];else{const F=Object.keys(V).find(H=>H.toLowerCase().includes("preto"));if(F)I=V[F];else{const H=Object.values(V)[0];H&&(I=H)}}if(!I)throw new Error("Envie pelo menos uma imagem (principal ou de alguma variação).");await X(O(se(_,"produtos"),u),{id:u,nome:r,descricao:x,categorias:f,destaque:h,variacoes:v,imagem_url:I,thumb_url:I,imagens_urls:o,thumbs_urls:o,createdAt:Ne()}),j("Produto salvo com sucesso!"),d(""),C(""),N(""),E(!1),T([]),k(!1),y(null),U(""),M([]),w(""),l("")}catch(o){console.error(o),j(o instanceof Error?o.message:"Erro ao salvar produto")}finally{g(!1)}};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-title font-bold mb-6",children:"Adicionar Produto"}),e.jsxs("form",{onSubmit:s,className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Nome"}),e.jsx("input",{type:"text",value:r,onChange:t=>d(t.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"SKU/Código"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:u,onChange:t=>C(t.target.value),onBlur:a,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary",required:!0}),e.jsx("button",{type:"button",onClick:a,disabled:K,className:"px-3 py-2 text-sm rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50",children:K?"Buscando...":"Planilha"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Descrição"}),e.jsx("textarea",{value:x,onChange:t=>N(t.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2",children:["Categorias ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:`flex flex-wrap gap-2 p-3 rounded-lg border-2 ${z?"border-red-300 bg-red-50":"border-gray-200"}`,children:p.map(t=>e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-white rounded-lg cursor-pointer hover:bg-gray-50 border border-gray-200",children:[e.jsx("input",{type:"checkbox",checked:f.includes(t.nome),onChange:o=>{k(!1),o.target.checked?T(v=>[...v,t.nome]):T(v=>v.filter(I=>I!==t.nome))},className:"rounded"}),e.jsx("span",{className:"text-sm",children:t.nome})]},t.id))}),z&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Selecione pelo menos uma categoria"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:t=>E(t.target.checked),className:"rounded"}),e.jsx("span",{className:"text-sm font-semibold",children:"Produto em destaque"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Imagem Principal (opcional)"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:P?e.jsxs("div",{className:"relative aspect-square max-w-xs mx-auto",children:[e.jsx("img",{src:P,alt:"Preview",className:"w-full h-full object-contain"}),e.jsx("button",{type:"button",onClick:()=>{y(null),U("")},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1",children:e.jsx(G,{size:16})})]}):e.jsxs("label",{className:"flex flex-col items-center gap-2 cursor-pointer",children:[e.jsx(W,{className:"text-gray-400",size:48}),e.jsx("span",{className:"text-sm text-gray-600",children:"Clique para selecionar imagem principal (opcional)"}),e.jsx("input",{type:"file",accept:"image/*",onChange:S,className:"hidden"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Variações de Cor"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",value:m,onChange:t=>w(t.target.value),onKeyDown:t=>{t.key==="Enter"&&(t.preventDefault(),L())},placeholder:"Nome da cor (ex: Vermelho, Preto fosco)",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary"}),e.jsx("button",{type:"button",onClick:L,className:"bg-primary hover:opacity-90 text-text-primary px-4 py-2 rounded-lg font-semibold",children:"Adicionar"})]}),A.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Cor principal"}),e.jsxs("select",{value:D,onChange:t=>l(t.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"Selecione a cor principal"}),A.map((t,o)=>e.jsx("option",{value:t.cor,children:t.cor},t.cor+o))]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Essa cor será usada como principal se você não enviar imagem principal do produto."})]}),e.jsx("div",{className:"space-y-3",children:A.map((t,o)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-sm mb-2",children:t.cor}),t.preview?e.jsx("div",{className:"relative w-24 h-24",children:e.jsx("img",{src:t.preview,alt:t.cor,className:"w-full h-full object-cover rounded"})}):e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-white border border-gray-300 rounded cursor-pointer hover:bg-gray-50",children:[e.jsx(W,{size:16}),e.jsx("span",{className:"text-xs",children:"Adicionar imagem"}),e.jsx("input",{type:"file",accept:"image/*",onChange:v=>{const I=v.target.files?.[0];I&&q(o,I)},className:"hidden"})]})]}),e.jsx("button",{type:"button",onClick:()=>B(o),className:"text-red-500 hover:bg-red-50 p-2 rounded",children:e.jsx(G,{size:18})})]},o))})]}),b&&e.jsx("p",{className:`text-center font-semibold ${b.includes("sucesso")||b.includes("planilha")?"text-green-600":"text-red-600"}`,children:b}),e.jsx("button",{type:"submit",disabled:n,className:"w-full bg-primary hover:opacity-90 text-text-primary font-bold py-3 rounded-lg transition-all disabled:opacity-50",children:n?"Salvando...":"Salvar Produto"})]})]})}function Xe({product:r,onClose:d}){const[u,C]=c.useState(r.nome||""),[x,N]=c.useState(r.descricao||""),[h,E]=c.useState(r.destaque||!1),[f,T]=c.useState(r.categorias||[]),[z,k]=c.useState(null),[i,y]=c.useState(r.imagem_url?Z(r.imagem_url,"thumbnail"):""),[P,U]=c.useState(r.variacoes?.map(p=>({cor:p.cor,image:null,preview:Z(p.imagem_url,"thumbnail"),existingUrl:p.imagem_url}))||[]),[A,M]=c.useState(""),[m,w]=c.useState(!1),[D,l]=c.useState(""),{data:n=[]}=me(),g=p=>{const S=p.target.files?.[0];S&&(k(S),y(URL.createObjectURL(S)))},b=()=>{A.trim()&&(U([...P,{cor:A.trim(),image:null,preview:""}]),M(""))},j=(p,S)=>{const L=[...P];L[p].image=S,L[p].preview=URL.createObjectURL(S),U(L)},K=p=>{U(P.filter((S,L)=>L!==p))},$=async p=>{p.preventDefault(),w(!0),l("");try{let S=r.imagem_url;z&&(S=await Q(z,{folder:`produtos/${r.id}`,productId:r.id,type:"main"}),r.imagem_url&&r.imagem_url!==S&&await J(r.imagem_url));const L=[],q=[S],B=r.variacoes?.map(a=>a.imagem_url)||[];for(const a of P)if(a.image){const s=await Q(a.image,{folder:`produtos/${r.id}/variacoes`,productId:r.id,variation:a.cor,type:"variation"});if(L.push({cor:a.cor,imagem_url:s,thumb_url:s}),q.push(s),a.existingUrl&&a.existingUrl!==s){const t=B.indexOf(a.existingUrl);t>-1&&B.splice(t,1)}}else if(a.existingUrl){const s=r.variacoes?.find(t=>t.cor===a.cor);if(s){L.push(s),q.push(s.imagem_url);const t=B.indexOf(s.imagem_url);t>-1&&B.splice(t,1)}}for(const a of B)await J(a);await le(O(_,"produtos",r.id),{nome:u,descricao:x,categorias:f,destaque:h,variacoes:L,imagem_url:S,thumb_url:S,imagens_urls:q,thumbs_urls:q}),l("Produto atualizado com sucesso!"),setTimeout(()=>d(),1500)}catch(S){console.error(S),l(S instanceof Error?S.message:"Erro ao atualizar produto")}finally{w(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center z-10",children:[e.jsx("h2",{className:"text-xl font-title font-bold",children:"Editar Produto"}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(G,{size:20})})]}),e.jsxs("form",{onSubmit:$,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Nome"}),e.jsx("input",{type:"text",value:u,onChange:p=>C(p.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"SKU/Código"}),e.jsx("input",{type:"text",value:r.id,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Descrição"}),e.jsx("textarea",{value:x,onChange:p=>N(p.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Categorias"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(p=>e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:f.includes(p.nome),onChange:S=>{S.target.checked?T(L=>[...L,p.nome]):T(L=>L.filter(q=>q!==p.nome))},className:"rounded"}),e.jsx("span",{className:"text-sm",children:p.nome})]},p.id))})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:p=>E(p.target.checked),className:"rounded"}),e.jsx("span",{className:"text-sm font-semibold",children:"Produto em destaque"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Imagem Principal"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:i?e.jsxs("div",{className:"relative aspect-square max-w-xs mx-auto",children:[e.jsx("img",{src:i,alt:"Preview",className:"w-full h-full object-contain"}),e.jsxs("label",{className:"absolute bottom-2 right-2 bg-primary text-white p-2 rounded-full cursor-pointer hover:opacity-90 shadow-lg transition-opacity",children:[e.jsx(W,{size:16}),e.jsx("input",{type:"file",accept:"image/*",onChange:g,className:"hidden"})]})]}):e.jsxs("label",{className:"flex flex-col items-center gap-2 cursor-pointer",children:[e.jsx(W,{className:"text-gray-400",size:48}),e.jsx("span",{className:"text-sm text-gray-600",children:"Clique para selecionar imagem principal"}),e.jsx("input",{type:"file",accept:"image/*",onChange:g,className:"hidden"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Variações de Cor"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",value:A,onChange:p=>M(p.target.value),onKeyDown:p=>{p.key==="Enter"&&(p.preventDefault(),b())},placeholder:"Nome da cor (ex: Vermelho, Preto fosco)",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:outline-none"}),e.jsx("button",{type:"button",onClick:b,className:"bg-primary hover:opacity-90 text-white px-4 py-2 rounded-lg font-semibold transition-opacity",children:"Adicionar"})]}),e.jsx("div",{className:"space-y-3",children:P.map((p,S)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-sm mb-2",children:p.cor}),p.preview?e.jsxs("div",{className:"relative w-24 h-24",children:[e.jsx("img",{src:p.preview,alt:p.cor,className:"w-full h-full object-cover rounded"}),e.jsxs("label",{className:"absolute bottom-0 right-0 bg-primary text-white p-1 rounded cursor-pointer hover:opacity-90 shadow-md transition-opacity",children:[e.jsx(W,{size:12}),e.jsx("input",{type:"file",accept:"image/*",onChange:L=>{const q=L.target.files?.[0];q&&j(S,q)},className:"hidden"})]})]}):e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-white border border-gray-300 rounded cursor-pointer hover:bg-gray-50 transition-colors",children:[e.jsx(W,{size:16}),e.jsx("span",{className:"text-xs",children:"Adicionar imagem"}),e.jsx("input",{type:"file",accept:"image/*",onChange:L=>{const q=L.target.files?.[0];q&&j(S,q)},className:"hidden"})]})]}),e.jsx("button",{type:"button",onClick:()=>K(S),className:"text-red-500 hover:bg-red-50 p-2 rounded transition-colors",children:e.jsx(G,{size:18})})]},S))})]}),D&&e.jsx("div",{className:`p-3 rounded-lg text-center font-semibold ${D.includes("sucesso")?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:D}),e.jsx("button",{type:"submit",disabled:m,className:"w-full bg-primary hover:opacity-90 text-white font-bold py-3 rounded-lg transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Salvando...":"Salvar Alterações"})]})]})})}function Je(){const[r,d]=c.useState(0),[u,C]=c.useState([]),[x,N]=c.useState(null),[h,E]=c.useState(null),[f,T]=c.useState(""),z=50,k=we(),i=c.useMemo(()=>{const l=te(se(_,"produtos"),re("createdAt","desc"),ie(z));return r>0&&u[r-1]?te(se(_,"produtos"),re("createdAt","desc"),Ce(u[r-1]),ie(z)):l},[r,u,z]),{data:y=[],isLoading:P,refetch:U,isFetching:A}=he({queryKey:["admin-products",r,z,u[r-1]?.id],queryFn:async()=>{const n=(await ce(i)).docs;return n.length>0&&C(g=>{const b=[...g];return b[r]=n[n.length-1],b}),n.map(g=>({id:g.id,...g.data()}))},placeholderData:l=>l??[],staleTime:3e4}),M=c.useMemo(()=>{if(!f.trim())return y;const l=f.toLowerCase();return y.filter(n=>n.nome.toLowerCase().includes(l)||n.id.toLowerCase().includes(l))},[y,f]),m=async l=>{if(confirm(`Tem certeza que deseja excluir "${l.nome}"?`)){E(l.id);try{const n=[];l.imagem_url&&n.push(l.imagem_url),l.thumb_url&&l.thumb_url!==l.imagem_url&&n.push(l.thumb_url),l.imagens_urls?.length&&l.imagens_urls.forEach(g=>{n.includes(g)||n.push(g)}),l.thumbs_urls?.length&&l.thumbs_urls.forEach(g=>{n.includes(g)||n.push(g)}),l.variacoes?.length&&l.variacoes.forEach(g=>{g.imagem_url&&!n.includes(g.imagem_url)&&n.push(g.imagem_url),g.thumb_url&&!n.includes(g.thumb_url)&&n.push(g.thumb_url)}),await Ee(n),await pe(O(_,"produtos",l.id)),await k.invalidateQueries({queryKey:["admin-products"]}),await U()}catch(n){console.error("Erro ao deletar produto:",n),alert("Erro ao deletar produto")}finally{E(null)}}},w=l=>{N(l)},D=()=>{N(null),k.invalidateQueries({queryKey:["admin-products"]}),U()};return P&&!y.length?e.jsx("div",{className:"text-center py-8",children:"Carregando produtos..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-title font-bold",children:["Produtos Cadastrados ",A&&e.jsx("span",{className:"text-sm text-gray-400",children:"(atualizando…)"})]}),e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx("input",{type:"text",value:f,onChange:l=>T(l.target.value),placeholder:"Buscar por nome ou SKU...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:outline-none text-sm"}),e.jsx(De,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18})]})]})}),e.jsx("div",{className:"max-h-[600px] overflow-auto divide-y",children:M.map(l=>{const n=l.thumb_url||l.imagem_url||l.imagens_urls?.[0],g=n?Z(n,"thumbnail"):"";return e.jsxs("div",{className:"flex items-center gap-4 px-4 py-2 hover:bg-gray-50",children:[g?e.jsx("img",{src:g,alt:l.nome??"Produto",className:"w-16 h-16 object-contain rounded bg-gray-50"}):e.jsx("div",{className:"w-16 h-16 flex items-center justify-center bg-gray-100 rounded",children:e.jsx("span",{className:"text-xs text-gray-400",children:"Sem img"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:l.nome}),e.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",l.id]}),e.jsx("div",{className:"flex gap-2 mt-1 flex-wrap",children:l.categorias?.map(b=>e.jsx("span",{className:"text-xs bg-gray-200 px-2 py-1 rounded",children:b},b))}),l.variacoes&&l.variacoes.length>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.variacoes.length," variações de cor"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>w(l),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Editar",disabled:h===l.id,children:e.jsx(Be,{size:18})}),e.jsx("button",{onClick:()=>m(l),className:"p-2 text-red-600 hover:bg-red-50 rounded disabled:opacity-50",title:"Excluir",disabled:h===l.id,children:h===l.id?e.jsx("div",{className:"w-[18px] h-[18px] border-2 border-red-600 border-t-transparent rounded-full animate-spin"}):e.jsx(de,{size:18})})]})]},l.id)})}),e.jsxs("div",{className:"p-4 border-t border-gray-200 flex justify-between items-center",children:[e.jsxs("button",{onClick:()=>d(l=>Math.max(0,l-1)),disabled:r===0,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg disabled:opacity-50 hover:bg-gray-200",children:[e.jsx(Ie,{size:18}),"Anterior"]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Página ",r+1]}),e.jsxs("button",{onClick:()=>d(l=>l+1),disabled:y.length<z,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg disabled:opacity-50 hover:bg-gray-200",children:["Próximo",e.jsx(ze,{size:18})]})]})]}),x&&e.jsx(Xe,{product:x,onClose:D})]})}const es=Pe(r=>({message:"",type:"success",isVisible:!1,showToast:(d,u="success")=>r({message:d,type:u,isVisible:!0}),hideToast:()=>r({isVisible:!1})}));function ss(){const[r,d]=c.useState(""),[u,C]=c.useState(!1),[x,N]=c.useState(null),[h,E]=c.useState(""),[f,T]=c.useState(!1),{data:z=[],refetch:k}=me(),{showToast:i}=es(),y=m=>{const w=m.target.files?.[0];w&&(N(w),E(URL.createObjectURL(w)))},P=async m=>{m.preventDefault(),T(!0);try{const w=r.toLowerCase().replace(/\s+/g,"-");let D="";x&&(D=await Q(x,{folder:"categorias",productId:w,type:"category"})),await X(O(_,"categorias",w),{id:w,nome:r,productCount:0,popular:u,imagePath:D}),d(""),C(!1),N(null),E(""),k(),i("Categoria criada com sucesso!","success")}catch(w){console.error(w),i("Erro ao criar categoria","error")}finally{T(!1)}},U=async m=>{if(confirm("Tem certeza? Esta ação não pode ser desfeita."))try{m.imagePath&&await J(m.imagePath),await pe(O(_,"categorias",m.id)),k(),i("Categoria excluída com sucesso!","success")}catch(w){console.error(w),i("Erro ao excluir categoria","error")}},A=async m=>{try{await le(O(_,"categorias",m.id),{popular:!m.popular}),k(),i("Status atualizado!","success")}catch(w){console.error(w),i("Não foi possível atualizar","error")}},M=async(m,w)=>{try{const D=await Q(w,{folder:"categorias",productId:m.id,type:"category"});m.imagePath&&await J(m.imagePath),await le(O(_,"categorias",m.id),{imagePath:D}),k(),i("Imagem atualizada!","success")}catch(D){console.error(D),i("Não foi possível atualizar a imagem","error")}};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[e.jsx("h2",{className:"text-xl font-title font-bold mb-6",children:"Gerenciar Categorias"}),e.jsxs("form",{onSubmit:P,className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Nome da categoria"}),e.jsx("input",{type:"text",value:r,onChange:m=>d(m.target.value),placeholder:"Nome da categoria",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Imagem da categoria"}),h?e.jsxs("div",{className:"relative w-full h-24",children:[e.jsx("img",{src:h,alt:"Preview",className:"w-full h-full object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>{N(null),E("")},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1",children:e.jsx(G,{size:14})})]}):e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx(W,{size:16}),e.jsx("span",{className:"text-sm",children:"Selecionar imagem"}),e.jsx("input",{type:"file",accept:"image/*",onChange:y,className:"hidden"})]})]})]}),e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:u,onChange:m=>C(m.target.checked),className:"w-4 h-4 rounded"}),e.jsx("span",{className:"text-sm font-semibold",children:"Marcar como categoria popular"})]}),e.jsx("button",{type:"submit",disabled:f,className:"w-full bg-primary hover:opacity-90 text-text-primary font-semibold px-6 py-3 rounded-lg disabled:opacity-50",children:f?"Criando...":"Criar Categoria"})]}),e.jsx("div",{className:"space-y-2",children:z.map(m=>e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 bg-gray-50 rounded-lg gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1 w-full sm:w-auto",children:[m.imagePath&&e.jsx("img",{src:Z(m.imagePath,"thumbnail"),alt:m.nome,className:"w-16 h-16 object-cover rounded-lg flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold truncate",children:m.nome}),e.jsxs("p",{className:"text-sm text-gray-500",children:[m.productCount||0," produtos"]}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx("button",{onClick:()=>void A(m),className:`px-3 py-1 rounded border text-xs sm:text-sm ${m.popular?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300"}`,children:m.popular?"Popular ✓":"Marcar como popular"}),e.jsxs("label",{className:"flex items-center gap-2 px-3 py-1 bg-white border border-gray-300 rounded cursor-pointer hover:bg-gray-50",children:[e.jsx(W,{size:14}),e.jsx("span",{className:"text-xs",children:"Alterar imagem"}),e.jsx("input",{type:"file",accept:"image/*",onChange:w=>{const D=w.target.files?.[0];D&&M(m,D)},className:"hidden"})]})]})]})]}),e.jsx("button",{onClick:()=>void U(m),className:"p-2 text-red-600 hover:bg-red-50 rounded self-end sm:self-auto",children:e.jsx(de,{size:18})})]},m.id))})]})}function as(){const[r,d]=c.useState(!1),[u,C]=c.useState(""),[x,N]=c.useState({companyName:"Rocha Brindes",description:"",address:"",phone:"",email:"",copyright:"© 2024 Rocha Brindes. Todos os direitos reservados.",instagramUrl:"",facebookUrl:"",linkedinUrl:"",youtubeUrl:"",navigation:{title:"Navegação",links:[{label:"Início",url:"/"},{label:"Catálogo",url:"/catalogo"}]}});c.useEffect(()=>{(async()=>{try{const y=await oe(O(_,"config","footer"));y.exists()&&N(P=>({...P,...y.data()}))}catch(y){console.error("Erro carregar footer:",y)}})()},[]);const h=(i,y)=>{N({...x,[i]:y})},E=i=>{N({...x,navigation:{...x.navigation,title:i}})},f=(i,y,P)=>{const U=[...x.navigation.links];U[i]={...U[i],[y]:P},N({...x,navigation:{...x.navigation,links:U}})},T=()=>{N({...x,navigation:{...x.navigation,links:[...x.navigation.links,{label:"",url:""}]}})},z=i=>{N({...x,navigation:{...x.navigation,links:x.navigation.links.filter((y,P)=>P!==i)}})},k=async()=>{d(!0),C("");try{await X(O(_,"config","footer"),x),C("✅ Rodapé atualizado!"),setTimeout(()=>C(""),3e3)}catch{C("❌ Erro ao salvar.")}finally{d(!1)}};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-50 p-2 rounded-lg text-blue-600",children:e.jsx(Re,{size:24})}),e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Configurar Rodapé"})]}),u&&e.jsx("span",{className:`px-3 py-1 rounded-md text-sm font-bold ${u.includes("✅")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:u})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(ve,{size:18,className:"text-primary"}),"Informações da Empresa"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Nome da Empresa"}),e.jsx("input",{type:"text",value:x.companyName,onChange:i=>h("companyName",i.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Rocha Brindes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Descrição"}),e.jsx("textarea",{value:x.description,onChange:i=>h("description",i.target.value),rows:3,className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Transformando ideias em brindes únicos..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Copyright"}),e.jsx("input",{type:"text",value:x.copyright,onChange:i=>h("copyright",i.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"© 2024 Rocha Brindes"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(ne,{size:18,className:"text-primary"}),"Informações de Contato"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(Te,{size:14})," Endereço"]}),e.jsx("textarea",{value:x.address,onChange:i=>h("address",i.target.value),rows:2,className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Rua Example, 123 - Centro"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(ne,{size:14})," Telefone"]}),e.jsx("input",{type:"text",value:x.phone,onChange:i=>h("phone",i.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"(00) 0000-0000"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(Ae,{size:14})," Email"]}),e.jsx("input",{type:"email",value:x.email,onChange:i=>h("email",i.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"contato@rochabrindes.com"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(Me,{size:18,className:"text-primary"}),"Redes Sociais"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Instagram"}),e.jsx("input",{type:"url",value:x.instagramUrl,onChange:i=>h("instagramUrl",i.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"https://instagram.com/rochabrindes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Facebook"}),e.jsx("input",{type:"url",value:x.facebookUrl,onChange:i=>h("facebookUrl",i.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"https://facebook.com/rochabrindes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"LinkedIn"}),e.jsx("input",{type:"url",value:x.linkedinUrl,onChange:i=>h("linkedinUrl",i.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"https://linkedin.com/company/rochabrindes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"YouTube"}),e.jsx("input",{type:"url",value:x.youtubeUrl,onChange:i=>h("youtubeUrl",i.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"https://youtube.com/@rochabrindes"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Links de Navegação"}),e.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:opacity-90 text-sm font-semibold",children:[e.jsx(be,{size:16}),"Adicionar Link"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Título da Seção"}),e.jsx("input",{type:"text",value:x.navigation.title,onChange:i=>E(i.target.value),className:"w-full p-3 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Navegação"})]}),e.jsx("div",{className:"space-y-3",children:x.navigation.links.map((i,y)=>e.jsxs("div",{className:"flex gap-3 items-start p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1 grid md:grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",value:i.label,onChange:P=>f(y,"label",P.target.value),className:"w-full p-2 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Texto do Link"}),e.jsx("input",{type:"text",value:i.url,onChange:P=>f(y,"url",P.target.value),className:"w-full p-2 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"/caminho ou https://..."})]}),e.jsx("button",{onClick:()=>z(y),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(G,{size:20})})]},y))})]}),e.jsx("div",{className:"pt-4 border-t border-gray-100 flex justify-end",children:e.jsxs("button",{onClick:k,disabled:r,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-bold transition-all disabled:opacity-50",children:[r?e.jsx(qe,{className:"animate-spin",size:18}):e.jsx(ye,{size:18}),"Salvar Rodapé"]})})]})}function ts(){const[r,d]=c.useState({}),[u,C]=c.useState(!1),[x,N]=c.useState(null),[h,E]=c.useState(""),[f,T]=c.useState(""),[z,k]=c.useState(""),[i,y]=c.useState("");c.useEffect(()=>{P(),U()},[]);const P=async()=>{try{const n=await oe(O(_,"config","layout"));if(n.exists()){const g=n.data();d(g),T(g.companyInfo?.title||""),k(g.companyInfo?.description||""),g.whatsapp&&y(g.whatsapp)}}catch(n){console.error("Erro ao carregar assets:",n),E("Erro ao carregar configurações")}},U=async()=>{try{const n=await oe(O(_,"config","general"));if(n.exists()){const g=n.data();g.whatsappNumber&&!i&&y(g.whatsappNumber)}}catch(n){console.error("Erro ao carregar WhatsApp:",n)}},A=async n=>{await X(O(_,"config","layout"),n,{merge:!0})},M=async n=>{await X(O(_,"config","general"),{whatsappNumber:n},{merge:!0})},m=(n,g=3e3)=>{E(n),setTimeout(()=>E(""),g)},w=async()=>{try{const n={...r,companyInfo:z?{title:f,description:z}:void 0,whatsapp:i||void 0};await A(n),i&&await M(i),d(n),m("Informações salvas com sucesso!")}catch(n){console.error(n),m("Erro ao salvar informações")}},D=async n=>{C(!0),N("logo");try{const g=await Q(n,{folder:"layout",type:"logo"});r.logo&&await J(r.logo);const b={...r,logo:g};await A(b),d(b),m("Logo atualizado com sucesso!")}catch(g){console.error(g),m("Erro ao fazer upload do logo")}finally{C(!1),N(null)}},l=async()=>{if(r.logo)try{await J(r.logo);const n={...r,logo:void 0};await A(n),d(n),m("Logo removido com sucesso!")}catch(n){console.error(n),m("Erro ao remover logo")}};return e.jsxs("div",{className:"space-y-8",children:[h&&e.jsx("div",{className:`p-4 rounded-xl text-center font-semibold shadow-md animate-fade-in ${h.includes("sucesso")?"bg-green-50 text-green-700 border-2 border-green-200":"bg-red-50 text-red-700 border-2 border-red-200"}`,children:h}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(fe,{size:20,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-title font-bold text-gray-800",children:"Logo Principal"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Logotipo exibido no cabeçalho"})]})]}),r.logo?e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"w-64 h-32 border-2 border-gray-200 rounded-xl p-4 group hover:border-primary transition-colors bg-gray-50",children:e.jsx("img",{src:Z(r.logo,"thumbnail"),alt:"Logo",className:"w-full h-full object-contain"})}),e.jsx("button",{onClick:()=>void l(),className:"absolute -top-3 -right-3 bg-red-500 hover:bg-red-600 text-white rounded-full p-2 shadow-lg transition-all transform hover:scale-110",title:"Remover logo",children:e.jsx(G,{size:18})})]}):e.jsxs("label",{className:"group relative inline-flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-primary/10 to-primary/5 border-2 border-dashed border-primary/30 rounded-xl cursor-pointer hover:border-primary hover:from-primary/20 hover:to-primary/10 transition-all",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-white rounded-lg shadow-sm group-hover:shadow-md transition-shadow",children:x==="logo"?e.jsx(ee,{size:20,className:"animate-spin text-primary"}):e.jsx(W,{size:20,className:"text-primary"})}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Adicionar Logo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:n=>{const g=n.target.files?.[0];g&&D(g)},className:"hidden",disabled:u})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx(je,{size:20,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-title font-bold text-gray-800",children:"Configurações"}),e.jsx("p",{className:"text-sm text-gray-500",children:"WhatsApp e outros"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(ne,{size:16}),"WhatsApp"]}),e.jsx("input",{type:"text",value:i,onChange:n=>y(n.target.value),placeholder:"Ex: 5589994333316",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none transition-colors"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Apenas números com DDI e DDD"})]})]})]}),e.jsx(as,{}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>void w(),className:"px-8 py-3 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:"Salvar Configurações"})})]})}const Y={hero:{title:"Brindes que Impressionam",subtitle:"Transforme sua marca em experiências memoráveis",ctaText:"Explorar Catálogo"},infoSections:[{title:"Qualidade Garantida",description:"Trabalhamos apenas com fornecedores certificados e produtos de alta qualidade para garantir a satisfação dos nossos clientes.",imagePosition:"right",features:["Produtos certificados e testados","Garantia de qualidade em todos os itens","Entrega rápida e segura"]},{title:"Personalização Completa",description:"Oferecemos personalização completa para que sua marca se destaque. Do design à produção, cuidamos de cada detalhe.",imagePosition:"left",features:["Design exclusivo para sua marca","Múltiplas opções de personalização","Equipe especializada em branding"]},{title:"Atendimento Especializado",description:"Nossa equipe está pronta para ajudar você em cada etapa do processo, desde a escolha do produto até a entrega final.",imagePosition:"right",features:["Consultoria gratuita","Suporte em todo o processo","Pós-venda diferenciado"]}],videos:[],featuredProductIds:[],stats:{products:{value:"500+",label:"Produtos Disponíveis"},clients:{value:"1000+",label:"Clientes Satisfeitos"},years:{value:"15+",label:"Anos de Experiência"}},cta:{title:"Pronto para Começar?",description:"Solicite um orçamento personalizado e descubra como podemos ajudar sua marca",buttonText:"Ver Catálogo Completo"}};function rs(){const[r,d]=c.useState(Y),[u,C]=c.useState(!1),[x,N]=c.useState(null),[h,E]=c.useState(null),[f,T]=c.useState(""),[z,k]=c.useState([]),[i,y]=c.useState([]),[P,U]=c.useState(!0),[A,M]=c.useState(!0);c.useEffect(()=>{m(),w()},[]);const m=async()=>{M(!0);try{const a=await oe(O(_,"config","landing"));if(a.exists()){const s=a.data();d({hero:s.hero||Y.hero,infoSections:s.infoSections||Y.infoSections,videos:s.videos||[],featuredProductIds:s.featuredProductIds||[],stats:{products:s.stats?.products||Y.stats.products,clients:s.stats?.clients||Y.stats.clients,years:s.stats?.years||Y.stats.years},cta:s.cta||Y.cta}),y(s.featuredProductIds||[])}}catch(a){console.error("Erro ao carregar landing:",a),l("❌ Erro ao carregar dados")}finally{M(!1)}},w=async()=>{U(!0);try{const a=te(se(_,"produtos"),re("createdAt","desc"),ie(100)),t=(await ce(a)).docs.map(o=>({id:o.id,...o.data()}));k(t)}catch(a){console.error("Erro ao carregar produtos:",a),l("❌ Erro ao carregar produtos")}finally{U(!1)}},D=async()=>{C(!0);try{await X(O(_,"config","landing"),{...r,featuredProductIds:i}),l("✅ Landing page atualizada!")}catch(a){l("❌ Erro ao salvar"),console.error(a)}finally{C(!1)}},l=a=>{T(a),setTimeout(()=>T(""),3e3)},n=a=>{y(s=>s.includes(a)?s.filter(t=>t!==a):s.length>=10?s:[...s,a])},g=async(a,s)=>{E(s);try{const t=await Q(a,{folder:"landing",type:"banner"});p(s,"imageUrl",t),l("✅ Imagem enviada!")}catch(t){console.error("Erro ao enviar imagem:",t),l("❌ Erro ao enviar imagem")}finally{E(null)}},b=async(a,s,t,o)=>{N("video");try{const v={url:a,title:t,description:o};s&&s.trim()&&(v.thumbnail=s),d(I=>({...I,videos:[...I.videos,v]})),l("✅ Vídeo adicionado!")}catch(v){console.error("Erro ao adicionar vídeo:",v),l("❌ Erro ao adicionar")}finally{N(null)}},j=a=>{d(s=>({...s,videos:s.videos.filter((t,o)=>o!==a)})),l("✅ Vídeo removido!")},K=()=>{const a={title:"Nova Seção",description:"Descrição da seção",imagePosition:"right",features:["Item 1","Item 2","Item 3"]};d(s=>({...s,infoSections:[...s.infoSections||[],a]})),l("✅ Seção adicionada!")},$=a=>{d(s=>({...s,infoSections:s.infoSections?.filter((t,o)=>o!==a)})),l("✅ Seção removida!")},p=(a,s,t)=>{d(o=>({...o,infoSections:o.infoSections?.map((v,I)=>I===a?{...v,[s]:t}:v)}))},S=a=>{d(s=>({...s,infoSections:s.infoSections?.map((t,o)=>o===a?{...t,features:[...t.features||[],"Novo item"]}:t)}))},L=(a,s)=>{d(t=>({...t,infoSections:t.infoSections?.map((o,v)=>v===a?{...o,features:o.features?.filter((I,V)=>V!==s)}:o)}))},q=(a,s,t)=>{d(o=>({...o,infoSections:o.infoSections?.map((v,I)=>I===a?{...v,features:v.features?.map((V,F)=>F===s?t:V)}:v)}))},B=(a,s)=>{if(!r.infoSections)return;const t=s==="up"?a-1:a+1;if(t<0||t>=r.infoSections.length)return;const o=[...r.infoSections],v=o[a];o[a]=o[t],o[t]=v,d(I=>({...I,infoSections:o}))};return A?e.jsxs("div",{className:"flex items-center justify-center py-20",children:[e.jsx(ee,{className:"animate-spin text-primary",size:48}),e.jsx("span",{className:"ml-4 text-xl text-gray-600",children:"Carregando..."})]}):e.jsxs("div",{className:"space-y-8",children:[f&&e.jsx("div",{className:`p-4 rounded-xl text-center font-semibold ${f.includes("✅")?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:f}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Fe,{size:20,className:"text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Seção Hero (Principal)"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Primeira impressão do site"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Título Principal"}),e.jsx("input",{type:"text",value:r.hero?.title||"",onChange:a=>d(s=>({...s,hero:{...s.hero,title:a.target.value}})),className:"w-full px-4 py-3 border-2 rounded-xl focus:border-primary outline-none",placeholder:"Ex: Brindes que Impressionam"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Subtítulo"}),e.jsx("input",{type:"text",value:r.hero?.subtitle||"",onChange:a=>d(s=>({...s,hero:{...s.hero,subtitle:a.target.value}})),className:"w-full px-4 py-3 border-2 rounded-xl focus:border-primary outline-none",placeholder:"Ex: Transforme sua marca em experiências memoráveis"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Texto do Botão Principal"}),e.jsx("input",{type:"text",value:r.hero?.ctaText||"",onChange:a=>d(s=>({...s,hero:{...s.hero,ctaText:a.target.value}})),className:"w-full px-4 py-3 border-2 rounded-xl focus:border-primary outline-none",placeholder:"Ex: Explorar Catálogo"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-500/10 rounded-lg flex items-center justify-center",children:e.jsx(ue,{size:20,className:"text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Seções de Informação"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Blocos informativos ao longo da página"})]})]}),e.jsxs("button",{onClick:K,className:"flex items-center gap-2 px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600",children:[e.jsx(be,{size:18}),"Adicionar Seção"]})]}),r.infoSections&&r.infoSections.length>0?e.jsx("div",{className:"space-y-6",children:r.infoSections.map((a,s)=>e.jsxs("div",{className:"border-2 rounded-xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-bold text-lg",children:["Seção ",s+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s>0&&e.jsx("button",{onClick:()=>B(s,"up"),className:"p-2 hover:bg-gray-100 rounded-lg",title:"Mover para cima",children:e.jsx($e,{size:18})}),s<r.infoSections.length-1&&e.jsx("button",{onClick:()=>B(s,"down"),className:"p-2 hover:bg-gray-100 rounded-lg",title:"Mover para baixo",children:e.jsx(Oe,{size:18})}),e.jsx("button",{onClick:()=>$(s),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:e.jsx(de,{size:18})})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Título"}),e.jsx("input",{type:"text",value:a.title,onChange:t=>p(s,"title",t.target.value),className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",placeholder:"Título da seção"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Posição da Imagem"}),e.jsxs("select",{value:a.imagePosition||"right",onChange:t=>p(s,"imagePosition",t.target.value),className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",children:[e.jsx("option",{value:"left",children:"Esquerda"}),e.jsx("option",{value:"right",children:"Direita"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Descrição"}),e.jsx("textarea",{value:a.description,onChange:t=>p(s,"description",t.target.value),rows:3,className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none resize-none",placeholder:"Descrição detalhada da seção"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Imagem (opcional)"}),e.jsxs("div",{className:"flex gap-4",children:[a.imageUrl&&e.jsxs("div",{className:"relative w-32 h-32 border-2 rounded-lg overflow-hidden",children:[e.jsx("img",{src:Z(a.imageUrl,"thumbnail"),alt:"Preview",className:"w-full h-full object-cover"}),e.jsx("button",{onClick:()=>p(s,"imageUrl",void 0),className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full hover:bg-red-600",children:e.jsx(G,{size:14})})]}),e.jsxs("label",{className:"flex-1 flex flex-col items-center justify-center border-2 border-dashed rounded-lg p-4 cursor-pointer hover:border-primary hover:bg-primary/5 transition-colors",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:t=>{const o=t.target.files?.[0];o&&g(o,s)},className:"hidden",disabled:h===s}),h===s?e.jsx(ee,{className:"animate-spin text-primary mb-2",size:32}):e.jsx(fe,{className:"text-gray-400 mb-2",size:32}),e.jsx("span",{className:"text-sm text-gray-600 text-center",children:h===s?"Enviando...":"Clique para fazer upload"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-semibold",children:"Itens em Destaque"}),e.jsx("button",{onClick:()=>S(s),className:"text-sm text-primary hover:underline",children:"+ Adicionar Item"})]}),e.jsx("div",{className:"space-y-2",children:a.features?.map((t,o)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:t,onChange:v=>q(s,o,v.target.value),className:"flex-1 px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",placeholder:`Item ${o+1}`}),e.jsx("button",{onClick:()=>L(s,o),className:"px-3 text-red-500 hover:bg-red-50 rounded-lg",children:e.jsx(G,{size:18})})]},o))})]})]},s))}):e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl",children:[e.jsx(ue,{className:"mx-auto text-gray-400 mb-3",size:48}),e.jsx("p",{className:"text-gray-600 font-semibold",children:"Nenhuma seção adicionada"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:'Clique em "Adicionar Seção" para começar'})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500/10 rounded-lg flex items-center justify-center",children:e.jsx(ae,{size:20,className:"text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Produtos em Destaque"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Selecione até 10 produtos para o carrossel"})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm font-semibold text-gray-700",children:["Selecionados: ",e.jsx("span",{className:"text-primary",children:i.length}),"/10"]})}),P?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(ee,{className:"animate-spin text-primary",size:32}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando produtos..."})]}):z.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl",children:[e.jsx(ae,{className:"mx-auto text-gray-400 mb-3",size:48}),e.jsx("p",{className:"text-gray-600 font-semibold",children:"Nenhum produto cadastrado"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Cadastre produtos primeiro na aba Produtos"})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 max-h-[600px] overflow-y-auto p-2",children:z.map(a=>{const s=i.includes(a.id),t=a.thumb_url||a.imagem_url||a.variacoes?.[0]?.thumb_url,o=t?Z(t,"thumbnail"):"";return e.jsxs("button",{onClick:()=>n(a.id),disabled:!s&&i.length>=10,className:`relative group border-2 rounded-xl overflow-hidden transition-all ${s?"border-primary ring-2 ring-primary/20":"border-gray-200 hover:border-gray-300"} ${!s&&i.length>=10?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("div",{className:"aspect-square bg-gray-100",children:o?e.jsx("img",{src:o,alt:a.nome,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ae,{size:24,className:"text-gray-400"})})}),e.jsxs("div",{className:"p-2 bg-white",children:[e.jsx("p",{className:"text-xs font-semibold line-clamp-2 text-left",children:a.nome}),e.jsxs("p",{className:"text-[10px] text-gray-500 text-left mt-1",children:["SKU: ",a.id]})]}),s&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute top-2 right-2 bg-primary text-white rounded-full p-1.5 shadow-lg",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("div",{className:"absolute top-2 left-2 bg-white text-primary rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold shadow-lg",children:i.indexOf(a.id)+1})]})]},a.id)})}),i.length>=10&&e.jsx("p",{className:"text-sm text-orange-600 mt-4 text-center font-semibold",children:"Limite máximo de produtos atingido"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Ue,{size:20,className:"text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Estatísticas"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Números da empresa"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Produtos - Valor"}),e.jsx("input",{type:"text",value:r.stats?.products?.value||"",onChange:a=>d(s=>({...s,stats:{...s.stats,products:{...s.stats.products,value:a.target.value}}})),className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",placeholder:"500+"}),e.jsx("label",{className:"block text-sm font-semibold mb-2 mt-2",children:"Produtos - Texto"}),e.jsx("input",{type:"text",value:r.stats?.products?.label||"",onChange:a=>d(s=>({...s,stats:{...s.stats,products:{...s.stats.products,label:a.target.value}}})),className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",placeholder:"Produtos Disponíveis"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Clientes - Valor"}),e.jsx("input",{type:"text",value:r.stats?.clients?.value||"",onChange:a=>d(s=>({...s,stats:{...s.stats,clients:{...s.stats.clients,value:a.target.value}}})),className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",placeholder:"1000+"}),e.jsx("label",{className:"block text-sm font-semibold mb-2 mt-2",children:"Clientes - Texto"}),e.jsx("input",{type:"text",value:r.stats?.clients?.label||"",onChange:a=>d(s=>({...s,stats:{...s.stats,clients:{...s.stats.clients,label:a.target.value}}})),className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",placeholder:"Clientes Satisfeitos"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Experiência - Valor"}),e.jsx("input",{type:"text",value:r.stats?.years?.value||"",onChange:a=>d(s=>({...s,stats:{...s.stats,years:{...s.stats.years,value:a.target.value}}})),className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",placeholder:"15+"}),e.jsx("label",{className:"block text-sm font-semibold mb-2 mt-2",children:"Experiência - Texto"}),e.jsx("input",{type:"text",value:r.stats?.years?.label||"",onChange:a=>d(s=>({...s,stats:{...s.stats,years:{...s.stats.years,label:a.target.value}}})),className:"w-full px-4 py-2 border-2 rounded-lg focus:border-primary outline-none",placeholder:"Anos de Experiência"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Ge,{size:20,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Vídeos de Produção"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Exibidos abaixo das estatísticas"})]})]}),e.jsx(os,{onSubmit:b,loading:x==="video"}),r.videos.length>0&&e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4 mt-6",children:r.videos.map((a,s)=>e.jsxs("div",{className:"border-2 rounded-xl overflow-hidden group",children:[e.jsx("div",{className:"relative aspect-video bg-gray-900",children:e.jsx("video",{src:a.url,className:"w-full h-full object-cover",muted:!0})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-bold mb-1",children:a.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:a.description}),e.jsx("button",{onClick:()=>j(s),className:"text-red-500 text-sm hover:underline",children:"Remover"})]})]},s))})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-pink-500/10 rounded-lg flex items-center justify-center",children:e.jsx(ve,{size:20,className:"text-pink-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Call to Action Final"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Seção de conversão no final da página"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Título"}),e.jsx("input",{type:"text",value:r.cta.title,onChange:a=>d(s=>({...s,cta:{...s.cta,title:a.target.value}})),className:"w-full px-4 py-3 border-2 rounded-xl focus:border-primary outline-none",placeholder:"Pronto para Começar?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Descrição"}),e.jsx("textarea",{value:r.cta.description,onChange:a=>d(s=>({...s,cta:{...s.cta,description:a.target.value}})),rows:3,className:"w-full px-4 py-3 border-2 rounded-xl focus:border-primary outline-none resize-none",placeholder:"Solicite um orçamento personalizado..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Texto do Botão"}),e.jsx("input",{type:"text",value:r.cta.buttonText,onChange:a=>d(s=>({...s,cta:{...s.cta,buttonText:a.target.value}})),className:"w-full px-4 py-3 border-2 rounded-xl focus:border-primary outline-none",placeholder:"Ver Catálogo Completo"})]})]})]}),e.jsxs("button",{onClick:D,disabled:u,className:"w-full flex items-center justify-center gap-3 bg-primary text-white py-4 rounded-xl font-bold hover:opacity-90 disabled:opacity-50",children:[u?e.jsx(ee,{className:"animate-spin",size:20}):e.jsx(ye,{size:20}),"Salvar Landing Page"]})]})}function os({onSubmit:r,loading:d}){const[u,C]=c.useState(""),[x,N]=c.useState(""),[h,E]=c.useState(""),[f,T]=c.useState(""),z=()=>{u&&h&&f&&(r(u,x,h,f),C(""),N(""),E(""),T(""))};return e.jsxs("div",{className:"border-2 border-dashed rounded-xl p-6 space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Título"}),e.jsx("input",{type:"text",value:h,onChange:k=>E(k.target.value),className:"w-full px-4 py-2 border-2 rounded-lg outline-none focus:border-primary",placeholder:"Ex: Processo de Personalização"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Descrição"}),e.jsx("input",{type:"text",value:f,onChange:k=>T(k.target.value),className:"w-full px-4 py-2 border-2 rounded-lg outline-none focus:border-primary",placeholder:"Breve descrição do vídeo"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"URL do Vídeo"}),e.jsx("input",{type:"url",value:u,onChange:k=>C(k.target.value),className:"w-full px-4 py-2 border-2 rounded-lg outline-none focus:border-primary",placeholder:"https://seusite.com/videos/video-producao.mp4"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cole a URL completa do vídeo hospedado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"URL da Thumbnail (opcional)"}),e.jsx("input",{type:"url",value:x,onChange:k=>N(k.target.value),className:"w-full px-4 py-2 border-2 rounded-lg outline-none focus:border-primary",placeholder:"https://seusite.com/videos/thumb-producao.jpg"})]})]}),e.jsx("button",{onClick:z,disabled:!u||!h||!f||d,className:"w-full bg-primary text-white py-3 rounded-lg font-semibold disabled:opacity-50",children:d?"Adicionando...":"Adicionar Vídeo"})]})}function ps(){const[r,d]=c.useState("products"),[u,C]=c.useState(!1),x=async()=>{await ke(Se)},N=[{id:"products",label:"Produtos",icon:ae},{id:"categories",label:"Categorias",icon:Le},{id:"landing",label:"Página Inicial",icon:_e},{id:"config",label:"Configurações",icon:je}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40",children:e.jsxs("div",{className:"container mx-auto px-4 py-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-title font-bold",children:"Painel Admin"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>C(!u),className:"lg:hidden p-2 hover:bg-gray-100 rounded-lg",children:u?e.jsx(G,{size:24}):e.jsx(Ve,{size:24})}),e.jsxs("button",{onClick:x,className:"hidden sm:flex items-center gap-2 bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:[e.jsx(xe,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Sair"})]}),e.jsx("button",{onClick:x,className:"sm:hidden p-2 text-red-500 hover:bg-red-50 rounded-lg",children:e.jsx(xe,{size:20})})]})]}),e.jsx("nav",{className:`${u?"block":"hidden"} lg:block mt-4 lg:mt-0`,children:e.jsx("div",{className:"flex flex-col lg:flex-row gap-2 lg:gap-4 lg:mt-4",children:N.map(h=>{const E=h.icon;return e.jsxs("button",{onClick:()=>{d(h.id),C(!1)},className:`flex items-center gap-3 px-4 py-3 lg:py-2 rounded-lg font-semibold transition-all ${r===h.id?"bg-primary text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(E,{size:20}),e.jsx("span",{children:h.label})]},h.id)})})})]})}),e.jsxs("main",{className:"container mx-auto px-4 py-6 lg:py-8",children:[r==="products"&&e.jsxs("div",{className:"space-y-6 lg:space-y-8",children:[e.jsx(Ze,{}),e.jsx(Je,{})]}),r==="categories"&&e.jsx(ss,{}),r==="landing"&&e.jsx(rs,{}),r==="config"&&e.jsx(ts,{})]})]})}export{ps as default};
