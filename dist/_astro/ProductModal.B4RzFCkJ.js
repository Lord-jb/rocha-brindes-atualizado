import{j as e}from"./Providers.DcKbSSq3.js";import{r}from"./index.y5FlbPQu.js";import{c as I,o as g}from"./cloudflare.CBuuMiT9.js";import{a as z}from"./Header.SGgp_8z0.js";import{X as M}from"./x.z4jA_tG-.js";import{P as _}from"./package.Cs8q6pKs.js";import{a as P,C as $}from"./chevron-up.B4HyR3wj.js";import{M as E,S as Q}from"./shopping-cart.B3fp9bs6.js";import{P as A}from"./plus.ORqsLvC8.js";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=I("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),R=r.memo(function({product:s,onClose:h}){const{add:y}=z(),[m,i]=r.useState(1),[p,n]=r.useState("1"),[o,f]=r.useState(""),[d,v]=r.useState(!1),c=r.useMemo(()=>{const a=[];return s.imagem_url&&a.push({label:"Principal",url:g(s.imagem_url,"public")}),s.variacoes?.length&&s.variacoes.forEach(t=>{t.imagem_url&&a.push({label:t.cor,url:g(t.imagem_url,"public"),variation:t})}),a},[s]),[u,b]=r.useState(0),x=c[u]||c[0]||{label:"Principal",url:s.imagem_url?g(s.imagem_url,"public"):""},j=()=>{const a=o||x?.variation?.cor||s.variacoes?.[0]?.cor;if(s.variacoes?.length&&!a){alert("Selecione uma cor antes de adicionar ao orçamento");return}for(let t=0;t<m;t++)y({...s,cor:a});h()},N=a=>{const t=a.target.value;n(t);const l=parseInt(t);!isNaN(l)&&l>=1&&i(l)},w=()=>{const a=parseInt(p);isNaN(a)||a<1?(i(1),n("1")):(i(a),n(a.toString()))},k=()=>{const a=m+1;i(a),n(a.toString())},C=()=>{const a=Math.max(1,m-1);i(a),n(a.toString())};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/60 backdrop-blur-sm p-0 sm:p-4",children:e.jsxs("div",{className:"relative bg-white rounded-t-3xl sm:rounded-2xl w-full sm:max-w-4xl max-h-[99vh] overflow-hidden shadow-2xl flex flex-col",children:[e.jsx("button",{onClick:h,className:"absolute top-3 right-3 bg-white/90 backdrop-blur-sm text-gray-700 rounded-full p-2 z-10 hover:bg-white shadow-lg transition-all",children:e.jsx(M,{size:18})}),e.jsxs("div",{className:"flex-1 overflow-y-auto overscroll-contain",children:[e.jsx("div",{className:"bg-white flex items-center justify-center flex-shrink-0",children:x&&e.jsx("img",{src:x.url,alt:`${s.nome} - ${x.label}`,className:"w-full h-full object-contain p-3 sm:p-4 md:p-6",loading:"eager"})}),c.length>1&&e.jsx("div",{className:"border-t border-gray-200 bg-white px-2 sm:px-3 py-2 flex gap-1.5 sm:gap-2 overflow-x-auto overscroll-x-contain scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:c.map((a,t)=>e.jsx("button",{type:"button",onClick:()=>b(t),className:`relative flex-shrink-0 w-12 h-12 xs:w-14 xs:h-14 sm:w-16 sm:h-16 rounded-lg overflow-hidden transition-all ${t===u?"ring-2 ring-primary scale-105 shadow-md":"ring-1 ring-gray-200 hover:ring-gray-300 opacity-70 hover:opacity-100"}`,children:e.jsx("img",{src:g(a.url,"thumbnail"),alt:a.label,className:"w-full h-full object-cover",loading:"lazy"})},`${a.label}-${t}`))}),e.jsxs("div",{className:"p-3 xs:p-4 sm:p-5 md:p-6 space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[e.jsx("div",{className:"p-1.5 bg-primary/10 rounded-lg flex-shrink-0",children:e.jsx(_,{className:"text-primary",size:16})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h2",{className:"font-title font-bold text-base xs:text-lg sm:text-xl text-gray-900 leading-tight break-words flex-1",children:s.nome}),s.descricao&&e.jsx("button",{type:"button",onClick:()=>v(!d),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors flex-shrink-0","aria-label":d?"Ocultar descrição":"Mostrar descrição",children:d?e.jsx(P,{size:18,className:"text-primary",strokeWidth:2.5}):e.jsx($,{size:18,className:"text-gray-600",strokeWidth:2.5})})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500 mt-1",children:[e.jsx(D,{size:12,className:"flex-shrink-0"}),e.jsxs("span",{className:"font-mono font-semibold break-all",children:["SKU: ",s.id]})]})]})]}),s.categorias?.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5",children:s.categorias.map(a=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 sm:py-1 bg-gradient-to-r from-primary/10 to-primary/5 border border-primary/20 rounded-full text-[10px] sm:text-xs font-semibold text-primary",children:a},a))})]}),s.descricao&&e.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${d?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200 overflow-y-auto max-h-80",children:e.jsx("p",{className:"text-xs sm:text-sm text-gray-700 whitespace-pre-line break-words leading-relaxed",children:s.descricao})})}),s.variacoes?.length?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("label",{className:"text-xs sm:text-sm font-bold text-gray-900",children:["Escolha a cor",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),o&&e.jsxs("span",{className:"text-[10px] sm:text-xs text-primary font-semibold bg-primary/10 px-2 py-0.5 rounded-full",children:["✓ ",o]})]}),e.jsx("div",{className:"grid grid-cols-2 xs:grid-cols-3 sm:grid-cols-4 gap-1.5 sm:gap-2 max-h-[180px] overflow-y-auto overscroll-contain scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 pr-1",children:s.variacoes?.map(a=>{const t=o===a.cor;return e.jsx("button",{type:"button",onClick:()=>{f(a.cor);const l=c.findIndex(S=>S.variation?.cor===a.cor);l>=0&&b(l)},className:`px-2 py-1.5 sm:py-2 rounded-lg text-[11px] sm:text-xs font-semibold transition-all break-words text-center ${t?"bg-gradient-to-r from-primary to-primary-dark text-white shadow-md scale-[1.02]":"bg-white text-gray-700 border-2 border-gray-200 hover:border-primary hover:bg-primary/5"}`,children:a.cor},a.cor)})}),s.variacoes.length>0&&!o&&e.jsxs("p",{className:"text-[10px] sm:text-xs text-red-500 mt-2 flex items-center gap-1",children:[e.jsx("span",{className:"inline-block w-1.5 h-1.5 bg-red-500 rounded-full"}),"Selecione uma cor antes de adicionar"]})]}):null,e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-bold text-gray-900 mb-2",children:"Quantidade"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:C,className:"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-all active:scale-95 touch-manipulation",children:e.jsx(E,{size:14,className:"text-gray-700"})}),e.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:p,onChange:N,onBlur:w,className:"w-14 xs:w-16 text-center px-2 py-2 bg-gray-50 text-gray-900 text-sm sm:text-base font-bold rounded-lg border-2 border-gray-300 focus:border-primary focus:outline-none touch-manipulation"}),e.jsx("button",{type:"button",onClick:k,className:"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-all active:scale-95 touch-manipulation",children:e.jsx(A,{size:14,className:"text-gray-700"})}),e.jsx("span",{className:"text-xs text-gray-500 font-medium ml-1",children:m===1?"un.":"uns."})]})]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 bg-white p-3 sm:p-4 space-y-2 flex-shrink-0 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]",children:[e.jsxs("button",{onClick:j,className:"w-full inline-flex items-center justify-center gap-2 bg-gradient-to-r from-primary to-primary-dark text-white font-bold py-2.5 sm:py-3 px-4 rounded-xl shadow-lg hover:shadow-xl transition-all text-sm sm:text-base active:scale-[0.98] touch-manipulation",children:[e.jsx(Q,{size:18}),"Adicionar ao Orçamento"]}),e.jsx("button",{onClick:h,className:"w-full py-2 rounded-lg border-2 border-gray-300 text-xs sm:text-sm font-semibold text-gray-700 hover:bg-gray-50 transition-all active:scale-[0.98] touch-manipulation",children:"Continuar Comprando"})]})]})})});export{R as default};
