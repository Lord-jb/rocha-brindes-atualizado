const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/ProductGrid.BLWfHXn3.js","_astro/Providers._219QqyE.js","_astro/index.y5FlbPQu.js","_astro/cloudflare.jZ7Z--FC.js","_astro/search.ANEZaDz5.js","_astro/eye.Dva1jL0e.js","_astro/tag.JRU4K14C.js","_astro/ProductModal.CYo5z9-e.js","_astro/Header.-Z4MEgFy.js","_astro/minus.COkI1qTR.js","_astro/plus.DTVjaFpL.js","_astro/preload-helper.BlTxHScW.js","_astro/CategorySidebar.D9EM-d1P.js"])))=>i.map(i=>d[i]);
import{_ as P}from"./preload-helper.BlTxHScW.js";import{j as e,P as W,g as H,d as $,a as q}from"./Providers._219QqyE.js";import{r as t}from"./index.y5FlbPQu.js";import{a as V,u as U,H as G}from"./Header.-Z4MEgFy.js";import{c as x,X as y}from"./cloudflare.jZ7Z--FC.js";import{P as b,S as T}from"./search.ANEZaDz5.js";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=x("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=x("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=x("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=x("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=x("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Q=t.lazy(()=>P(()=>import("./ProductGrid.BLWfHXn3.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Y=t.lazy(()=>P(()=>import("./ProductModal.CYo5z9-e.js"),__vite__mapDeps([7,1,2,3,8,4,6,9,10,11]))),A=t.lazy(()=>P(()=>import("./CategorySidebar.D9EM-d1P.js"),__vite__mapDeps([12,1,2,4,3,11,8]))),L=[{value:"trending",label:"Mais Populares",icon:K},{value:"name-asc",label:"Nome (A-Z)",icon:b},{value:"name-desc",label:"Nome (Z-A)",icon:b},{value:"sku-asc",label:"Código (0-9)",icon:M},{value:"sku-desc",label:"Código (9-0)",icon:M},{value:"newest",label:"Mais Recentes",icon:b}];function ee({showBackButton:f=!0}){const{data:d,isLoading:R}=V(1e3),{toggle:se}=U(),[_,z]=t.useState(null),[l,O]=t.useState("Todos"),[i,E]=t.useState(""),[g,B]=t.useState("trending"),[j,v]=t.useState(!1),[n,m]=t.useState(1),[N,F]=t.useState(""),h=typeof window<"u"&&window.innerWidth<768?20:40;t.useEffect(()=>{(async()=>{try{const o=await H($(q,"config","general"));if(o.exists()){const a=o.data();a.whatsappNumber&&F(a.whatsappNumber)}}catch(o){console.error("Erro ao carregar Contato:",o)}})()},[]);const w=t.useMemo(()=>{if(!d?.products)return[];let s=d.products;if(l!=="Todos"&&(s=s.filter(a=>a.categorias?.some(r=>r.toLowerCase().includes(l.toLowerCase())))),i.trim()){const a=i.toLowerCase().trim();s=s.filter(r=>r.nome.toLowerCase().includes(a)||r.id.toLowerCase().includes(a)||r.categorias?.some(S=>S.toLowerCase().includes(a)))}return[...s].sort((a,r)=>{switch(g){case"trending":const S=(a.variacoes?.length||0)+(a.categorias?.length||0);return(r.variacoes?.length||0)+(r.categorias?.length||0)-S;case"name-asc":return a.nome.localeCompare(r.nome,"pt-BR");case"name-desc":return r.nome.localeCompare(a.nome,"pt-BR");case"sku-asc":return a.id.localeCompare(r.id,"pt-BR",{numeric:!0});case"sku-desc":return r.id.localeCompare(a.id,"pt-BR",{numeric:!0});case"newest":return r.id.localeCompare(a.id,"pt-BR",{numeric:!0});default:return 0}})},[d?.products,l,i,g]),c=Math.ceil(w.length/h),C=w.slice((n-1)*h,n*h),I=()=>{if(!N)return;const s=encodeURIComponent("Olá! Gostaria de tirar algumas dúvidas sobre os produtos.");window.open(`https://wa.me/${N}?text=${s}`,"_blank")},p=s=>{O(s),m(1)},D=s=>{B(s),v(!1),m(1)},u=s=>{E(s),m(1)},k=L.find(s=>s.value===g);return R?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Carregando catálogo..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx(G,{showBackButton:f}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 lg:py-12",children:e.jsxs("div",{className:"grid lg:grid-cols-[280px_1fr] gap-6 lg:gap-8",children:[e.jsx("aside",{className:"hidden lg:block",children:e.jsx("div",{className:"sticky top-28 space-y-6",children:e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"h-96 bg-white rounded-xl animate-pulse"}),children:e.jsx(A,{categories:d?.categories||[],selectedCategory:l,onSelectCategory:p,productsCount:d?.products.length||0})})})}),e.jsxs("main",{className:"min-w-0 space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-3 sm:p-4 space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Buscar por nome ou código...",value:i,onChange:s=>u(s.target.value),className:"w-full pl-10 pr-10 py-2.5 bg-gray-50 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all"}),i&&e.jsx("button",{onClick:()=>u(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(y,{size:18})})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"lg:hidden flex-1",children:e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"h-10 bg-gray-100 rounded-lg animate-pulse"}),children:e.jsx(A,{categories:d?.categories||[],selectedCategory:l,onSelectCategory:p,productsCount:d?.products.length||0})})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>v(!j),className:"flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5 bg-gray-50 hover:bg-gray-100 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 transition-all whitespace-nowrap",children:[k&&e.jsx(k.icon,{size:16,className:"text-primary flex-shrink-0"}),e.jsx("span",{className:"hidden sm:inline",children:k?.label}),e.jsx("span",{className:"sm:hidden",children:"Ordenar"}),e.jsx(Z,{size:16,className:`transition-transform ${j?"rotate-180":""}`})]}),j&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>v(!1)}),e.jsx("div",{className:"absolute right-0 top-full mt-2 w-56 bg-white rounded-lg shadow-xl border border-gray-200 z-50 overflow-hidden",children:L.map(s=>e.jsxs("button",{onClick:()=>D(s.value),className:`w-full flex items-center gap-3 px-4 py-3 text-sm transition-colors ${g===s.value?"bg-primary/10 text-primary font-semibold":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(s.icon,{size:16,className:"flex-shrink-0"}),e.jsx("span",{children:s.label}),g===s.value&&e.jsx("span",{className:"ml-auto text-primary",children:"✓"})]},s.value))})]})]})]}),(l!=="Todos"||i)&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-2 border-t border-gray-200",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Filtros ativos:"}),l!=="Todos"&&e.jsxs("button",{onClick:()=>p("Todos"),className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-primary/10 text-primary text-xs font-semibold rounded-full hover:bg-primary/20 transition-colors",children:[e.jsx(X,{size:12}),l,e.jsx(y,{size:12})]}),i&&e.jsxs("button",{onClick:()=>u(""),className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-primary/10 text-primary text-xs font-semibold rounded-full hover:bg-primary/20 transition-colors",children:[e.jsx(T,{size:12}),'"',i,'"',e.jsx(y,{size:12})]}),e.jsx("button",{onClick:()=>{p("Todos"),u("")},className:"text-xs text-gray-500 hover:text-gray-700 font-medium underline ml-auto",children:"Limpar tudo"})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:["Mostrando ",e.jsx("span",{className:"font-semibold text-gray-900",children:C.length})," de"," ",e.jsx("span",{className:"font-semibold text-gray-900",children:w.length})," produtos"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Página ",n," de ",c||1]})]}),C.length===0?e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 sm:p-12 text-center",children:e.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[e.jsx("div",{className:"inline-flex p-4 bg-gray-100 rounded-full",children:e.jsx(b,{size:48,className:"text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Nenhum produto encontrado"}),e.jsx("p",{className:"text-gray-600",children:"Tente ajustar os filtros ou termos de busca para encontrar o que procura."}),e.jsxs("button",{onClick:()=>{p("Todos"),u("")},className:"inline-flex items-center gap-2 px-6 py-3 bg-primary hover:bg-primary-dark text-white font-semibold rounded-lg transition-all",children:[e.jsx(y,{size:18}),"Limpar Filtros"]})]})}):e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 sm:gap-4",children:Array.from({length:h}).map((s,o)=>e.jsx("div",{className:"bg-white rounded-xl h-64 animate-pulse"},o))}),children:e.jsx(Q,{products:C,onSelect:z})}),c>1&&e.jsxs("div",{className:"flex items-center justify-center gap-2 pt-4",children:[e.jsx("button",{onClick:()=>m(s=>Math.max(1,s-1)),disabled:n===1,className:"px-3 sm:px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Anterior"}),e.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:Array.from({length:Math.min(5,c)},(s,o)=>{let a;return c<=5||n<=3?a=o+1:n>=c-2?a=c-4+o:a=n-2+o,e.jsx("button",{onClick:()=>m(a),className:`w-8 h-8 sm:w-10 sm:h-10 rounded-lg text-sm font-medium transition-all ${n===a?"bg-primary text-white shadow-md":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:a},a)})}),e.jsx("button",{onClick:()=>m(s=>Math.min(c,s+1)),disabled:n===c,className:"px-3 sm:px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Próxima"})]})]})]})}),_&&e.jsx(t.Suspense,{fallback:null,children:e.jsx(Y,{product:_,onClose:()=>z(null)})}),N&&e.jsxs("button",{onClick:I,className:"fixed bottom-20 sm:bottom-6 right-4 sm:right-6 bg-green-500 hover:bg-green-600 text-white p-3 sm:p-4 rounded-full shadow-2xl hover:shadow-3xl transition-all duration-300 hover:scale-110 z-30 group","aria-label":"Falar no WhatsApp",children:[e.jsx(J,{size:24,className:"sm:w-7 sm:h-7"}),e.jsx("span",{className:"absolute right-full mr-3 px-3 py-2 bg-gray-900 text-white text-sm font-medium rounded-lg whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:"Precisa de ajuda?"})]})]})}function de({showBackButton:f=!0}){return e.jsx(W,{children:e.jsx(ee,{showBackButton:f})})}export{Z as C,X as F,de as a};
