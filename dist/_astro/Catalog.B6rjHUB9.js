const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/CategorySidebar.CZTVFwnE.js","_astro/Providers.DcKbSSq3.js","_astro/index.y5FlbPQu.js","_astro/search.DXTbsza8.js","_astro/cloudflare.CBuuMiT9.js","_astro/x.z4jA_tG-.js","_astro/chevron-up.B4HyR3wj.js","_astro/ProductGrid.C0oNDjMe.js","_astro/eye.REUo0HNQ.js","_astro/ProductModal.BcpYxriA.js","_astro/Header.CmXsLVDO.js","_astro/package.Cs8q6pKs.js","_astro/minus.0_C7JIIw.js","_astro/plus.ORqsLvC8.js","_astro/CartSidebar.CkSgW6Kn.js","_astro/trash-2.C3WEIqJe.js","_astro/Footer.Ba7k2GNQ.js","_astro/phone.CFc2kv0p.js"])))=>i.map(i=>d[i]);
import{_ as m}from"./preload-helper.BlTxHScW.js";import{j as e,P as z,g as k,d as I,a as R}from"./Providers.DcKbSSq3.js";import{r as t}from"./index.y5FlbPQu.js";import{u as M,a as T,s as D,H as O,M as U}from"./Header.CmXsLVDO.js";import{p as V,C as W,a as G}from"./cloudflare.CBuuMiT9.js";const F=t.lazy(()=>m(()=>import("./CategorySidebar.CZTVFwnE.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),B=t.lazy(()=>m(()=>import("./ProductGrid.C0oNDjMe.js"),__vite__mapDeps([7,1,2,4,8]))),H=t.lazy(()=>m(()=>import("./ProductModal.BcpYxriA.js"),__vite__mapDeps([9,1,2,4,10,5,11,6,12,13]))),$=t.lazy(()=>m(()=>import("./CartSidebar.CkSgW6Kn.js"),__vite__mapDeps([14,1,2,10,4,5,12,13,15]))),q=t.lazy(()=>m(()=>import("./Footer.Ba7k2GNQ.js"),__vite__mapDeps([16,1,2,4,17])));function J(){const{data:o,isLoading:v}=M(1e3),{category:r,search:n,add:y,setCategory:u,setSearch:g}=T(),[x,b]=t.useState(null),[N,_]=t.useState("5589994333316"),[i,f]=t.useState(0),[C,P]=t.useState(!1);t.useEffect(()=>{const s=()=>{P(window.innerWidth<768)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const d=C?20:40;t.useEffect(()=>{if(o){D(o);const s=[];o.layout.logo&&s.push(o.layout.logo),V(s)}},[o]),t.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("categoria");a&&u(a)},[u]),t.useEffect(()=>{f(0),window.scrollTo({top:0,behavior:"smooth"})},[r,n]);const p=t.useMemo(()=>o?o.products.filter(s=>{const a=r==="Todos"||s.categorias?.includes(r),c=!n||s.nome.toLowerCase().includes(n.toLowerCase())||s.id.toLowerCase().includes(n.toLowerCase());return a&&c}):[],[o,r,n]),E=t.useMemo(()=>{const s=i*d;return p.slice(s,s+d)},[p,i,d]),h=Math.ceil(p.length/d),j=s=>{f(s),window.scrollTo({top:0,behavior:"smooth"})};t.useEffect(()=>{(async()=>{try{const a=await k(I(R,"config","general"));if(a.exists()){const c=a.data();c.whatsappNumber&&_(c.whatsappNumber)}}catch(a){console.error("Erro ao carregar Contato:",a)}})()},[]);const S=()=>{const s=N.replace(/\D/g,""),a=encodeURIComponent("Olá! Gostaria de mais informações sobre os produtos."),c=`https://wa.me/${s}?text=${a}`;/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?window.location.href=c:window.open(c,"_blank")},w=e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 sm:gap-4",children:[...Array(d)].map((s,a)=>e.jsx("div",{className:"bg-white rounded-xl h-64 sm:h-80 animate-pulse"},a))}),L=()=>h<=1?null:e.jsxs("div",{className:"mt-8 mb-6 flex items-center justify-center gap-2",children:[e.jsxs("button",{onClick:()=>j(i-1),disabled:i===0,className:"flex items-center gap-1.5 px-3 py-2 bg-white border-2 border-gray-300 rounded-lg disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-50 hover:border-primary transition-all font-medium text-xs sm:text-sm",children:[e.jsx(W,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Anterior"})]}),e.jsxs("span",{className:"text-xs sm:text-sm text-gray-600 font-medium px-2",children:[e.jsx("span",{className:"font-bold text-primary",children:i+1})," de"," ",e.jsx("span",{className:"font-bold",children:h})]}),e.jsxs("button",{onClick:()=>j(i+1),disabled:i>=h-1,className:"flex items-center gap-1.5 px-3 py-2 bg-white border-2 border-gray-300 rounded-lg disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-50 hover:border-primary transition-all font-medium text-xs sm:text-sm",children:[e.jsx("span",{className:"hidden sm:inline",children:"Próxima"}),e.jsx(G,{size:16})]})]}),l=o?.categories.find(s=>s.nome===r),A=o?.categories.map(s=>s.nome)||[];return e.jsxs(e.Fragment,{children:[e.jsx(O,{showBackButton:!0}),e.jsx("main",{className:"min-h-screen bg-gray-50 pt-3 sm:pt-6 pb-20 lg:pb-4",children:e.jsx("div",{className:"container mx-auto px-3 sm:px-4",children:e.jsxs("div",{className:"grid lg:grid-cols-[280px_1fr] gap-6",children:[e.jsx(t.Suspense,{fallback:null,children:e.jsx(F,{categories:A,selected:r,onSelect:u,search:n,onSearch:g})}),e.jsxs("div",{className:"min-w-0",children:[l&&(l.descricao||l.videoUrl)&&e.jsxs("div",{className:"mb-6 bg-white rounded-2xl shadow-card overflow-hidden",children:[l.videoUrl&&e.jsx("div",{className:"relative w-full aspect-video bg-gray-900",children:e.jsx("video",{src:l.videoUrl,className:"w-full h-full object-cover",autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}),l.descricao&&e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-title font-bold text-dark mb-2",children:r}),e.jsx("p",{className:"text-sm sm:text-base text-gray-700 leading-relaxed",children:l.descricao})]})]}),v?w:p.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("p",{className:"text-lg text-gray-500",children:"Nenhum produto encontrado"}),n&&e.jsx("button",{onClick:()=>g(""),className:"mt-4 px-5 py-2 bg-primary text-white rounded-lg hover:opacity-90 transition-all text-sm",children:"Limpar busca"})]}):e.jsxs(e.Fragment,{children:[e.jsx(t.Suspense,{fallback:w,children:e.jsx(B,{products:E,onView:b,onAdd:y})}),L()]})]})]})})}),e.jsx("button",{onClick:S,className:"fixed bottom-20 lg:bottom-6 right-4 bg-green-500 hover:bg-green-600 text-white p-3 sm:p-4 rounded-full shadow-2xl hover:scale-110 transition-all z-40","aria-label":"Contato WhatsApp",children:e.jsx(U,{size:24})}),e.jsxs(t.Suspense,{fallback:null,children:[x&&e.jsx(H,{product:x,onClose:()=>b(null)}),e.jsx($,{}),e.jsx(q,{})]})]})}function ee(){return e.jsx(z,{children:e.jsx(J,{})})}export{ee as default};
