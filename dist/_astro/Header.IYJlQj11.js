import{u as J,c as L,o as $}from"./chevron-right.CYQHz5DZ.js";import{c as z,g as G,q as k,l as Q,e as H,f as O,b as j,d as Z,j as w}from"./Providers.Tkr5jSlj.js";import{a as P,g as K,R as X}from"./index.y5FlbPQu.js";function Y(e=6){return J({queryKey:["catalog",e],queryFn:async()=>{const[o,r,n]=await Promise.all([z(k(O(j,"produtos"),H("createdAt","desc"),Q(e))),z(k(O(j,"categorias"),H("nome"))),G(Z(j,"config","layout"))]),s=o.docs.map(f=>({id:f.id,...f.data()})),t=r.docs.map(f=>({id:f.id,...f.data()})),u=n.exists()?n.data():{},g={logo:u.logo||"",banners:(u.banners||[]).map(f=>({url:f,alt:"Banner Rocha Brindes"})),promotions:u.promotions||[],popups:u.popups||[],whatsapp:u.whatsapp,companyInfo:u.companyInfo};return{products:s,categories:t,layout:g}},staleTime:600*1e3,gcTime:1800*1e3,placeholderData:V()})}function V(){if(!(typeof window>"u"))try{const e=localStorage.getItem("catalog-cache");if(e){const o=JSON.parse(e);if(Date.now()-o.timestamp<600*1e3)return o.catalog}}catch{return}}function Ie(e){if(!(typeof window>"u"))try{localStorage.setItem("catalog-cache",JSON.stringify({catalog:e,timestamp:Date.now()}))}catch{console.warn("Failed to cache catalog")}}const ee={},F=e=>{let o;const r=new Set,n=(p,m)=>{const l=typeof p=="function"?p(o):p;if(!Object.is(l,o)){const h=o;o=m??(typeof l!="object"||l===null)?l:Object.assign({},o,l),r.forEach(v=>v(o,h))}},s=()=>o,f={setState:n,getState:s,getInitialState:()=>d,subscribe:p=>(r.add(p),()=>r.delete(p)),destroy:()=>{(ee?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},d=o=e(n,s,f);return f},te=e=>e?F(e):F;var R={exports:{}},D={},C={exports:{}},q={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M;function re(){if(M)return q;M=1;var e=P();function o(m,l){return m===l&&(m!==0||1/m===1/l)||m!==m&&l!==l}var r=typeof Object.is=="function"?Object.is:o,n=e.useState,s=e.useEffect,t=e.useLayoutEffect,u=e.useDebugValue;function g(m,l){var h=l(),v=n({inst:{value:h,getSnapshot:l}}),a=v[0].inst,i=v[1];return t(function(){a.value=h,a.getSnapshot=l,f(a)&&i({inst:a})},[m,h,l]),s(function(){return f(a)&&i({inst:a}),m(function(){f(a)&&i({inst:a})})},[m]),u(h),h}function f(m){var l=m.getSnapshot;m=m.value;try{var h=l();return!r(m,h)}catch{return!0}}function d(m,l){return l()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:g;return q.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,q}var T;function ne(){return T||(T=1,C.exports=re()),C.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W;function oe(){if(W)return D;W=1;var e=P(),o=ne();function r(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var n=typeof Object.is=="function"?Object.is:r,s=o.useSyncExternalStore,t=e.useRef,u=e.useEffect,g=e.useMemo,f=e.useDebugValue;return D.useSyncExternalStoreWithSelector=function(d,p,m,l,h){var v=t(null);if(v.current===null){var a={hasValue:!1,value:null};v.current=a}else a=v.current;v=g(function(){function y(b){if(!c){if(c=!0,S=b,b=l(b),h!==void 0&&a.hasValue){var E=a.value;if(h(E,b))return x=E}return x=b}if(E=x,n(S,b))return E;var N=l(b);return h!==void 0&&h(E,N)?(S=b,E):(S=b,x=N)}var c=!1,S,x,I=m===void 0?null:m;return[function(){return y(p())},I===null?void 0:function(){return y(I())}]},[p,m,l,h]);var i=s(d,v[0],v[1]);return u(function(){a.hasValue=!0,a.value=i},[i]),f(i),i},D}var U;function ae(){return U||(U=1,R.exports=oe()),R.exports}var se=ae();const ie=K(se),B={},{useDebugValue:ce}=X,{useSyncExternalStoreWithSelector:ue}=ie;let A=!1;const le=e=>e;function de(e,o=le,r){(B?"production":void 0)!=="production"&&r&&!A&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),A=!0);const n=ue(e.subscribe,e.getState,e.getServerState||e.getInitialState,o,r);return ce(n),n}const me=e=>{(B?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const o=typeof e=="function"?te(e):e,r=(n,s)=>de(o,n,s);return Object.assign(r,o),r},fe=e=>me,he={};function pe(e,o){let r;try{r=e()}catch{return}return{getItem:s=>{var t;const u=f=>f===null?null:JSON.parse(f,void 0),g=(t=r.getItem(s))!=null?t:null;return g instanceof Promise?g.then(u):u(g)},setItem:(s,t)=>r.setItem(s,JSON.stringify(t,void 0)),removeItem:s=>r.removeItem(s)}}const _=e=>o=>{try{const r=e(o);return r instanceof Promise?r:{then(n){return _(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return _(n)(r)}}}},ve=(e,o)=>(r,n,s)=>{let t={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:i=>i,version:0,merge:(i,y)=>({...y,...i}),...o},u=!1;const g=new Set,f=new Set;let d;try{d=t.getStorage()}catch{}if(!d)return e((...i)=>{console.warn(`[zustand persist middleware] Unable to update item '${t.name}', the given storage is currently unavailable.`),r(...i)},n,s);const p=_(t.serialize),m=()=>{const i=t.partialize({...n()});let y;const c=p({state:i,version:t.version}).then(S=>d.setItem(t.name,S)).catch(S=>{y=S});if(y)throw y;return c},l=s.setState;s.setState=(i,y)=>{l(i,y),m()};const h=e((...i)=>{r(...i),m()},n,s);let v;const a=()=>{var i;if(!d)return;u=!1,g.forEach(c=>c(n()));const y=((i=t.onRehydrateStorage)==null?void 0:i.call(t,n()))||void 0;return _(d.getItem.bind(d))(t.name).then(c=>{if(c)return t.deserialize(c)}).then(c=>{if(c)if(typeof c.version=="number"&&c.version!==t.version){if(t.migrate)return t.migrate(c.state,c.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return c.state}).then(c=>{var S;return v=t.merge(c,(S=n())!=null?S:h),r(v,!0),m()}).then(()=>{y?.(v,void 0),u=!0,f.forEach(c=>c(v))}).catch(c=>{y?.(void 0,c)})};return s.persist={setOptions:i=>{t={...t,...i},i.getStorage&&(d=i.getStorage())},clearStorage:()=>{d?.removeItem(t.name)},getOptions:()=>t,rehydrate:()=>a(),hasHydrated:()=>u,onHydrate:i=>(g.add(i),()=>{g.delete(i)}),onFinishHydration:i=>(f.add(i),()=>{f.delete(i)})},a(),v||h},ge=(e,o)=>(r,n,s)=>{let t={storage:pe(()=>localStorage),partialize:a=>a,version:0,merge:(a,i)=>({...i,...a}),...o},u=!1;const g=new Set,f=new Set;let d=t.storage;if(!d)return e((...a)=>{console.warn(`[zustand persist middleware] Unable to update item '${t.name}', the given storage is currently unavailable.`),r(...a)},n,s);const p=()=>{const a=t.partialize({...n()});return d.setItem(t.name,{state:a,version:t.version})},m=s.setState;s.setState=(a,i)=>{m(a,i),p()};const l=e((...a)=>{r(...a),p()},n,s);s.getInitialState=()=>l;let h;const v=()=>{var a,i;if(!d)return;u=!1,g.forEach(c=>{var S;return c((S=n())!=null?S:l)});const y=((i=t.onRehydrateStorage)==null?void 0:i.call(t,(a=n())!=null?a:l))||void 0;return _(d.getItem.bind(d))(t.name).then(c=>{if(c)if(typeof c.version=="number"&&c.version!==t.version){if(t.migrate)return[!0,t.migrate(c.state,c.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,c.state];return[!1,void 0]}).then(c=>{var S;const[x,I]=c;if(h=t.merge(I,(S=n())!=null?S:l),r(h,!0),x)return p()}).then(()=>{y?.(h,void 0),h=n(),u=!0,f.forEach(c=>c(h))}).catch(c=>{y?.(void 0,c)})};return s.persist={setOptions:a=>{t={...t,...a},a.storage&&(d=a.storage)},clearStorage:()=>{d?.removeItem(t.name)},getOptions:()=>t,rehydrate:()=>v(),hasHydrated:()=>u,onHydrate:a=>(g.add(a),()=>{g.delete(a)}),onFinishHydration:a=>(f.add(a),()=>{f.delete(a)})},t.skipHydration||v(),h||l},ye=(e,o)=>"getStorage"in o||"serialize"in o||"deserialize"in o?((he?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),ve(e,o)):ge(e,o),Se=ye,be=fe()(Se((e,o)=>({items:[],isOpen:!1,count:0,category:"Todos",search:"",add:r=>{const n=o().items,t=n.find(u=>u.id===r.id)?n.map(u=>u.id===r.id?{...u,quantity:u.quantity+1}:u):[...n,{...r,quantity:1}];e({items:t,count:t.reduce((u,g)=>u+g.quantity,0)})},remove:r=>{const n=o().items.filter(s=>s.id!==r);e({items:n,count:n.reduce((s,t)=>s+t.quantity,0)})},updateQuantity:(r,n)=>{const s=o().items.map(t=>t.id===r?{...t,quantity:n}:t);e({items:s,count:s.reduce((t,u)=>t+u.quantity,0)})},clear:()=>e({items:[],count:0}),toggle:()=>e({isOpen:!o().isOpen}),setCategory:r=>e({category:r}),setSearch:r=>e({search:r})}),{name:"cart-storage"}));/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=L("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=L("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);function Re(){const{count:e,toggle:o}=be(),{data:r,isLoading:n}=Y(),s=r?.layout.logo,t=s?$(s,"thumbnail"):"";return w.jsx("header",{className:"sticky top-0 z-40 bg-white shadow-md border-b border-gray-100",children:w.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:w.jsxs("div",{className:"flex items-center justify-between h-16 sm:h-20",children:[w.jsx("a",{href:"/",className:"flex items-center",children:n||!t?w.jsx("div",{className:"h-10 sm:h-14 md:h-16 w-32 sm:w-48 md:w-64 bg-gray-200 animate-pulse rounded"}):w.jsx("img",{src:t,alt:"Rocha Brindes",className:"h-5 sm:h-7 md:h-9 w-auto object-contain",loading:"eager"})}),w.jsxs("button",{onClick:o,className:"relative p-2.5 sm:p-3 bg-primary hover:bg-primary-dark text-white rounded-full transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105","aria-label":"Abrir carrinho",children:[w.jsx(we,{size:20,className:"sm:w-6 sm:h-6",strokeWidth:2.5}),e>0&&w.jsx("span",{className:"absolute -top-1.5 -right-1.5 sm:-top-2 sm:-right-2 bg-accent text-dark font-bold text-[10px] sm:text-xs min-w-[20px] sm:min-w-[24px] h-[20px] sm:h-[24px] flex items-center justify-center rounded-full border-2 sm:border-3 border-white shadow-md",children:e})]})]})})})}export{Re as H,je as M,be as a,Ie as s,Y as u};
