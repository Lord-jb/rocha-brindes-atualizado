import{j as e}from"./Providers._219QqyE.js";import{r as o}from"./index.y5FlbPQu.js";import{c as N,o as b,X as Q}from"./cloudflare.jZ7Z--FC.js";import{u as V}from"./Header.-Z4MEgFy.js";import{P as L}from"./search.ANEZaDz5.js";import{T as q}from"./tag.JRU4K14C.js";import{C}from"./Catalog.C7vwQ3s6.js";import{M as R}from"./minus.COkI1qTR.js";import{P as T}from"./plus.DTVjaFpL.js";import"./preload-helper.BlTxHScW.js";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=N("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=N("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),w=h=>{const r={branco:"#FFFFFF",preto:"#000000",vermelho:"#DC2626",azul:"#2563EB",verde:"#16A34A",amarelo:"#EAB308",laranja:"#EA580C",rosa:"#EC4899",roxo:"#9333EA",marrom:"#92400E",cinza:"#6B7280",bege:"#D4C4A8",dourado:"#F59E0B",prata:"#C0C0C0","azul marinho":"#1E3A8A","azul claro":"#60A5FA","azul royal":"#1E40AF","azul turquesa":"#06B6D4","azul bebê":"#BFDBFE","azul petróleo":"#155E75","azul céu":"#7DD3FC","verde escuro":"#14532D","verde claro":"#86EFAC","verde limão":"#84CC16","verde musgo":"#65A30D","verde água":"#5EEAD4","verde bandeira":"#15803D","verde militar":"#4D7C0F","vermelho escuro":"#7F1D1D","vermelho vinho":"#881337","vermelho cereja":"#BE123C",bordô:"#991B1B",vinho:"#881337",marsala:"#9F1239","rosa claro":"#FBCFE8","rosa pink":"#DB2777","rosa bebê":"#FECDD3","rosa shocking":"#E11D48","rosa antigo":"#F472B6","roxo escuro":"#581C87","roxo claro":"#C084FC",lilás:"#D8B4FE",violeta:"#7C3AED",magenta:"#C026D3",lavanda:"#E9D5FF","laranja claro":"#FB923C","laranja escuro":"#C2410C",coral:"#FB7185",terracota:"#DC2626",pêssego:"#FED7AA","amarelo claro":"#FDE047","amarelo ouro":"#CA8A04","amarelo canário":"#FACC15",mostarda:"#A16207","marrom claro":"#D97706","marrom escuro":"#78350F",chocolate:"#92400E",café:"#57534E",caramelo:"#B45309",mogno:"#7C2D12",madeira:"#A16207","cinza escuro":"#374151","cinza claro":"#D1D5DB","cinza chumbo":"#4B5563",grafite:"#1F2937",carvão:"#27272A","off white":"#FAFAF9",creme:"#FEF3C7",areia:"#E7E5E4",nude:"#FAF5FF",champagne:"#FDE68A",ivory:"#FFFBEB",perola:"#F5F5F4",inox:"#A8A29E",bronze:"#B45309",cobre:"#C2410C",cromado:"#D4D4D8","ouro rose":"#F59E0B","grafite metalizado":"#52525B","azul pastel":"#DBEAFE","verde pastel":"#DCFCE7","rosa pastel":"#FCE7F3","amarelo pastel":"#FEF9C3","lilás pastel":"#F3E8FF","pink neon":"#FF1493","verde neon":"#39FF14","amarelo neon":"#FFFF00","laranja neon":"#FF6600","verde oliva":"#84CC16",terra:"#78350F",ocre:"#D97706",tijolo:"#B91C1C","verde floresta":"#166534","azul navy":"#172554"},n=h.toLowerCase();if(r[n])return r[n];for(const[l,g]of Object.entries(r))if(n.includes(l))return g;let c=0;for(let l=0;l<h.length;l++)c=h.charCodeAt(l)+((c<<5)-c);return`hsl(${c%360}, 60%, 50%)`},re=o.memo(function({product:r,onClose:n}){const{add:c}=V(),[m,l]=o.useState(1),[g,x]=o.useState("1"),[d,E]=o.useState(""),[y,D]=o.useState(!1),[p,k]=o.useState(!1),i=typeof window<"u"&&window.innerWidth>=768,A=i?!0:p,z=i?!0:y,u=o.useMemo(()=>{const a=[];return r.imagem_url&&a.push({label:"Principal",url:b(r.imagem_url,"public")}),r.variacoes?.length&&r.variacoes.forEach(s=>{s.imagem_url&&a.push({label:s.cor,url:b(s.imagem_url,"public"),variation:s})}),a},[r]),[j,F]=o.useState(0),f=u[j]||u[0]||{label:"Principal",url:r.imagem_url?b(r.imagem_url,"public"):""},v=o.useMemo(()=>r.variacoes?.length?r.variacoes.map(a=>({name:a.cor,color:w(a.cor)})):[],[r.variacoes]),B=()=>{const a=d||f?.variation?.cor||r.variacoes?.[0]?.cor;if(r.variacoes?.length&&!a){alert("Selecione uma cor antes de adicionar ao orçamento");return}for(let s=0;s<m;s++)c({...r,cor:a});n()},S=a=>{const s=a.target.value;x(s);const t=parseInt(s);!isNaN(t)&&t>=1&&l(t)},I=()=>{const a=parseInt(g);isNaN(a)||a<1?(l(1),x("1")):(l(a),x(a.toString()))},$=()=>{const a=m+1;l(a),x(a.toString())},M=()=>{const a=Math.max(1,m-1);l(a),x(a.toString())},P=a=>{E(a);const s=u.findIndex(t=>t.variation?.cor===a);s>=0&&F(s)};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/60 backdrop-blur-sm p-0 sm:p-4 sm:py-8",children:e.jsxs("div",{className:"relative bg-white rounded-t-3xl sm:rounded-2xl w-full sm:max-w-6xl max-h-[98vh] sm:max-h-[calc(100vh-4rem)] overflow-hidden shadow-2xl flex flex-col",children:[e.jsx("button",{onClick:n,className:"absolute top-3 right-3 bg-white/90 backdrop-blur-sm text-gray-700 rounded-full p-2 z-10 hover:bg-white shadow-lg transition-all",children:e.jsx(Q,{size:18})}),e.jsxs("div",{className:"flex-1 flex flex-col md:flex-row overflow-hidden",children:[e.jsxs("div",{className:"md:w-1/2 flex flex-col bgwhite",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center",children:f&&e.jsx("img",{src:f.url,alt:`${r.nome} - ${f.label}`,className:"w-full h-full object-contain max-h-[300px] md:max-h-full",loading:"eager"})}),u.length>1&&e.jsx("div",{className:"border-t border-gray-200 bg-white px-3 py-2 flex gap-2 overflow-x-auto overscroll-x-contain scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:u.map((a,s)=>e.jsx("button",{type:"button",onClick:()=>F(s),className:`relative flex-shrink-0 w-16 h-16 md:w-20 md:h-20 rounded-lg overflow-hidden transition-all ${s===j?"ring-2 ring-primary scale-105 shadow-md":"ring-1 ring-gray-200 hover:ring-gray-300 opacity-70 hover:opacity-100"}`,children:e.jsx("img",{src:b(a.url,"thumbnail"),alt:a.label,className:"w-full h-full object-cover",loading:"lazy"})},`${a.label}-${s}`))})]}),e.jsxs("div",{className:"md:w-1/2 flex flex-col",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto overscroll-contain p-4 md:p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[e.jsx("div",{className:"p-1.5 bg-primary/10 rounded-lg flex-shrink-0",children:e.jsx(L,{className:"text-primary",size:18})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"font-title font-bold text-lg md:text-2xl text-gray-900 leading-tight break-words",children:r.nome}),e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-gray-500 mt-1",children:[e.jsx(q,{size:14,className:"flex-shrink-0"}),e.jsxs("span",{className:"font-mono font-semibold break-all",children:["SKU: ",r.id]})]})]})]}),r.categorias&&r.categorias.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5",children:r.categorias.map(a=>e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 bg-gradient-to-r from-primary/10 to-primary/5 border border-primary/20 rounded-full text-xs font-semibold text-primary",children:a},a))})]}),r.descricao&&e.jsxs("div",{children:[!i&&e.jsxs("button",{type:"button",onClick:()=>D(!y),className:"w-full flex items-center justify-between p-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors mb-2",children:[e.jsx("span",{className:"text-sm font-bold text-gray-900",children:"Descrição"}),e.jsx(C,{size:16,className:`text-gray-600 transition-transform ${y?"rotate-180":""}`})]}),i&&e.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-2",children:"Descrição"}),e.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${z?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200 overflow-y-auto max-h-60",children:e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line break-words leading-relaxed",children:r.descricao})})})]}),v.length>0&&e.jsxs("div",{children:[e.jsxs("button",{type:"button",onClick:()=>k(!p),className:`w-full flex items-center justify-between p-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors mb-2 ${i?"md:pointer-events-none":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{size:18,className:"text-primary"}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:["Cores disponíveis (",v.length,")",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]})]}),!i&&e.jsx(C,{size:18,className:`text-gray-600 transition-transform ${p?"rotate-180":""}`})]}),d&&!p&&!i&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-primary/5 rounded-lg mb-2",children:[e.jsx("div",{className:"w-7 h-7 rounded-full border-2 border-white shadow-md ring-2 ring-primary",style:{backgroundColor:w(d)}}),e.jsx("span",{className:"text-sm font-semibold text-primary",children:d})]}),e.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${A?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 gap-3 p-3 bg-gray-50 rounded-lg max-h-[400px] overflow-y-auto overscroll-contain scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:v.map(a=>{const s=d===a.name,t=a.color,_=t==="#FFFFFF"||t.toLowerCase().includes("fff");return e.jsxs("button",{type:"button",onClick:()=>P(a.name),className:"flex flex-col items-center gap-1.5 group",title:a.name,children:[e.jsxs("div",{className:`relative w-14 h-14 rounded-full transition-all ${s?"ring-4 ring-primary ring-offset-2 scale-110 shadow-lg":"ring-2 ring-gray-300 hover:ring-primary/50 hover:scale-105"}`,children:[e.jsx("div",{className:`w-full h-full rounded-full ${_?"border border-gray-200":""}`,style:{backgroundColor:t}}),s&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"bg-white rounded-full p-1 shadow-md",children:e.jsx("svg",{className:"w-5 h-5 text-primary",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})]}),e.jsx("span",{className:`text-[10px] font-medium text-center leading-tight line-clamp-2 max-w-[60px] ${s?"text-primary font-bold":"text-gray-600"}`,children:a.name})]},a.name)})})}),!d&&e.jsxs("p",{className:"text-xs text-red-500 mt-2 flex items-center gap-1",children:[e.jsx("span",{className:"inline-block w-1.5 h-1.5 bg-red-500 rounded-full"}),"Selecione uma cor antes de adicionar"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Quantidade"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:M,className:"p-2.5 bg-gray-100 hover:bg-gray-200 rounded-lg transition-all active:scale-95 touch-manipulation",children:e.jsx(R,{size:16,className:"text-gray-700"})}),e.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:g,onChange:S,onBlur:I,className:"w-20 text-center px-3 py-2.5 bg-gray-50 text-gray-900 text-base font-bold rounded-lg border-2 border-gray-300 focus:border-primary focus:outline-none touch-manipulation"}),e.jsx("button",{type:"button",onClick:$,className:"p-2.5 bg-gray-100 hover:bg-gray-200 rounded-lg transition-all active:scale-95 touch-manipulation",children:e.jsx(T,{size:16,className:"text-gray-700"})}),e.jsx("span",{className:"text-sm text-gray-500 font-medium ml-1",children:m===1?"unidade":"unidades"})]})]}),e.jsx("div",{className:"h-20 md:hidden"})]}),e.jsx("div",{className:"border-t border-gray-200 bg-white p-4 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]",children:e.jsxs("div",{className:"flex items-stretch gap-3",children:[e.jsx("button",{onClick:n,className:"flex-1 py-3 rounded-xl border-2 border-gray-300 text-sm font-semibold text-gray-700 hover:bg-gray-50 transition-all active:scale-[0.98] touch-manipulation",children:"Continuar Comprando"}),e.jsxs("button",{onClick:B,className:"px-6 py-3 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl shadow-lg hover:shadow-xl transition-all active:scale-[0.98] touch-manipulation flex items-center justify-center gap-2 font-semibold text-sm whitespace-nowrap",children:[e.jsx(O,{size:20,strokeWidth:2.5}),e.jsx("span",{className:"hidden sm:inline",children:"Adicionar"})]})]})})]})]})]})})});export{re as default};
