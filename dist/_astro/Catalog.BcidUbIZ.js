const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/CategorySidebar.B5nj5DMF.js","_astro/Providers.DcKbSSq3.js","_astro/index.y5FlbPQu.js","_astro/search.DKiS5xs1.js","_astro/cloudflare.CBuuMiT9.js","_astro/x.z4jA_tG-.js","_astro/chevron-up.B4HyR3wj.js","_astro/grid-3x3.vbt91aiS.js","_astro/ProductGrid.C0oNDjMe.js","_astro/eye.REUo0HNQ.js","_astro/ProductModal.B4RzFCkJ.js","_astro/Header.SGgp_8z0.js","_astro/package.Cs8q6pKs.js","_astro/shopping-cart.B3fp9bs6.js","_astro/plus.ORqsLvC8.js","_astro/CartSidebar.Dw3536eM.js","_astro/trash-2.C3WEIqJe.js","_astro/Footer.Ba7k2GNQ.js","_astro/phone.CFc2kv0p.js"])))=>i.map(i=>d[i]);
import{_ as x}from"./preload-helper.BlTxHScW.js";import{j as e,P as k,g as z,d as I,a as M}from"./Providers.DcKbSSq3.js";import{r as t}from"./index.y5FlbPQu.js";import{u as R,a as T,s as U,H as W,M as D}from"./Header.SGgp_8z0.js";import{p as O,C as V,a as G}from"./cloudflare.CBuuMiT9.js";import{S as F}from"./search.DKiS5xs1.js";const $=t.lazy(()=>x(()=>import("./CategorySidebar.B5nj5DMF.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),H=t.lazy(()=>x(()=>import("./ProductGrid.C0oNDjMe.js"),__vite__mapDeps([8,1,2,4,9]))),B=t.lazy(()=>x(()=>import("./ProductModal.B4RzFCkJ.js"),__vite__mapDeps([10,1,2,4,11,5,12,6,13,14]))),K=t.lazy(()=>x(()=>import("./CartSidebar.Dw3536eM.js"),__vite__mapDeps([15,1,2,11,4,5,13,14,16]))),q=t.lazy(()=>x(()=>import("./Footer.Ba7k2GNQ.js"),__vite__mapDeps([17,1,2,4,18])));function J(){const{data:r,isLoading:C}=R(1e3),{category:i,search:n,add:_,setCategory:p,setSearch:h}=T(),[g,b]=t.useState(null),[P,E]=t.useState("5589994333316"),[o,f]=t.useState(0),[j,S]=t.useState(!1);t.useEffect(()=>{const s=()=>{S(window.innerWidth<768)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const l=j?20:40;t.useEffect(()=>{if(r){U(r);const s=[];r.layout.logo&&s.push(r.layout.logo),O(s)}},[r]),t.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("categoria");a&&p(a)},[p]),t.useEffect(()=>{f(0),window.scrollTo({top:0,behavior:"smooth"})},[i,n]);const d=t.useMemo(()=>r?r.products.filter(s=>{const a=i==="Todos"||s.categorias?.includes(i),m=!n||s.nome.toLowerCase().includes(n.toLowerCase())||s.id.toLowerCase().includes(n.toLowerCase());return a&&m}):[],[r,i,n]),A=t.useMemo(()=>{const s=o*l;return d.slice(s,s+l)},[d,o,l]),u=Math.ceil(d.length/l),y=s=>{f(s),window.scrollTo({top:0,behavior:"smooth"})};t.useEffect(()=>{(async()=>{try{const a=await z(I(M,"config","general"));if(a.exists()){const m=a.data();m.whatsappNumber&&E(m.whatsappNumber)}}catch(a){console.error("Erro ao carregar Contato:",a)}})()},[]);const v=()=>{const s=P.replace(/\D/g,""),a=encodeURIComponent("Olá! Gostaria de mais informações sobre os produtos."),m=`https://wa.me/${s}?text=${a}`;/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?window.location.href=m:window.open(m,"_blank")},w=e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 sm:gap-4",children:[...Array(l)].map((s,a)=>e.jsx("div",{className:"bg-white rounded-xl h-64 sm:h-80 animate-pulse"},a))}),L=()=>u<=1?null:e.jsx("div",{className:"mt-8 mb-6 flex flex-col sm:flex-row items-center justify-center gap-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>y(o-1),disabled:o===0,className:"flex items-center gap-1.5 px-3 py-2 bg-white border-2 border-gray-300 rounded-lg disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-50 hover:border-primary transition-all font-medium text-xs sm:text-sm",children:[e.jsx(V,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Anterior"})]}),e.jsxs("span",{className:"text-xs sm:text-sm text-gray-600 font-medium px-2",children:[e.jsx("span",{className:"font-bold text-primary",children:o+1})," de"," ",e.jsx("span",{className:"font-bold",children:u})]}),e.jsxs("button",{onClick:()=>y(o+1),disabled:o>=u-1,className:"flex items-center gap-1.5 px-3 py-2 bg-white border-2 border-gray-300 rounded-lg disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-50 hover:border-primary transition-all font-medium text-xs sm:text-sm",children:[e.jsx("span",{className:"hidden sm:inline",children:"Próxima"}),e.jsx(G,{size:16})]})]})}),c=r?.categories.find(s=>s.nome===i),N=r?.categories.map(s=>s.nome)||[];return e.jsxs(e.Fragment,{children:[e.jsx(W,{}),e.jsx("main",{className:"min-h-screen bg-gray-50 pt-3 sm:pt-6",children:e.jsx("div",{className:"container mx-auto px-3 sm:px-4 pb-4",children:e.jsxs("div",{className:"grid lg:grid-cols-[280px_1fr] gap-6",children:[e.jsx(t.Suspense,{fallback:null,children:e.jsx($,{categories:N,selected:i,onSelect:p,search:n,onSearch:h})}),e.jsxs("div",{children:[j&&e.jsxs("div",{className:"md:hidden mb-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-full border border-gray-200 px-3 py-2 shadow-sm",children:[e.jsx(F,{size:16,className:"text-gray-500"}),e.jsx("input",{type:"text",value:n,onChange:s=>h(s.target.value),placeholder:"Buscar produtos ou SKUs",className:"flex-1 bg-transparent outline-none text-sm"})]}),e.jsx("div",{className:"flex gap-1.5 overflow-x-auto pb-1 scrollbar-hide",children:["Todos",...N].map(s=>e.jsx("button",{onClick:()=>p(s),className:`whitespace-nowrap px-2.5 py-1.5 rounded-full border text-[10px] font-medium ${i===s?"bg-primary text-white border-primary":"bg-white text-gray-700 border-gray-200"}`,children:s},s))})]}),c&&(c.descricao||c.videoUrl)&&e.jsxs("div",{className:"mb-6 bg-white rounded-2xl shadow-card overflow-hidden",children:[c.videoUrl&&e.jsx("div",{className:"relative w-full aspect-video bg-gray-900",children:e.jsx("video",{src:c.videoUrl,className:"w-full h-full object-cover",autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}),c.descricao&&e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-title font-bold text-dark mb-2",children:i}),e.jsx("p",{className:"text-sm sm:text-base text-gray-700 leading-relaxed",children:c.descricao})]})]}),C?w:d.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("p",{className:"text-lg text-gray-500",children:"Nenhum produto encontrado"}),n&&e.jsx("button",{onClick:()=>h(""),className:"mt-4 px-5 py-2 bg-primary text-white rounded-lg hover:opacity-90 transition-all text-sm",children:"Limpar busca"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-3 flex items-center justify-between text-xs sm:text-sm text-gray-600",children:e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:o*l+1})," -"," ",e.jsx("span",{className:"font-semibold",children:Math.min((o+1)*l,d.length)})," de"," ",e.jsx("span",{className:"font-semibold",children:d.length})," ",d.length===1?"produto":"produtos"]})}),e.jsx(t.Suspense,{fallback:w,children:e.jsx(H,{products:A,onView:b,onAdd:_})}),L()]})]})]})})}),e.jsx("button",{onClick:v,className:"fixed bottom-16 right-4 bg-green-500 hover:bg-green-600 text-white p-3 sm:p-4 rounded-full shadow-2xl hover:scale-110 transition-all z-40","aria-label":"Contato WhatsApp",children:e.jsx(D,{size:24})}),e.jsxs(t.Suspense,{fallback:null,children:[g&&e.jsx(B,{product:g,onClose:()=>b(null)}),e.jsx(K,{}),e.jsx(q,{})]}),e.jsx("div",{className:"bg-gradient-to-r from-primary/10 via-primary/5 to-primary/10 py-6 px-4 mt-6",children:e.jsxs("div",{className:"container mx-auto flex flex-col md:flex-row items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-title font-bold text-dark",children:"Precisa de ajuda rápida?"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Use os filtros e a busca ou fale conosco pelo WhatsApp."})]}),e.jsx("button",{onClick:v,className:"px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-full shadow-md font-semibold text-xs sm:text-sm transition-all",children:"Abrir WhatsApp"})]})})]})}function te(){return e.jsx(k,{children:e.jsx(J,{})})}export{te as default};
