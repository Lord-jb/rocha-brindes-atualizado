---
import AdminLayout from '@/layouts/AdminLayout.astro';
import AdminSettings from '@/components/AdminSettings';

// Fetch settings
const settingsUrl = new URL('/api/settings', Astro.url.origin);
let settings = null;

try {
  const settingsResponse = await fetch(settingsUrl.toString());
  if (settingsResponse.ok) {
    settings = await settingsResponse.json();
  }
} catch (error) {
  console.error('Failed to fetch settings:', error);
}
---

<AdminLayout title="Configurações - Admin">
  <!-- Page Header -->
  <div class="mb-8">
    <h1 class="text-3xl font-display font-bold text-gray-900 mb-2">
      Configurações
    </h1>
    <p class="text-gray-600">
      Gerencie as configurações do site
    </p>
  </div>

  <!-- Settings Form -->
  <AdminSettings client:load settings={settings} />
</AdminLayout>
